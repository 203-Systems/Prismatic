{"version":3,"sources":["Components/ProjectFileReader.jsx","Components/Navbar.jsx","Engine/keyLED.js","Engine/autoPlay.js","Engine/projectFile.js","Components/Button.jsx","palette.js","Components/Canvas.jsx","Components/Spacer.jsx","config.js","deviceConfigs.js","Components/App.jsx","serviceWorker.js","index.js"],"names":["ProjectFileReader","Component","onFileChange","event","props","loadProjectFile","target","files","Fragment","type","id","name","accept","onChange","this","KeyLED","text","repeat","keyLED","undefined","play","canvas","a","i","line","command","split","length","setColorPalette","parseInt","setMCColorPalette","setColorHEX","setMCColorHEX","wait","ms","Promise","resolve","setTimeout","AutoPlay","autoplay","status","progress","currentChain","canvas_origin","callback","console","log","initlalizeCanvas","wait_complete","chainChange","keyOn","keyOff","then","ProjectFile","file","info","keySound","unpack","projectFile","reject","JSZip","require","loadAsync","zip","Object","values","e","projectRoot","keySoundFile","autoplayFile","soundFiles","keyLEDFiles","endsWith","toLowerCase","includes","pop","async","slice","forEach","Array","chain","fill","map","buttonX","buttonY","entries","fileInfo","charCodeAt","warn","sound","window","URL","createObjectURL","format","Howl","src","push","Button","state","keyState","on","x","y","off","shouldUpdate","nextProps","color","render","onMouseDown","onTouchStart","className","class","style","backgroundColor","palette","Canvas","colormap","layoutConfig","width","height","keypressHistory","midiInputHandler","midiMessage","data","indexOf2dArray","inputConfig","keymap","NaN","config","toString","arrayCalculation","offseted_x","offseted_y","soundIndex","stop","ledIndex","checkChain","chainKey","p","outputDevice","output_offseted_x","output_offseted_y","sendMidi","outputConfig","channel","mc","mcTable","device_x","device_y","hex","sendSysex","hexSysexGen","array1","array2","operation","newArray","setInterval","setState","inputDevice","setupMidiInput","newInput","oldInput","onmidimessage","mode","note","value","modeKey","charAt","substr","send","message","matrix","len","j","len2","layout","Zoff","defaultLayout","deviceConfigs","midiNameRegex","padding","radius","arguments","xy","r","g","b","App","midiInput","midiOutput","layoutConfigName","inputConfigName","outputConfigName","autoplayProgress","React","createRef","downloadProjectFile","url","projectPack","catch","alert","onMIDISuccess","midiAccess","inputs","input","label","outputs","output","playAutoplay","current","total","toFixed","bind","stopAutoplay","pauseAutoplay","pause","navigator","requestMIDIAccess","onMIDIFailure","urlParams","URLSearchParams","location","search","get","unipack_url","port","splice","inputDeviceConfig","inputDeviceName","outputDeviceConfig","outputDeviceName","deviceName","key","match","options","prepDeviceConfig","autosize","placeholder","setLayoutConfig","setInputDevice","setInputConfig","setOutputDevice","setOutputConfig","marginRight","display","onClick","borderRadius","ref","device","autoConfigPicker","result","Boolean","hostname","ReactDOM","document","getElementById","serviceWorker","ready","registration","unregister","error"],"mappings":"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A,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WCgLaC,GC9SMlH,Y,kDDInB,WAAYG,GAAQ,IAAD,8BACjB,cAAMA,IAIR8F,MAAQ,CACNkB,SAAU,IAAIrC,MAAM,EAAK3E,MAAMiH,aAAaC,OAAOrC,KAAK,MAAMC,KAC5D,kBAAM,IAAIH,MAAM,EAAK3E,MAAMiH,aAAaE,QAAQtC,KAAKiC,EAAQ,QAP9C,EAUnBM,gBAAkB,IAAIzC,MAAM,GAAGE,KAAK,MAAMC,KAC9B,kBAAM,IAAIH,MAAM,EAAK3E,MAAMiH,aAAaC,OAAOrC,KAAK,MAAMC,KAC1D,kBAAM,IAAIH,MAAM,EAAK3E,MAAMiH,aAAaE,QAAQtC,KAAK,SAZ9C,EAanBvC,aAAe,EAbI,EAkDnB+E,iBAAmB,SAACC,GAElB7E,QAAQC,IAAI4E,EAAYC,MAD1B,MAEc,EAAKC,eAAeF,EAAYC,KAAK,GAAI,EAAKvH,MAAMyH,YAAYC,QAF9E,mBAEOxB,EAFP,KAESD,EAFT,KAGE,GAAS0B,MAAN1B,GAAmB0B,MAANzB,EAGd,OAAOoB,EAAYC,KAAK,IAEtB,KAAK,IACH,GAA0B,GAAvBD,EAAYC,KAAK,GACpB,CACE,EAAKzE,MAAMmD,EAAGC,EAAG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","file":"static/js/main.07b83bf4.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nclass ProjectFileReader extends Component {\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <input type=\"file\" id=\"projectFilePicker\" name=\"projectFile\" accept=\".zip\" onChange={this.onFileChange}/>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  onFileChange = event => { \r\n    this.props.loadProjectFile(event.target.files[0]);\r\n  };\r\n}\r\n\r\nexport default ProjectFileReader;","import React, { Component } from 'react'\r\n\r\nclass Navbar extends Component {\r\n\r\n    render = () => (\r\n        <nav className='navbar-container'>\r\n            <form className='navbar-form' /*action={TODO}*/>\r\n                <div className='navbar-input'>\r\n                    <input type='file' id='file' onChange={this.props.onFileChange}/>\r\n                </div>\r\n                <div className='navbar-project'>\r\n                    <span>Curent project: {this.props.name}</span>\r\n                </div>\r\n            </form>\r\n        </nav>\r\n    )\r\n}\r\n\r\nexport default Navbar ","class KeyLED\r\n{\r\n  keyLED = undefined\r\n  repeat = 1;\r\n  constructor(text, repeat)\r\n  {\r\n    this.keyLED = text;\r\n    this.repeat = repeat;\r\n  }\r\n\r\n  play = async(canvas) =>\r\n  {\r\n    for(var i = 0; i < this.repeat; i++)\r\n    {\r\n      for(var line of this.keyLED)\r\n      {\r\n        let command = line.split(\" \");\r\n        // console.log(command);\r\n        if(command.length < 2)\r\n          continue;\r\n\r\n        switch(command[0])\r\n        {\r\n          case 'o': //set color\r\n          case 'on': //set color\r\n            if(command.length === 5) //PaletteMode\r\n            {\r\n              if(command[1] !== \"mc\")\r\n              {\r\n                canvas.setColorPalette(parseInt(command[2] - 1), parseInt(command[1] - 1), parseInt(command[4]));\r\n              }\r\n              else\r\n              {\r\n                canvas.setMCColorPalette(parseInt(command[2] - 1), parseInt(command[4]));\r\n              }\r\n            }else if(command.length === 4)\r\n            {\r\n              if(command[1] !== \"mc\")\r\n              {\r\n                canvas.setColorHEX(parseInt(command[2] - 1), parseInt(command[1] - 1), \"#\" + command[3]);\r\n              }\r\n              else\r\n              {\r\n                canvas.setMCColorHEX(parseInt(command[2] - 1), \"#\" + command[3]);\r\n              }\r\n            }\r\n              break;\r\n          case 'f': //color off\r\n          case 'off': //color off\r\n          if(command[1] !== \"mc\")\r\n            {\r\n              canvas.setColorPalette(parseInt(command[2] - 1), parseInt(command[1] - 1), 0);\r\n            }\r\n            else\r\n            {\r\n              canvas.setMCColorPalette(parseInt(command[2] - 1), 0);\r\n            }\r\n            break;\r\n          case 'd': //wait\r\n            await this.wait(parseInt(command[1]));\r\n            break;\r\n          default:\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  wait(ms)\r\n  {\r\n    return new Promise(resolve => setTimeout(resolve, ms))\r\n  }\r\n}\r\n\r\nexport default KeyLED;","class AutoPlay\r\n{\r\n  autoplay = undefined;\r\n  status = \"STOPPED\"\r\n  progress = 0\r\n  currentChain = 0\r\n  constructor(text)\r\n  {\r\n    this.autoplay = text;\r\n  }\r\n\r\n  play = async(canvas, canvas_origin, callback) =>\r\n  {\r\n    console.log(canvas)\r\n    console.log(canvas_origin);\r\n    if(this.progress === 0)\r\n    {\r\n      canvas.initlalizeCanvas();\r\n      this.currentChain = parseInt(0);\r\n    }\r\n    this.status = \"PLAYING\"\r\n    for(this.progress; this.progress < this.autoplay.length; this.progress ++)\r\n    {\r\n      let wait_complete = true;\r\n      console.log(this.autoplay[this.progress])\r\n      let command = this.autoplay[this.progress].split(\" \");\r\n\r\n      if(callback !== undefined)\r\n        callback([this.progress, this.autoplay.length])\r\n      \r\n      if(command.length < 2)\r\n        continue;\r\n      \r\n      if(canvas.currentChain != this.currentChain)\r\n      {\r\n        canvas.chainChange(this.currentChain);\r\n      }\r\n      switch(command[0])\r\n      {\r\n        case 't':\r\n        case 'o':\r\n          canvas.keyOn(parseInt(command[2]) - 1 + canvas_origin[0], parseInt(command[1]) - 1 + canvas_origin[1]);\r\n          break;\r\n        case 'f':\r\n          canvas.keyOff(parseInt(command[2]) - 1 + canvas_origin[0], parseInt(command[1]) - 1 + canvas_origin[1]);\r\n          break;\r\n        case 'd':\r\n          // console.time(\"Autoplay wait\");\r\n          wait_complete = false;\r\n          this.wait(parseInt(command[1])).then(() => {wait_complete = true});\r\n          // console.timeEnd(\"Autoplay wait\");\r\n          // await this.better_wait(parseInt(parameter[1]));\r\n          break;\r\n        case 'c':\r\n        case 'chain':\r\n          canvas.chainChange(parseInt(command[1]) - 1);\r\n          this.currentChain = parseInt(command[1]) - 1;\r\n          break;\r\n        default:\r\n      }\r\n\r\n      do\r\n      {\r\n        if (this.status === \"STOPPED\" || this.status === \"PAUSED\")\r\n        {\r\n          this.progress ++;\r\n          return;\r\n        }\r\n        await this.wait(1000/120)\r\n      }while(!wait_complete)\r\n    }\r\n    this.status = \"STOPPED\"\r\n    this.progress = 0\r\n  }\r\n\r\n  pause() {\r\n    this.status = \"PAUSED\"\r\n  }\r\n\r\n  stop() {\r\n    this.status = \"STOPPED\"\r\n    this.progress = 0\r\n  }\r\n\r\n  wait(ms)\r\n  {\r\n    return new Promise(resolve => setTimeout(resolve, ms))\r\n  }\r\n}\r\n\r\nexport default AutoPlay;","import { Howl } from 'howler';\r\nimport KeyLED from \"./keyLED\"\r\nimport AutoPlay from \"./autoPlay\"\r\n\r\nclass ProjectFile {\r\n  info = {};\r\n  keySound = undefined;\r\n  autoplay = undefined;\r\n  keyLED = undefined;\r\n\r\n  constructor(file) {\r\n    return this.unpack(file);\r\n  }\r\n\r\n  unpack(projectFile) {\r\n    return new Promise(async (resolve, reject) => {\r\n      console.log(this.info)\r\n      let JSZip = require(\"jszip\");\r\n      let files = await JSZip.loadAsync(projectFile).then(function (zip) {\r\n        return Object.values(zip.files)\r\n      }, function (e) {\r\n        reject(\"Failed to extract selected file\");\r\n        console.log(e);\r\n        return;\r\n      });\r\n      let projectRoot = undefined;\r\n      let keySoundFile = undefined;\r\n      let autoplayFile = undefined;\r\n      let soundFiles = {};\r\n      let keyLEDFiles = {};\r\n\r\n      //Load info and categorize files\r\n      for (let file of files) {\r\n        if (!file.name.endsWith(\"/\")) //Ignore folder\r\n        {\r\n          if (file.name.toLowerCase().includes(\"sounds/\")) //Audio\r\n          {\r\n            console.log(\"Sound file: \" + file.name);\r\n            soundFiles[file.name.split(\"/\").pop()] = file;\r\n          }\r\n          else {\r\n            let text = await file.async(\"text\").then((text) => { return text = text.split(/\\r?\\n/); });\r\n            if (file.name.toLowerCase().endsWith(\"info\")) //Text\r\n            {\r\n              console.log(\"Info file: \" + file.name);\r\n              projectRoot = file.name.slice(0, -4);\r\n              console.log(\" project root: \" + projectRoot);\r\n              text.forEach(info => this.info[info.split('=')[0]] = info.split('=')[1]);\r\n              this.info[\"buttonX\"] = parseInt(this.info[\"buttonX\"]);\r\n              this.info[\"buttonY\"] = parseInt(this.info[\"buttonY\"]);\r\n              this.info[\"chain\"] = parseInt(this.info[\"chain\"]);\r\n              this.info[\"squareButton\"] = this.info[\"squareButton\"] === \"true\";\r\n              this.info[\"landscape\"] = this.info[\"landscape\"] === \"true\";\r\n              console.log(\" title: \" + this.info[\"title\"])\r\n              console.log(\" producerName: \" + this.info[\"producerName\"])\r\n              console.log(\" buttonX: \" + this.info[\"buttonX\"])\r\n              console.log(\" buttonY: \" + this.info[\"buttonY\"])\r\n              console.log(\" chain: \" + this.info[\"chain\"])\r\n              console.log(\" squareButton: \" + this.info[\"squareButton\"])\r\n              console.log(\" landscape: \" + this.info[\"landscape\"])\r\n              if (this.info[\"buttonX\"] !== 8 || this.info[\"buttonY\"] !== 8) {\r\n                reject(\"Only 8x8 Unipad project are supported\");\r\n                return;\r\n              }\r\n              if (this.info[\"chain\"] > 8) {\r\n                reject(\"Only Unipad project that has within 8 chains are supported\");\r\n                return;\r\n              }\r\n            }\r\n            else if (file.name.toLowerCase().endsWith(\"keysound\")) {\r\n              console.log(\"KeySound file: \" + file.name);\r\n              keySoundFile = text;\r\n            }\r\n            else if (file.name.toLowerCase().endsWith(\"autoplay\")) {\r\n              console.log(\"AutoPlay file: \" + file.name);\r\n              autoplayFile = text;\r\n            }\r\n            else if (file.name.toLowerCase().includes(\"keyled/\")) {\r\n              console.log(\"KeyLED file: \" + file.name);\r\n              keyLEDFiles[file.name] = text;\r\n            }\r\n            else {\r\n              console.log(\"Unknown file: \" + file.name);\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      //Initialize 4D arraies\r\n      this.keySound = new Array(this.info.chain).fill(null).map(\r\n        () => new Array(this.info.buttonX).fill(null).map(\r\n          () => new Array(this.info.buttonY).fill(null).map(\r\n            () => new Array())));\r\n\r\n      this.keyLED = new Array(this.info.chain).fill(null).map(\r\n        () => new Array(this.info.buttonX).fill(null).map(\r\n          () => new Array(this.info.buttonY).fill(null).map(\r\n            () => new Array())));\r\n\r\n      // Load KeyLED\r\n      for (var [name, text] of Object.entries(keyLEDFiles)) {\r\n        let fileInfo = name.split(\"/\").pop().split(\" \");\r\n        if (fileInfo.length === 5) {\r\n          this.keyLED[parseInt(fileInfo[0]) - 1][parseInt(fileInfo[2]) - 1][parseInt(fileInfo[1]) - 1][fileInfo[4].charCodeAt(0) - 97] = new KeyLED(text, parseInt(fileInfo[3]))\r\n        }\r\n        else if (fileInfo.length === 4) {\r\n          this.keyLED[parseInt(fileInfo[0]) - 1][parseInt(fileInfo[2]) - 1][parseInt(fileInfo[1]) - 1] = [new KeyLED(text, parseInt(fileInfo[3]))]\r\n        }\r\n        else {\r\n          console.warn(\"Unknown keyLED file name: \" + name);\r\n        }\r\n      }\r\n\r\n      //Load KeySound\r\n      for (var line of keySoundFile) {\r\n        let command = line.split(\" \");\r\n\r\n        if (command.length < 2) //For empty lines\r\n          continue;\r\n\r\n        // console.log(command);\r\n        this.keySound[parseInt(command[0]) - 1][parseInt(command[2]) - 1][parseInt(command[1]) - 1].push(\r\n          await soundFiles[command[3]].async(\"blob\").then(function (sound) {\r\n            sound = window.URL.createObjectURL(sound);\r\n            let format = command[3].split(\".\").pop()\r\n            return new Howl({ src: [sound], format: [format] });\r\n          }));\r\n      }\r\n\r\n      //Load AutoPlay\r\n      this.autoplay = new AutoPlay(autoplayFile);\r\n\r\n      resolve(this)\r\n    });\r\n  }\r\n}\r\n\r\nexport default ProjectFile;","import React, { Component } from 'react'\r\n\r\nclass Button extends Component {\r\n    state = {\r\n        keyState: false,\r\n    }\r\n\r\n    // Turns stuff on\r\n    on = () => this.props.on(this.props.x, this.props.y)\r\n    \r\n    // Turns stuff off\r\n    off = () => {\r\n        if (this.keyState) {\r\n            this.keyState = !this.keyState\r\n            this.props.off(this.props.x, this.props.y)\r\n        }\r\n    }\r\n\r\n    // Updates\r\n    shouldUpdate = (nextProps) => this.props.color !== nextProps.color\r\n\r\n    render = () => (\r\n        <div>\r\n            <button onMouseDown={this.on} onTouchStart={this.on} className={this.props.class} style={\r\n                {\r\n                backgroundColor: this.props.color,\r\n                }\r\n            }>\r\n                {/* <svg width='80' height='80'>\r\n                    <path d='M75,80H5a5,5,0,0,1-5-5V5A5,5,0,0,1,5,0H62a8.33,8.33,0,0,1,5.12,2.12L77.88,12.88A8.33,8.33,0,0,1,80,18V75A5,5,0,0,1,75,80Z' fill={this.props.color} stroke='black' stoke-width='2px'/>\r\n                </svg> */}\r\n                {/* {this.props.x.toString() + ' ' + this.props.y.toString()} */}\r\n            </button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Button;","const palette = [\r\n  //New optimized palette\r\n  \"#808080\",\t//0\r\n  \"#dadfe4\",\t//1\r\n  \"#e6e9ed\",\t//2\r\n  \"#fafafa\",\t//3\r\n  \"#f8bbd0\",\t//4\r\n  \"#ef5350\",\t//5\r\n  \"#e57373\",\t//6\r\n  \"#ef9a9a\",\t//7\r\n  \"#fff3e0\",\t//8\r\n  \"#ffa726\",\t//9\r\n  \"#ffb960\",\t//10\r\n  \"#ffcc80\",\t//11\r\n  \"#ffe0b2\",\t//12\r\n  \"#ffee58\",\t//13\r\n  \"#fff59d\",\t//14\r\n  \"#fff9c4\",\t//15\r\n  \"#dcedc8\",\t//16\r\n  \"#8bc34a\",\t//17\r\n  \"#aed581\",\t//18\r\n  \"#bfdf9f\",\t//19\r\n  \"#5ee2b0\",\t//20\r\n  \"#00ce3c\",  //21\r\n  \"#00ba43\",  //22\r\n  \"#119c3f\",\t//23\r\n  \"#57ecc1\",\t//24\r\n  \"#00e864\",  //25\r\n  \"#00e05c\",  //26\r\n  \"#00d545\",  //27\r\n  \"#7afddd\",\t//28\r\n  \"#00e4c5\",  //29\r\n  \"#00e0b2\",  //30\r\n  \"#01eec6\",  //31\r\n  \"#49efef\",\t//32\r\n  \"#00e7d8\",  //33\r\n  \"#00e5d1\",  //34\r\n  \"#01efde\",  //35\r\n  \"#6addff\",\t//36\r\n  \"#00dafe\",  //37\r\n  \"#01d6ff\",  //38\r\n  \"#08acdc\",  //39\r\n  \"#73cefe\",\t//40\r\n  \"#0d9bf7\",  //41\r\n  \"#148de4\",\t//42\r\n  \"#2a77c9\",\t//43\r\n  \"#8693ff\",\t//44\r\n  \"#2196f3\",\t//45\r\n  \"#4668f6\",\t//46\r\n  \"#4153dc\",\t//47\r\n  \"#b095ff\",\t//48\r\n  \"#8453fd\",\t//49\r\n  \"#634acd\",\t//50\r\n  \"#5749c5\",\t//51\r\n  \"#ffb7ff\",\t//52\r\n  \"#e863fb\",\t//53\r\n  \"#d655ed\",\t//54\r\n  \"#d14fe9\",\t//55\r\n  \"#fc99e3\",\t//56\r\n  \"#e736c2\",\t//57\r\n  \"#e52fbe\",\t//58\r\n  \"#e334b6\",\t//59\r\n  \"#ed353e\",\t//60\r\n  \"#ffa726\",\t//61\r\n  \"#f4df0b\",  //62\r\n  \"#66bb6a\",\t//63\r\n  \"#5cd100\",  //64\r\n  \"#00d29e\",  //65\r\n  \"#2388ff\",\t//66\r\n  \"#3669fd\",\t//67\r\n  \"#00b4d0\",  //68\r\n  \"#475cdc\",\t//69\r\n  \"#f2f3f5\",\t//70\r\n  \"#eef0f2\",\t//71\r\n  \"#f72737\",\t//72\r\n  \"#d2ea7b\",\t//73\r\n  \"#c8df10\",\t//74\r\n  \"#7fe422\",\t//75\r\n  \"#00c931\",  //76\r\n  \"#00d7a6\",\t//77\r\n  \"#00d8fc\",  //78\r\n  \"#0b9bfc\",  //79\r\n  \"#585cf5\",\t//80\r\n  \"#ac59f0\",\t//81\r\n  \"#d980dc\",\t//82\r\n  \"#b8814a\",\t//83\r\n  \"#ff9800\",  //84\r\n  \"#abdf22\",\t//85\r\n  \"#9ee154\",\t//86\r\n  \"#66bb6a\",\t//87\r\n  \"#3bda47\",\t//88\r\n  \"#6fdeb9\",\t//89\r\n  \"#27dbda\",\t//90\r\n  \"#9cc8fd\",\t//91\r\n  \"#79b8f7\",\t//92\r\n  \"#afafef\",\t//93\r\n  \"#d580eb\",\t//94\r\n  \"#f74fca\",\t//95\r\n  \"#ea8a1f\",\t//96\r\n  \"#dbdb08\",  //97\r\n  \"#9cd60d\",  //98\r\n  \"#f3d335\",\t//99\r\n  \"#c8af41\",\t//100\r\n  \"#00ca69\",  //101\r\n  \"#24d2b0\",\t//102\r\n  \"#757ebe\",\t//103\r\n  \"#5388db\",\t//104\r\n  \"#e5c5a6\",\t//105\r\n  \"#e93b3b\",\t//106\r\n  \"#f9a2a1\",\t//107\r\n  \"#ed9c65\",\t//108\r\n  \"#e1ca72\",\t//109\r\n  \"#b8da78\",\t//110\r\n  \"#98d52c\",\t//111\r\n  \"#626cbd\",\t//112\r\n  \"#cac8a0\",\t//113\r\n  \"#90d4c2\",\t//114\r\n  \"#ceddfe\",\t//115\r\n  \"#beccf7\",\t//116\r\n  \"#d2d7de\",\t//117\r\n  \"#dadfe4\",\t//118\r\n  \"#e6e9ed\",\t//119\r\n  \"#fe1624\",\t//120\r\n  \"#cd2724\",\t//121\r\n  \"#9ccc65\",\t//122\r\n  \"#009c1b\",  //123\r\n  \"#ffff00\",  //124\r\n  \"#beb212\",\t//125\r\n  \"#f5d01d\",\t//126\r\n  \"#e37829\",\t//127\r\n];\r\n\r\n// const palette = [\r\n//   //LaunchpadXcolorPalette\r\n//   \"#000000\", //0\r\n//   \"#3F3F3F\", //1\r\n//   \"#7F7F7F\", //2\r\n//   \"#FFFFFF\", //3\r\n//   \"#FF3F3F\", //4\r\n//   \"#FF0000\", //5\r\n//   \"#7F0000\", //6\r\n//   \"#3F0000\", //7\r\n//   \"#FFBF6F\", //8\r\n//   \"#FF3F00\", //9\r\n//   \"#7F1F00\", //10\r\n//   \"#3F0F00\", //11\r\n//   \"#FFAF2F\", //12\r\n//   \"#FFFF00\", //13\r\n//   \"#7F7F00\", //14\r\n//   \"#3F3F00\", //15\r\n//   \"#7FFF2F\", //16\r\n//   \"#4FFF00\", //17\r\n//   \"#2F7F00\", //18\r\n//   \"#173F00\", //19\r\n//   \"#4FFF3F\", //20\r\n//   \"#00FF00\", //21\r\n//   \"#007F00\", //22\r\n//   \"#003F00\", //23\r\n//   \"#4FFF4F\", //24\r\n//   \"#00FF1F\", //25\r\n//   \"#007F0F\", //26\r\n//   \"#003F07\", //27\r\n//   \"#4FFF5F\", //28\r\n//   \"#00FF5F\", //29\r\n//   \"#007F2F\", //30\r\n//   \"#003F17\", //31\r\n//   \"#4FFFBF\", //32\r\n//   \"#00FF9F\", //33\r\n//   \"#007F4F\", //34\r\n//   \"#003F27\", //35\r\n//   \"#4FBFFF\", //36\r\n//   \"#00AFFF\", //37\r\n//   \"#00577F\", //38\r\n//   \"#002F3F\", //39\r\n//   \"#4F7FFF\", //40\r\n//   \"#0057FF\", //41\r\n//   \"#002F7F\", //42\r\n//   \"#00173F\", //43\r\n//   \"#2F1FFF\", //44\r\n//   \"#0000FF\", //45\r\n//   \"#00007F\", //46\r\n//   \"#00003F\", //47\r\n//   \"#5F3FFF\", //48\r\n//   \"#2F00FF\", //49\r\n//   \"#17007F\", //50\r\n//   \"#0F003F\", //51\r\n//   \"#FF3FFF\", //52\r\n//   \"#FF00FF\", //53\r\n//   \"#7F007F\", //54\r\n//   \"#3F003F\", //55\r\n//   \"#FF3F6F\", //56\r\n//   \"#FF004F\", //57\r\n//   \"#7F002F\", //58\r\n//   \"#3F001F\", //59\r\n//   \"#FF0F00\", //60\r\n//   \"#9F3F00\", //61\r\n//   \"#7F4F00\", //62\r\n//   \"#2F2F00\", //63\r\n//   \"#003F00\", //64\r\n//   \"#003F1F\", //65\r\n//   \"#001F6F\", //66\r\n//   \"#0000FF\", //67\r\n//   \"#003F3F\", //68\r\n//   \"#1F00BF\", //69\r\n//   \"#5F3F4F\", //70\r\n//   \"#1F0F17\", //71\r\n//   \"#FF0000\", //72\r\n//   \"#BFFF2F\", //73\r\n//   \"#AFEF00\", //74\r\n//   \"#5FFF00\", //75\r\n//   \"#0F7F00\", //76\r\n//   \"#00FF5F\", //77\r\n//   \"#009FFF\", //78\r\n//   \"#002FFF\", //79\r\n//   \"#1F00FF\", //80\r\n//   \"#5F00EF\", //81\r\n//   \"#AF1F7F\", //82\r\n//   \"#2F0F00\", //83\r\n//   \"#FF2F00\", //84\r\n//   \"#7FDF00\", //85\r\n//   \"#6FFF1F\", //86\r\n//   \"#00FF00\", //87\r\n//   \"#3FFF2F\", //88\r\n//   \"#5FEF6F\", //89\r\n//   \"#3FFFCF\", //90\r\n//   \"#5F8FFF\", //91\r\n//   \"#2F4FCF\", //92\r\n//   \"#6F4FDF\", //93\r\n//   \"#DF1FFF\", //94\r\n//   \"#FF005F\", //95\r\n//   \"#FF4F00\", //96\r\n//   \"#BFAF00\", //97\r\n//   \"#8FFF00\", //98\r\n//   \"#7F5F00\", //99\r\n//   \"#3F2F00\", //100\r\n//   \"#00470F\", //101\r\n//   \"#0F4F1F\", //102\r\n//   \"#17172F\", //103\r\n//   \"#171F5F\", //104\r\n//   \"#5F3717\", //105\r\n//   \"#7F0000\", //106\r\n//   \"#DF3F2F\", //107\r\n//   \"#DF470F\", //108\r\n//   \"#FFBF1F\", //109\r\n//   \"#9FDF2F\", //110\r\n//   \"#6FAF0F\", //111\r\n//   \"#17172F\", //112\r\n//   \"#DFDF6F\", //113\r\n//   \"#7FEF8F\", //114\r\n//   \"#9F9FFF\", //115\r\n//   \"#8F6FFF\", //116\r\n//   \"#3F3F3F\", //117\r\n//   \"#6F6F6F\", //118\r\n//   \"#DFFFFF\", //119\r\n//   \"#9F0000\", //120\r\n//   \"#370000\", //121\r\n//   \"#17CF00\", //122\r\n//   \"#003F00\", //123\r\n//   \"#BFAF00\", //124\r\n//   \"#3F2F00\", //125\r\n//   \"#AF4F00\", //126\r\n//   \"#4F0F00\"  //127\r\n// ];\r\n\r\nexport default palette","import React, { Component } from \"react\";\r\n// import ProjectFileReader from './Components/projectFileReader';\r\nimport Button from './Button'\r\nimport palette from '../palette'\r\nimport Spacer from './Spacer'\r\n\r\nclass Canvas extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    setInterval(() => {this.setState({colormap: this.state.colormap})}, 1000/60);\r\n  }\r\n\r\n  state = {  \r\n    colormap: new Array(this.props.layoutConfig.width).fill(null).map(\r\n      () => new Array(this.props.layoutConfig.height).fill(palette[0])),\r\n  };\r\n\r\n  keypressHistory = new Array(8).fill(null).map(\r\n              () => new Array(this.props.layoutConfig.width).fill(null).map(\r\n              () => new Array(this.props.layoutConfig.height).fill(0)));\r\n  currentChain = 0;\r\n  // overlay = \"#808080\";\r\n\r\n  // shouldUpdate = (nextProps) => !Object.is(this.props.layoutConfig, nextProps.layoutConfig);\r\n\r\n  shouldComponentUpdate(nextProps) {\r\n    if (nextProps.layoutConfig !== this.props.layoutConfig) {\r\n      this.initlalizeCanvas(nextProps.layoutConfig);\r\n    }\r\n\r\n    if (nextProps.inputDevice !== this.props.inputDevice /* || prevProps.inputConfig !== this.props.inputConfig */ ) {\r\n      this.setupMidiInput(nextProps.inputDevice, this.props.inputDevice);\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  initlalizeCanvas(config = this.props.layoutConfig)\r\n  {\r\n    this.state.colormap = new Array(config.width).fill(null).map(\r\n      () => new Array(config.height).fill(palette[0])) //I write directly into state because that takes so long it will be complete by the time render is over and throw an error already. Since shouldComponentUpdate will enforce update I will give it a pass\r\n    // this.setState({colormap: this.state.colormap})\r\n    this.keypressHistory = new Array(8).fill(null).map(\r\n      () => new Array(config.width).fill(null).map(\r\n      () => new Array(config.height).fill(0)));\r\n    this.currentChain = 0;\r\n  }\r\n\r\n  setupMidiInput(newInput, oldInput)\r\n  {\r\n    // console.log([newInput, oldInput])\r\n    if(oldInput !== undefined)\r\n      oldInput.onmidimessage = null;\r\n    if(newInput !== undefined)\r\n      newInput.onmidimessage = this.midiInputHandler;\r\n  } \r\n\r\n  midiInputHandler = (midiMessage) =>\r\n  {\r\n    console.log(midiMessage.data);\r\n    let [y,x] = this.indexOf2dArray(midiMessage.data[1], this.props.inputConfig.keymap);\r\n    if(x !== NaN && y !== NaN)\r\n    {\r\n      // let [offseted_x, offseted_y] = this.arrayCalculation([x, y], this.props.inputConfig.canvas_origin, \"-\");\r\n      switch(midiMessage.data[0])\r\n      {\r\n        case 144:\r\n          if(midiMessage.data[2] != 0)\r\n          {\r\n            this.keyOn(x, y, this.props.inputConfig);\r\n            break;\r\n          }\r\n        case 128:\r\n          this.keyOff(x, y, this.props.inputConfig);\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  keyOn = (x, y, config = this.props.layoutConfig) => \r\n  {\r\n    console.log(\"Note On - \" + x.toString() + ' ' + y.toString());\r\n\r\n    let [offseted_x, offseted_y] = this.arrayCalculation([x, y], config.canvas_origin, \"-\");\r\n    console.log([x, y, offseted_x, offseted_y])\r\n\r\n    if(this.props.projectFile !== undefined)\r\n    {\r\n      //Sound\r\n      if(this.props.projectFile.keySound !== undefined && this.props.projectFile.keySound[this.currentChain] !== undefined && this.props.projectFile.keySound[this.currentChain][offseted_x] !== undefined && this.props.projectFile.keySound[this.currentChain][offseted_x][offseted_y] !== undefined && this.props.projectFile.keySound[this.currentChain][offseted_x][offseted_y].length > 0)\r\n      {\r\n        let soundIndex = this.keypressHistory[this.currentChain][x][y] % this.props.projectFile.keySound[this.currentChain][offseted_x][offseted_y].length;\r\n        // console.log('Play sound ${this.currentChain} ${offseted_x}')\r\n        this.props.projectFile.keySound[this.currentChain][offseted_x][offseted_y][soundIndex].stop();\r\n        this.props.projectFile.keySound[this.currentChain][offseted_x][offseted_y][soundIndex].play();\r\n      }\r\n\r\n      //LED\r\n      if(this.props.projectFile.keyLED !== undefined && this.props.projectFile.keyLED[this.currentChain] !== undefined && this.props.projectFile.keyLED[this.currentChain][offseted_x] !== undefined && this.props.projectFile.keyLED[this.currentChain][offseted_x][offseted_y] !== undefined && this.props.projectFile.keyLED[this.currentChain][offseted_x][offseted_y].length > 0)\r\n      {\r\n        let ledIndex = this.keypressHistory[this.currentChain][x][y] % this.props.projectFile.keyLED[this.currentChain][offseted_x][offseted_y].length;\r\n        this.props.projectFile.keyLED[this.currentChain][offseted_x][offseted_y][ledIndex].play(this);\r\n      }\r\n\r\n      //Update History\r\n      if(this.keypressHistory[this.currentChain][x] != undefined && this.keypressHistory[this.currentChain][x][y] != undefined)\r\n        this.keypressHistory[this.currentChain][x][y] += 1;\r\n\r\n      //Chain Change\r\n      this.checkChain(x, y, config);\r\n    }\r\n  }\r\n\r\n  checkChain = (x, y, config) =>\r\n  {\r\n    for(var i = 0; i < config.chainKey.length; i++) {\r\n      if(config.chainKey[i][0] === x && config.chainKey[i][1] === y)\r\n        this.chainChange(i);\r\n    }\r\n  }\r\n\r\n  keyOff = (x, y) => \r\n  {\r\n    console.log(\"Note Off - \" + x.toString() + ' ' + y.toString());\r\n  }\r\n\r\n  chainChange = (chain) =>\r\n  {\r\n    console.log(\"Chain Changed to \" + (chain + 1));\r\n    this.currentChain = chain;\r\n  }\r\n\r\n  setColorPalette = (x, y, p) =>\r\n  {\r\n    let [offseted_x, offseted_y] = this.arrayCalculation([x, y], this.props.layoutConfig.canvas_origin, \"+\");\r\n    this.state.colormap[offseted_x][offseted_y] = palette[p]\r\n    if(this.props.outputDevice != undefined)\r\n    {\r\n      let [output_offseted_x, output_offseted_y] = this.arrayCalculation([x, y], this.props.inputConfig.canvas_origin, \"+\");\r\n      this.sendMidi(\"NoteOn\", this.props.outputConfig.channel, this.props.outputConfig.keymap[output_offseted_y][output_offseted_x], p)\r\n    }\r\n  }\r\n\r\n  setMCColorPalette = (mc, p) =>\r\n  {\r\n    if(this.props.layoutConfig.mcTable[mc] != null)\r\n    {\r\n      let [x, y] = this.props.layoutConfig.mcTable[mc];\r\n      this.state.colormap[x][y] = palette[p]\r\n      if(this.props.outputDevice != undefined && this.props.outputConfig.mcTable[mc] != undefined)\r\n      {\r\n        let [device_x, device_y] = this.props.outputConfig.mcTable[mc];\r\n        this.sendMidi(\"NoteOn\", this.props.outputConfig.channel, this.props.outputConfig.keymap[device_y][device_x], p)\r\n      }\r\n    }\r\n  }\r\n\r\n  setColorHEX = (x, y, hex) =>\r\n  {\r\n    let [offseted_x, offseted_y] = this.arrayCalculation([x, y], this.props.layoutConfig.canvas_origin, \"+\");\r\n    this.state.colormap[offseted_x][offseted_y] = hex\r\n    this.sendSysex(this.props.outputConfig.hexSysexGen(x, y, hex))\r\n  }\r\n\r\n  setMCColorHEX = (mc, hex) =>\r\n  {\r\n    if(this.props.layoutConfig.mcTable[mc] != null)\r\n    {\r\n      let [x, y] = this.props.layoutConfig.mcTable[mc];\r\n      this.state.colormap[x][y] = hex\r\n    }\r\n    if(this.props.outputConfig.mcTable[mc] != null)\r\n    {\r\n      this.sendSysex(this.props.outputConfig.hexSysexGen(mc, hex))\r\n    }\r\n  }\r\n\r\n  sendMidi(mode, channel, note, value)\r\n  {\r\n    if(typeof(note) === \"string\")\r\n    {\r\n      let modeKey = note.charAt(0);\r\n      note = parseInt(note.substr(1))\r\n      switch(modeKey)\r\n      {\r\n        case \"C\":\r\n          mode = \"CC\"\r\n          break;\r\n        default:\r\n          return;\r\n      }\r\n    } \r\n    switch(mode)\r\n    {\r\n      case \"NoteOn\":\r\n        this.props.outputDevice.send([0x90 + channel - 1, note, value])\r\n          break;\r\n      case \"NoteOff\":\r\n        this.props.outputDevice.send([0x80 + channel - 1, note, value])\r\n        break;\r\n      case \"CC\":\r\n        this.props.outputDevice.send([0xB0 + channel - 1, note, value])\r\n        break;\r\n    }\r\n  }\r\n\r\n  sendSysex(message)\r\n  {\r\n    this.props.outputDevice.send(message)\r\n  }\r\n\r\n  // // Overlays a color\r\n  // colorOverlay = (hex, overlay) => {\r\n  //   let [r, g, b] = this.toRGB(hex)\r\n  //   let [r0, g0, b0] = this.toRGB(overlay)\r\n  //   r = Math.round(r * (255 - r0) / 255 + r0);\r\n  //   g = Math.round(g * (255 - g0) / 255 + g0);\r\n  //   b = Math.round(b * (255 - b0) / 255 + b0);\r\n  //   return this.toHEX(r, g, b)\r\n  // }\r\n\r\n  // // Converts a CHAD HEX color to a beta RGB color\r\n  // toRGB = (hex) => {\r\n  //   const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex)\r\n  //   return [parseInt(result[1], 16),\r\n  //           parseInt(result[2], 16),\r\n  //           parseInt(result[3], 16)]\r\n  // }\r\n\r\n  // // Converts a beta RGB color to a CHAD HEX color\r\n  // toHEX = (r, g, b) => '#' + this.componentToHex(r) + this.componentToHex(g) + this.componentToHex(b)\r\n\r\n  // // Converts the value of a given component to CHAD HEX\r\n  // componentToHex = (component) => {\r\n  //   const hex = component.toString(16)\r\n  //   return hex.length === 1 ? '0' + hex : hex\r\n  // }\r\n\r\n  arrayCalculation = (array1, array2, operation) =>\r\n  {\r\n    let newArray = [];\r\n    if(array1.length === array2.length)\r\n    {\r\n      switch(operation)\r\n      {\r\n        case \"+\":\r\n          for(var i = 0; i < array1.length; i++)\r\n          {\r\n            newArray.push(array1[i] + array2[i]);\r\n          }\r\n          return newArray;\r\n        case \"-\":\r\n          for(var i = 0; i < array1.length; i++)\r\n          {\r\n            newArray.push(array1[i] - array2[i]);\r\n          }\r\n          return newArray;\r\n      }\r\n    }\r\n  }\r\n\r\n  indexOf2dArray(id, matrix) {\r\n    for (var i=0, len=matrix.length; i<len; i++) {\r\n      for (var j=0, len2=matrix[i].length; j<len2; j++) {\r\n        if (matrix[i][j] === id) { return [i, j]; }\r\n      }\r\n    }\r\n    return [NaN, NaN];\r\n  }\r\n  \r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        {this.props.layoutConfig.layout.map((value, y) => {\r\n          return (\r\n            <div className='button-row'>\r\n              {this.props.layoutConfig.layout[y].map((value, x) => {\r\n                switch (value) {\r\n                  case \"\":\r\n                    return <Button x={x} y={y} class=\"LEDButtonSquare\"color={this.state.colormap[x][y]} on={this.keyOn} off={this.keyOff}/>;\r\n                  case \"\":\r\n                    return <Button x={x} y={y} class=\"LEDButtonCircle75\" \r\n                    color={this.state.colormap[x][y]} \r\n                    on={this.keyOn} off={this.keyOff}/>;\r\n                  case \"\":\r\n                  case \"\":\r\n                  case \"\":\r\n                  case \"\":\r\n                    return <Button x={x} y={y} class=\"LEDButtonSquare\" color={this.state.colormap[x][y]} on={this.keyOn} Zoff={this.keyOff}/>;\r\n                  default:\r\n                    return <div key={\"Spacer \" + x.toString() + \"-\" + y.toString()} style={{\r\n                      width: '96px'\r\n                    }}></div>;\r\n                }\r\n              })}\r\n            </div>\r\n          );\r\n        })}\r\n      {/* <button onClick={this.playAutoplay}>Auto Play</button> */}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Canvas","import React, { Component } from 'react'\r\nimport Pallete from '../palette'\r\n\r\nclass Spacer extends Component {\r\n    state = {}\r\n\r\n    setColor = (velocity) => {\r\n    }\r\n\r\n    render = () => (\r\n        <div>\r\n            <Spacer/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Spacer","const config = {\r\n  defaultLayout: \"Launchpad Pro\",\r\n}\r\n\r\nexport default config;","const deviceConfigs = {\r\n  \"Launchpad Pro\":\r\n  {\r\n    channel: 1,\r\n    midiNameRegex: \"Launchpad Pro\", //For some reason mine shows up as \"3- Launchpad Pro\"\r\n    \r\n    layout: [\r\n      [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n      [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n      [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n      [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n      [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n      [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n      [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n      [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n      [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n      [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"]],\r\n\r\n    keymap: [\r\n      [null, 91, 92, 93, 94, 95, 96, 97, 98, null],\r\n      [80, 81, 82, 83, 84, 85, 86, 87, 88, 89], \r\n      [70, 71, 72, 73, 74, 75, 76, 77, 78, 79],\r\n      [60, 61, 62, 63, 64, 65, 66, 67, 68, 69],\r\n      [50, 51, 52, 53, 54, 55, 56, 57, 58, 59],\r\n      [40, 41, 42, 43, 44, 45, 46, 47, 48, 49],\r\n      [30, 31, 32, 33, 34, 35, 36, 37, 38, 39],\r\n      [20, 21, 22, 23, 24, 25, 26, 27, 28, 29],\r\n      [10, 11, 12, 13, 14, 15, 16, 17, 18, 19],\r\n      [null, 1, 2, 3, 4, 5, 6, 7, 8, null]],\r\n\r\n    //Size of LED since sometimes Key can come without LED. We don't really need them since we can load the size of layout array\r\n    width: 10, \r\n    height: 10,\r\n\r\n    //UI related\r\n    padding: 25,\r\n    radius: 15,\r\n    \r\n    canvas_origin: [1,1],\r\n\r\n    chainKey: [[9,1], [9,2], [9,3], [9,4], [9,5], [9,6], [9,7], [9,8]],\r\n\r\n    mcTable: [\r\n      [1,0], [2,0], [3,0], [4,0], [5,0], [6,0], [7,0], [8,0],\r\n      [9,1], [9,2], [9,3], [9,4], [9,5], [9,6], [9,7], [9,8],\r\n      [8,9], [7,9], [6,9], [5,9], [4,9], [3,9], [2,9], [1,9],\r\n      [0,8], [0,7], [0,6], [0,5], [0,4], [0,3], [0,2], [0,1]],\r\n\r\n    hexSysexGen: function()\r\n    {\r\n      if(arguments.length != 2 && arguments.length != 3)\r\n        return //Error\r\n      switch(arguments.length)\r\n      {\r\n        case 2: //MC\r\n          var mc = arguments[0]\r\n          if(this.mcTable[mc] == null)\r\n            return\r\n          var x,y = this.mcTable[mc]\r\n          var hex = arguments[1]\r\n          break;\r\n        case 3: //XY\r\n          var x = arguments[0] + 1\r\n          var y = arguments[1] + 1\r\n          var hex = arguments[2]\r\n          break;\r\n        default:\r\n          return\r\n      }\r\n      var xy = x * 10 + y\r\n      var r = (hex >> 16) >> 2 //6 bit color\r\n      var g = (hex & 0xFF00 >> 8) >> 2\r\n      var b = (hex & 0xFF) >> 2\r\n      return [240, 0, 32, 41, 2, 24, 11, xy, r, g, b, 247]\r\n    }\r\n  },\r\n  \"Launchpad Pro (CFW)\":\r\n  {\r\n    channel: 16,\r\n    midiNameRegex: \"Launchpad Open\", //For some reason mine shows up as \"3- Launchpad Pro\"\r\n    \r\n    // layout: [\r\n    //   [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n    //   [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n    //   [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n    //   [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n    //   [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n    //   [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n    //   [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n    //   [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n    //   [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n    //   [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"]],\r\n\r\n    keymap: [\r\n      [null, 28, 29, 30, 31, 32, 33, 34, 35, null],\r\n      [108, 64, 65, 66, 67, 96, 97, 98, 99, 100], \r\n      [109, 60, 61, 62, 63, 92, 93, 94, 95, 101],\r\n      [110, 56, 57, 58, 59, 88, 89, 90, 91, 102],\r\n      [111, 52, 53, 54, 55, 84, 85, 86, 87, 103],\r\n      [112, 48, 49, 50, 51, 80, 81, 82, 83, 104],\r\n      [113, 44, 45, 46, 47, 76, 77, 78, 79, 105],\r\n      [114, 40, 41, 42, 43, 72, 73, 74, 75, 106],\r\n      [115, 36, 37, 38, 39, 68, 69, 70, 71, 107],\r\n      [null, 116, 117, 118, 119, 120, 121, 122, 123, null]],\r\n\r\n    //Size of LED since sometimes Key can come without LED. We don't really need them since we can load the size of layout array\r\n    width: 10, \r\n    height: 10,\r\n\r\n    //UI related\r\n    padding: 25,\r\n    radius: 15,\r\n    \r\n    canvas_origin: [1,1],\r\n\r\n    chainKey: [[9,1], [9,2], [9,3], [9,4], [9,5], [9,6], [9,7], [9,8]],\r\n\r\n    mcTable: [\r\n      [1,0], [2,0], [3,0], [4,0], [5,0], [6,0], [7,0], [8,0],\r\n      [9,1], [9,2], [9,3], [9,4], [9,5], [9,6], [9,7], [9,8],\r\n      [8,9], [7,9], [6,9], [5,9], [4,9], [3,9], [2,9], [1,9],\r\n      [0,8], [0,7], [0,6], [0,5], [0,4], [0,3], [0,2], [0,1]],\r\n\r\n    hexSysexGen: function()\r\n    {\r\n      if(arguments.length != 2 && arguments.length != 3)\r\n        return //Error\r\n      switch(arguments.length)\r\n      {\r\n        case 2: //MC\r\n          var mc = arguments[0]\r\n          if(this.mcTable[mc] == null)\r\n            return\r\n          var x,y = this.mcTable[mc]\r\n          var hex = arguments[1]\r\n          break;\r\n        case 3: //XY\r\n          var x = arguments[0] + 1\r\n          var y = arguments[1] + 1\r\n          var hex = arguments[2]\r\n          break;\r\n        default:\r\n          return\r\n      }\r\n      var xy = x * 10 + y\r\n      var r = (hex >> 16) >> 2 //6 bit color\r\n      var g = (hex & 0xFF00 >> 8) >> 2\r\n      var b = (hex & 0xFF) >> 2\r\n      return [240, 0, 32, 41, 2, 24, 11, xy, r, g, b, 247]\r\n    }\r\n  },\r\n  \"Launchpad MK2\":\r\n  {\r\n    channel: 1,\r\n    midiNameRegex: \"^Launchpad MK2\",\r\n    \r\n    layout: [\r\n      [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n      [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n      [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n      [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n      [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n      [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n      [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n      [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n      [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"]],\r\n\r\n    keymap: [\r\n      [\"C104\", \"C105\", \"C106\", \"C107\", \"C108\", \"C109\", \"C110\", \"C111\", null],\r\n      [81, 82, 83, 84, 85, 86, 87, 88, 89],  \r\n      [71, 72, 73, 74, 75, 76, 77, 78, 79], \r\n      [61, 62, 63, 64, 65, 66, 67, 68, 69], \r\n      [51, 52, 53, 54, 55, 56, 57, 58, 59], \r\n      [41, 42, 43, 44, 45, 46, 47, 48, 49], \r\n      [31, 32, 33, 34, 35, 36, 37, 38, 39], \r\n      [21, 22, 23, 24, 25, 26, 27, 28, 29], \r\n      [11, 12, 13, 14, 15, 16, 17, 18, 19]],\r\n\r\n    width: 9, \r\n    height: 9,\r\n\r\n    //UI related\r\n    padding: 25,\r\n    radius: 15,\r\n    \r\n    canvas_origin: [0,1],\r\n\r\n    chainKey: [[8,1], [8,2], [8,3], [8,4], [8,5], [8,6], [8,7], [8,8]],\r\n\r\n    mcTable: [\r\n      [0,0], [1,0], [2,0], [3,0], [4,0], [5,0], [6,0], [7,0],\r\n      [8,1], [8,2], [8,3], [8,4], [8,5], [8,6], [8,7], [8,8],\r\n      null, null, null, null, null, null, null, null,\r\n      null, null, null, null, null, null, null, null,],\r\n\r\n    hexSysexGen: function()\r\n    {\r\n      if(arguments.length != 2 && arguments.length != 3)\r\n        return //Error\r\n      switch(arguments.length)\r\n      {\r\n        case 2: //MC\r\n          var mc = arguments[0]\r\n          if(this.mcTable[mc] == null)\r\n            return\r\n          var x,y = this.mcTable[mc]\r\n          var hex = arguments[1]\r\n        case 3: //XY\r\n          var x = arguments[0] + 1\r\n          var y = arguments[1] + 1\r\n          var hex = arguments[2]\r\n        default:\r\n          var xy = x * 10 + y\r\n          var r = (hex >> 16) >> 2 //6 bit color\r\n          var g = (hex & 0xFF00 >> 8) >> 2\r\n          var b = (hex & 0xFF) >> 2\r\n          return [240, 0, 32, 41, 2, 24, 11, xy, r, g, b, 247]\r\n      }\r\n    }\r\n  },\r\n  \"Launchpad X\":\r\n  {\r\n    channel: 1,\r\n    midiNameRegex: \"^Launchpad X\",\r\n    \r\n    // layout: [\r\n    //   [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n    //   [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n    //   [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n    //   [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n    //   [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n    //   [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n    //   [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n    //   [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n    //   [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"]],\r\n\r\n    keymap: [\r\n      [28, 29, 30, 31, 32, 33, 34, 35, 27],\r\n      [64, 65, 66, 67, 96, 97, 98, 99, 100], \r\n      [60, 61, 62, 63, 92, 93, 94, 95, 101],\r\n      [56, 57, 58, 59, 88, 89, 90, 91, 102],\r\n      [52, 53, 54, 55, 84, 85, 86, 87, 103],\r\n      [48, 49, 50, 51, 80, 81, 82, 83, 104],\r\n      [44, 45, 46, 47, 76, 77, 78, 79, 105],\r\n      [40, 41, 42, 43, 72, 73, 74, 75, 106],\r\n      [36, 37, 38, 39, 68, 69, 70, 71, 107]],\r\n\r\n    width: 9, \r\n    height: 9,\r\n\r\n    //UI related\r\n    padding: 25,\r\n    radius: 5,\r\n    \r\n    canvas_origin: [0,1],\r\n\r\n    chainKey: [[8,1], [8,2], [8,3], [8,4], [8,5], [8,6], [8,7], [8,8]],\r\n\r\n    mcTable: [\r\n      [0,0], [1,0], [2,0], [3,0], [4,0], [5,0], [6,0], [7,0],\r\n      [8,1], [8,2], [8,3], [8,4], [8,5], [8,6], [8,7], [8,8],\r\n      null, null, null, null, null, null, null, null,\r\n      null, null, null, null, null, null, null, null,],\r\n\r\n    hexSysexGen: function()\r\n    {\r\n      if(arguments.length != 2 && arguments.length != 3)\r\n        return //Error\r\n      switch(arguments.length)\r\n      {\r\n        case 2: //MC\r\n          var mc = arguments[0]\r\n          if(this.mcTable[mc] == null)\r\n            return\r\n          var x,y = this.mcTable[mc]\r\n          var hex = arguments[1]\r\n          break;\r\n        case 3: //XY\r\n          var x = arguments[0] + 1\r\n          var y = arguments[1] + 1\r\n          var hex = arguments[2]\r\n          break;\r\n        default:\r\n          return\r\n      }\r\n      var xy = x * 10 + y\r\n      var r = (hex >> 16) >> 1 //7 bit color\r\n      var g = (hex & 0xFF00 >> 8) >> 1\r\n      var b = (hex & 0xFF) >> 1\r\n      return [240, 0, 32, 41, 2, 12, 22, 3, 3, xy, r, g, b, 247]\r\n    }\r\n  },\r\n  \"Launchpad Pro MK3\":\r\n  {\r\n    channel: 1,\r\n    midiNameRegex: \"^Launchpad Pro MK3\",\r\n\r\n    // layout: [\r\n    //   [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n    //   [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n    //   [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n    //   [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n    //   [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n    //   [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n    //   [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n    //   [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n    //   [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n    //   [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"]],\r\n\r\n      keymap: [\r\n        [26, 28, 29, 30, 31, 32, 33, 34, 35, 27],\r\n        [108, 64, 65, 66, 67, 96, 97, 98, 99, 100], \r\n        [109, 60, 61, 62, 63, 92, 93, 94, 95, 101],\r\n        [110, 56, 57, 58, 59, 88, 89, 90, 91, 102],\r\n        [111, 52, 53, 54, 55, 84, 85, 86, 87, 103],\r\n        [112, 48, 49, 50, 51, 80, 81, 82, 83, 104],\r\n        [113, 44, 45, 46, 47, 76, 77, 78, 79, 105],\r\n        [114, 40, 41, 42, 43, 72, 73, 74, 75, 106],\r\n        [115, 36, 37, 38, 39, 68, 69, 70, 71, 107],\r\n        [null, 116, 117, 118, 119, 120, 121, 122, 123, null]],\r\n\r\n    //Size of LED since sometimes Key can come without LED. We don't really need them since we can load the size of layout array\r\n    width: 10, \r\n    height: 10,\r\n\r\n    //UI related\r\n    padding: 25,\r\n    radius: 5,\r\n    \r\n    canvas_origin: [1,1],\r\n\r\n    chainKey: [[9,1], [9,2], [9,3], [9,4], [9,5], [9,6], [9,7], [9,8]],\r\n\r\n    mcTable: [\r\n      [1,0], [2,0], [3,0], [4,0], [5,0], [6,0], [7,0], [8,0],\r\n      [9,1], [9,2], [9,3], [9,4], [9,5], [9,6], [9,7], [9,8],\r\n      [8,9], [7,9], [6,9], [5,9], [4,9], [3,9], [2,9], [1,9],\r\n      [0,8], [0,7], [0,6], [0,5], [0,4], [0,3], [0,2], [0,1]],\r\n      \r\n    hexSysexGen: function()\r\n    {\r\n      return\r\n      if(arguments.length != 2 && arguments.length != 3)\r\n        return //Error\r\n      switch(arguments.length)\r\n      {\r\n        case 2: //MC\r\n          var mc = arguments[0]\r\n          if(this.mcTable[mc] == null)\r\n            return\r\n          var x,y = this.mcTable[mc]\r\n          var hex = arguments[1]\r\n          break;\r\n        case 3: //XY\r\n          var x = arguments[0] + 1\r\n          var y = arguments[1] + 1\r\n          var hex = arguments[2]\r\n          break;\r\n        default:\r\n          return\r\n      }\r\n      var xy = x * 10 + y\r\n      var r = (hex >> 16) >> 1 //7 bit color\r\n      var g = (hex & 0xFF00 >> 8) >> 1\r\n      var b = (hex & 0xFF) >> 1\r\n      return [240, 0, 32, 41, 2, 12, 22, 3, 3, xy, r, g, b, 247]\r\n    }\r\n  },\r\n  \"Matrix\":\r\n  {\r\n    channel: 2,\r\n    midiNameRegex: \"^Matrix\",\r\n    \r\n    layout: [\r\n      [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n      [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n      [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n      [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n      [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n      [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n      [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n      [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"]],\r\n\r\n    keymap: [\r\n      [64, 65, 66, 67, 96, 97, 98, 99], \r\n      [60, 61, 62, 63, 92, 93, 94, 95],\r\n      [56, 57, 58, 59, 88, 89, 90, 91],\r\n      [52, 53, 54, 55, 84, 85, 86, 87],\r\n      [48, 49, 50, 51, 80, 81, 82, 83],\r\n      [44, 45, 46, 47, 76, 77, 78, 79],\r\n      [40, 41, 42, 43, 72, 73, 74, 75],\r\n      [36, 37, 38, 39, 68, 69, 70, 71],\r\n      [100, 101, 102, 103, 104, 105, 106, 107]],\r\n\r\n    width: 8, \r\n    height: 8,\r\n\r\n    //UI related\r\n    padding: 20,\r\n    radius: 15,\r\n    \r\n    canvas_origin: [0,0],\r\n\r\n    chainKey: [[0,8], [1,8], [2,8], [3,8], [4,8], [5,8], [6,8], [7,8]],\r\n\r\n    mcTable: [\r\n      null, null, null, null, null, null, null, null,\r\n      null, null, null, null, null, null, null, null,\r\n      null, null, null, null, null, null, null, null,\r\n      null, null, null, null, null, null, null, null,],\r\n\r\n    hexSysexGen: function()\r\n      {\r\n        if(arguments.length != 3)\r\n          return //Error\r\n        switch(arguments.length)\r\n        {\r\n          // case 2: //MC\r\n          //   var mc = arguments[0]\r\n          //   if(this.mcTable[mc] == null)\r\n          //     return\r\n          //   var x,y = this.mcTable[mc]\r\n          //   var hex = arguments[1]\r\n          case 3: //XY\r\n            var x = arguments[0]\r\n            var y = arguments[1]\r\n            var hex = arguments[2]\r\n            break;\r\n          default:\r\n            return;\r\n        }\r\n        var r = (hex >> 16) >> 1 //7 bit color\r\n        var g = (hex & 0xFF00 >> 8) >> 1\r\n        var b = (hex & 0xFF) >> 1\r\n        return [240, 0, 2, 3, 1, 0, 18, 32, 0, 3, r, g, b, 247]\r\n      }\r\n  },\r\n}\r\n\r\nexport default deviceConfigs;","import React, { Component } from \"react\";\r\nimport Navbar from \"./Navbar\";\r\nimport ProjectFileReader from \"./ProjectFileReader\";\r\nimport ProjectFile from \"../Engine/projectFile\";\r\nimport Button from \"./Button\";\r\nimport Canvas from \"./Canvas\";\r\nimport config from \"../config\";\r\nimport deviceConfigs from \"../deviceConfigs\";\r\nimport Select from 'react-select';\r\n// import download from \"downloadjs\";\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    if(navigator.requestMIDIAccess != undefined)\r\n    {\r\n      navigator.requestMIDIAccess().then(this.onMIDISuccess, this.onMIDIFailure);\r\n    }\r\n    else\r\n    {\r\n      alert(\"Your device doesn't support WebMidi\")\r\n    }\r\n    \r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    if(urlParams.get('unipack'))\r\n    {\r\n      var unipack_url = urlParams.get('unipack');\r\n      this.downloadProjectFile(unipack_url)\r\n    }\r\n  }\r\n\r\n  state = {\r\n    projectFile: undefined,\r\n\r\n    midiInput: [],\r\n    midiOutput: [],\r\n\r\n    layoutConfigName: config.defaultLayout,\r\n    layoutConfig: deviceConfigs[config.defaultLayout],\r\n\r\n    inputDevice: undefined,\r\n    inputConfigName: undefined,\r\n    inputConfig: undefined,\r\n\r\n    outputDevice: undefined,\r\n    outputConfigName: undefined,\r\n    outputConfig: undefined,\r\n\r\n    autoplayProgress: undefined,\r\n  };\r\n\r\n  canvas = React.createRef();\r\n\r\n  downloadProjectFile = (url) => { //Scrapped for now because Browser doesn't allow cross origon fetching. Need intergration witb third party sites CDNs\r\n  // alert(\"Downloading Unipack from \" + url)  \r\n  // let projectPack = download(url)\r\n    // console.log(projectPack)\r\n  }\r\n\r\n  loadProjectFile = (projectPack) => {\r\n    // console.log(projectPack)\r\n    new ProjectFile(projectPack)\r\n    .then((projectFile) => {this.setState({ projectFile: projectFile})})\r\n    .catch((message) => {alert(message)});\r\n  }\r\n\r\n  onMIDISuccess = (midiAccess) => {\r\n    console.log(\"Got access your MIDI devices.\");\r\n\r\n    var midiInput = [];\r\n    console.log(\"Input\");\r\n    for (var input of midiAccess.inputs.values()) {\r\n      console.log(input.name);\r\n      midiInput.push({label: input.name, value: input})\r\n    }\r\n    console.log(midiInput)\r\n    this.setState({midiInput: midiInput})\r\n\r\n    var midiOutput = [];\r\n    console.log();\r\n    console.log(\"Output\");\r\n    for (var output of midiAccess.outputs.values()) {\r\n      console.log(output.name);\r\n      midiOutput.push({label: output.name, value: output})\r\n    }\r\n    this.setState({midiOutput: midiOutput})\r\n\r\n    // midiAccess.onstatechange = this.onMidiStateChange\r\n  };\r\n\r\n  onMidiStateChange(e)\r\n  {\r\n    console.log(e);\r\n    console.log(e.port.name, e.port.state);\r\n    if(e.port.state === \"connected\")\r\n    {\r\n      if(e.port.type === \"input\")\r\n      {\r\n        var midiInput = this.state.midiInput\r\n        midiInput.push({label: e.port.name, value: e.port})\r\n        this.setState({midiInput: midiInput})\r\n      }\r\n      else if(e.port.type === \"output\")\r\n      {\r\n        var midiOutput = this.state.midiOutput\r\n        midiOutput.push({label: e.port.name, value: e.port})\r\n        this.setState({midiOutput: midiOutput})\r\n      }\r\n    }\r\n    else if(e.port.state === \"disconnected\")\r\n    {\r\n      if(e.port.type === \"input\")\r\n      {\r\n        var midiInput = this.state.midiInput\r\n        for(var i = 0; i < midiInput.length; i++)\r\n        {\r\n          if(midiInput[i].label === e.port.name)\r\n          {\r\n            midiInput.splice(i);\r\n            break;\r\n          }\r\n        }\r\n        this.setState({midiInput: midiInput})\r\n        if(this.state.inputDevice.name === this.e.port.name)\r\n        {\r\n          this.setState({inputDevice: undefined})\r\n          this.setState({inputDeviceConfig: undefined})\r\n          this.setState({inputDeviceName: undefined})\r\n        }\r\n      }\r\n      else if(e.port.type === \"output\")\r\n      {\r\n        var midiOutput = this.state.midiOutput\r\n        for(var i = 0; i < midiOutput.length; i++)\r\n        {\r\n          if(midiOutput[i].label === e.port.name)\r\n          {\r\n            midiOutput.splice(i);\r\n            break;\r\n          }\r\n        }\r\n        this.setState({midiOutput: midiOutput})\r\n        if(this.state.outputDevice.name === this.e.port.name)\r\n        {\r\n          this.setState({outputDevice: undefined})\r\n          this.setState({outputDeviceConfig: undefined})\r\n          this.setState({outputDeviceName: undefined})\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  onMIDIFailure() {\r\n    console.log(\"Could not access your MIDI devices.\");\r\n    alert(\"Could not access your MIDI devices. Try use another web browser or hardware platform\")\r\n  }\r\n  \r\n  autoConfigPicker(deviceName, mode) {//mode 0 for input, mode 1 for output\r\n    if(deviceName !== undefined)\r\n    {\r\n      for(var key in deviceConfigs)\r\n      {\r\n        if (deviceName.match(deviceConfigs[key].midiNameRegex) !== null) {\r\n          var config = deviceConfigs[key]\r\n          console.log(`${mode ? \"Output\" : \"input\"} config has been auto assigned to ${key}`)\r\n          switch(mode)\r\n          {\r\n            case 0:\r\n              this.setState({inputConfigName: key});\r\n              this.setState({inputConfig: config});\r\n              return;\r\n            case 1:\r\n              this.setState({outputConfigName: key});\r\n              this.setState({outputConfig: config});\r\n              return;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    alert(`Unable to find matching ${mode ? \"output\" : \"input\"} config for device ${deviceName}`);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"main\"> \r\n          <div className=\"toolbar\"> {/* Not yet made */}\r\n          <text>203 | Prismatic (Tech Preview Demo)</text>\r\n          <div  className=\"toolbarItem\"/>\r\n          <text className=\"toolbarItem\">{this.state.projectFile !== undefined ? `Current Project: ${this.state.projectFile.info[\"title\"]} by ${this.state.projectFile.info[\"producerName\"]}` : \"No project loaded\"}</text>\r\n          <ProjectFileReader loadProjectFile={this.loadProjectFile}></ProjectFileReader>\r\n          <div  className=\"toolbarItem\"/>\r\n          <text>UI Layout</text>\r\n          <Select\r\n            className=\"toolbarItem\"\r\n            options={this.prepDeviceConfig(\"layout\")}\r\n            autosize={true}\r\n            value={this.state.layoutConfigName !== undefined ? {label: this.state.layoutConfigName, value: this.state.layoutConfig} : undefined}\r\n            placeholder=\"Layout Config\"\r\n            onChange={this.setLayoutConfig.bind(this)}\r\n          />\r\n          <text>Midi Input Device</text>\r\n          <Select\r\n            className=\"toolbarItem\"\r\n            options={this.state.midiInput}\r\n            autosize={true}\r\n            value={this.state.inputDevice !== undefined ? {label: this.state.inputDevice.name, value: this.state.inputDevice} : undefined}\r\n            placeholder=\"Input Device\"\r\n            onChange={this.setInputDevice.bind(this)}\r\n          />\r\n          <text>Midi Input Device Config</text>\r\n          <Select\r\n            className=\"toolbarItem\"\r\n            options={this.prepDeviceConfig(\"control\")}\r\n            autosize={true}\r\n            value={this.state.inputConfigName !== undefined ? {label: this.state.inputConfigName, value: this.state.inputConfig} : undefined}\r\n            placeholder=\"Input Device Config\"\r\n            onChange={this.setInputConfig.bind(this)}\r\n          />\r\n          <text>Midi Output Device</text>\r\n          <Select\r\n            className=\"toolbarItem\"\r\n            options={this.state.midiOutput}\r\n            autosize={true}\r\n            value={this.state.outputDevice !== undefined ? {label: this.state.outputDevice.name, value: this.state.outputDevice} : undefined}\r\n            placeholder=\"Output Device\"\r\n            onChange={this.setOutputDevice.bind(this)}\r\n          />\r\n          <text>Midi Output Device Config</text>\r\n          <Select\r\n            className=\"toolbarItem\"\r\n            options={this.prepDeviceConfig(\"control\")}\r\n            autosize={true}\r\n            value={this.state.outputConfigName !== undefined ? {label: this.state.outputConfigName, value: this.state.outputConfig} : undefined}\r\n            placeholder=\"Output Device Config\"\r\n            onChange={this.setOutputConfig.bind(this)}\r\n          />\r\n          <div/>\r\n          <text>{\"Autoplay\" + (this.state.autoplayProgress === undefined ? \"\" : this.state.autoplayProgress)}</text>\r\n          <div/>\r\n          <button style={{width: \"50px\", marginRight: \"10px\", display: !(this.state.projectFile !== undefined && this.state.projectFile.autoplay.status === \"PLAYING\") ?  \"inline\" : \"none\"}} onClick={this.playAutoplay}>Play</button>\r\n          <button style={{width: \"50px\", marginRight: \"10px\", display: this.state.projectFile !== undefined && this.state.projectFile.autoplay.status === \"PAUSED\" ?  \"inline\" : \"none\"}} onClick={this.stopAutoplay}>Stop</button>\r\n          <button style={{width: \"50px\", marginRight: \"10px\", display: this.state.projectFile !== undefined && this.state.projectFile.autoplay.status === \"PLAYING\" ?  \"inline\" : \"none\"}} onClick={this.pauseAutoplay}>Pause</button>\r\n          </div>\r\n          <div\r\n            className=\"canvas\"\r\n            style={{\r\n              padding: this.state.layoutConfig.padding,\r\n              borderRadius: this.state.layoutConfig.radius,\r\n            }}\r\n          >\r\n            <Canvas\r\n              ref={this.canvas}\r\n              projectFile={this.state.projectFile}\r\n              layoutConfig={this.state.layoutConfig}\r\n              inputDevice={this.state.inputDevice}\r\n              inputConfig={this.state.inputConfig}\r\n              outputDevice={this.state.outputDevice}\r\n              outputConfig={this.state.outputConfig}\r\n            />\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  setLayoutConfig(config)\r\n  {\r\n    // console.log(config)\r\n    this.setState({layoutConfigName: config.label});\r\n    this.setState({layoutConfig: config.value});\r\n  }\r\n\r\n  setInputConfig(config)\r\n  {\r\n    // console.log(config)\r\n    this.setState({inputConfigName: config.label});\r\n    this.setState({inputConfig: config.value});\r\n  }\r\n\r\n  setOutputConfig(config)\r\n  {\r\n    // console.log(config)\r\n    this.setState({outputConfigName: config.label});\r\n    this.setState({outputConfig: config.value});\r\n  }\r\n\r\n  setInputDevice(device)\r\n  {\r\n    this.setState({inputDevice: device.value});\r\n    this.autoConfigPicker(device.value.name, 0);\r\n  }\r\n\r\n  setOutputDevice(device)\r\n  {\r\n    // console.log(\"Output device set to \" + device.name);\r\n    this.setState({outputDevice: device.value});\r\n    this.autoConfigPicker(device.value.name, 1);\r\n  }\r\n\r\n  prepDeviceConfig(mode)\r\n  { \r\n    var result=[];\r\n    for (var key in deviceConfigs)\r\n    {\r\n      if(mode === \"layout\" && deviceConfigs[key].layout !== undefined)\r\n      {\r\n        result.push({\r\n          label: key,\r\n          value: deviceConfigs[key],\r\n        })\r\n      }\r\n      else if(mode === \"control\" && deviceConfigs[key].keymap !== undefined)\r\n      {\r\n        result.push({\r\n          label: key,\r\n          value: deviceConfigs[key],\r\n        })\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  playAutoplay = () =>\r\n  {\r\n    if(this.state.projectFile !== undefined && this.state.projectFile.autoplay !== undefined)\r\n    {\r\n      this.state.projectFile.autoplay.play(this.canvas.current, this.state.layoutConfig.canvas_origin, \r\n        function([current, total]){\r\n          this.setState({autoplayProgress: ` - ${(current / total * 100).toFixed(2)}% completed (${current}/${total})`});\r\n        }.bind(this));\r\n    }\r\n    else\r\n    {\r\n      alert(\"No project loaded!\")\r\n    }\r\n  }\r\n\r\n  stopAutoplay = () =>\r\n  {\r\n    if(this.state.projectFile !== undefined && this.state.projectFile.autoplay !== undefined)\r\n    {\r\n      this.state.projectFile.autoplay.stop();\r\n      this.setState({autoplayProgress: undefined});\r\n    }\r\n    else\r\n    {\r\n      alert(\"No project loaded!\")\r\n    }\r\n  }\r\n\r\n  pauseAutoplay = () =>\r\n  {\r\n    if(this.state.projectFile !== undefined && this.state.projectFile.autoplay !== undefined)\r\n    {\r\n      this.state.projectFile.autoplay.pause();\r\n      this.setState({autoplayProgress: this.state.autoplayProgress + \" - Paused\"});\r\n    }\r\n    else\r\n    {\r\n      alert(\"No project loaded!\")\r\n    }\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './styles/index.css';\r\nimport './styles/main.css'\r\nimport App from './Components/App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\n  ReactDOM.render(<App/>, document.getElementById(\"root\"))\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}