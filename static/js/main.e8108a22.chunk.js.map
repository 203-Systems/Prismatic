{"version":3,"sources":["Components/ProjectFileReader.jsx","Engine/keyLED.js","Engine/autoPlay.js","Engine/keySound.js","Engine/projectFile.js","Components/Button.jsx","palette.js","buttonConfigs.js","Components/Canvas.jsx","config.js","deviceConfigs.js","Components/AutoplayControl.jsx","Components/App.jsx","serviceWorker.js","index.js"],"names":["ProjectFileReader","onFileChange","event","props","loadProjectFile","target","files","Fragment","type","id","name","accept","onChange","this","Component","KeyLED","text","repeat","canvas","activeList","keyLED","undefined","id_str","end","activeThread","nextID","currentOn","lastEventTime","play","a","threadID","getID","currentLoop","Date","now","line","trim","command","split","parseInt","x","y","NaN","color","length","setColor","wait","stop","removeFromActiveList","ms","adjusted_ms","Promise","resolve","setTimeout","clearLight","AutoPlay","autoplay","status","progress","total","currentChain","led","highlight","highlightColor","callback","initlalizeCanvas","syncChain","console","log","chainChange","keyOn","setHighlight","keyOff","index","keySound","file","howl","format","loopTarget","loopCounter","window","URL","createObjectURL","File","toLowerCase","pop","Howl","src","html5","Howler","usingWebAudio","onend","onEnd","bind","onloaderror","message","error","onplayerror","loop","_loop","i","ProjectFile","info","soundFiles","activeKeyLED","current","unpack","projectFile","reject","JSZip","require","loadAsync","then","zip","Object","values","e","projectRoot","keySoundFile","autoplayFile","keyLEDFiles","filename","endsWith","includes","async","blob","slice","forEach","Array","chain","fill","map","buttonX","buttonY","entries","fileInfo","charCodeAt","warn","push","clearCanvas","stopKeyLED","stopKeySound","Button","state","keyState","on","off","shouldUpdate","nextProps","render","style","position","display","isTouchDevice","className","class","backgroundColor","borderColor","borderWidth","onTouchStart","onTouchEnd","onTouchCancel","onMouseDown","onMouseUp","onMouseLeave","overlayClass","navigator","maxTouchPoints","msMaxTouchPoints","palette","rawPalette","buttonConfigs","Canvas","colormap","layoutConfig","width","height","highlightmap","keypressHistory","currentKeyPress","midiInputHandler","midiEvent","data","note","velocity","inputConfig","noteToXY","xy","indexOf2dArray","keymap","config","reverseOffset","sound","currentKeyPressIndex","indexOf","soundLoop","canvas_x","canvas_y","arrayCalculation","canvas_origin","toString","ledIndex","soundIndex","checkChain","chainKey","Math","min","splice","endLoop","targetChain","clearKeypressHistory","setColorCanvas","setColorOutput","setHighlightCanvas","array1","array2","operation","newArray","setInterval","setState","inputDevice","setupMidiInput","newInput","oldInput","removeListener","addListener","lKey","mcTable","getCanvasPosition","test","output_x","output_y","outputConfig","outputDevice","getDevicePosition","sendSysex","hexSysexGen","sendMidi","channel","mode","value","modeKey","charAt","substr","send","matrix","len","len2","padding","borderRadius","radius","layout","keys","defaultLayout","deviceConfigs","midiNameRegex","initializationSysex","floor","arguments","hex","r","g","b","mc","AutoplayControl","playAutoplay","project","alert","stopAutoplay","pauseAutoplay","pause","stopAll","forceUpdate","playButton","marginRight","onClick","pauseButton","stopButton","buttons","statusText","toFixed","checked","App","statusMessage","midiInput","midiOutput","layoutConfigName","inputConfigName","outputConfigName","React","createRef","downloadProjectFile","url","fetch","projectPack","catch","loadUserConfigPerfences","initlization","WebMidi","enable","err","onMIDIFailure","onMIDISuccess","urlParams","URLSearchParams","location","search","get","unipack_url","updateMidiList","onMidiStateChange","loadUserDevicePerfences","port","inputDeviceConfig","inputDeviceName","outputDeviceConfig","outputDeviceName","inputs","input","outputs","output","deviceName","key","match","setInputConfig","label","setOutputConfig","options","prepSelectConfig","autosize","setLayoutConfig","setInputDevice","setOutputDevice","ref","localStorage","setItem","initlizateInputDevice","initlizateOutputDevice","device","autoPickConfig","autoConfigPicker","inputInfoMessage","infoMessage","outputInfoMessage","requiredKey","result","perferedLayoutConfig","getItem","perferedInputConfig","perferedOutputConfig","perferedInputDevice","perferedOutputDevice","Boolean","hostname","ReactDOM","document","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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ACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAGWC,EAAa,CAExB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WC1LaC,EA3EO,CACpB,SACA,CACEhB,MAAO,mBAET,eACA,CACEA,MAAO,kBACPU,aAAc,0BAEhB,SACA,CACEV,MAAO,oBACPU,aAAc,4BAEhB,SACA,CACEV,MAAO,oBACPU,aAAc,4BAEhB,SA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","file":"static/js/main.e8108a22.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nclass ProjectFileReader extends Component {\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <input type=\"file\" id=\"projectFilePicker\" name=\"projectFile\" accept=\".zip\" onChange={this.onFileChange}/>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  onFileChange = event => { \r\n    this.props.loadProjectFile(event.target.files[0]);\r\n  };\r\n}\r\n\r\nexport default ProjectFileReader;","class KeyLED\r\n{\r\n  keyLED = undefined\r\n  id = undefined\r\n  id_str = undefined\r\n  repeat = 1;\r\n  end = false;\r\n  activeThread = -1\r\n  nextID = 0\r\n  canvas = undefined\r\n  currentOn=[]\r\n  lastEventTime = undefined;\r\n  activeList = undefined //Global, refence to the activeKeyLED object in the projectFile\r\n\r\n  constructor(text, repeat, canvas, id, activeList)\r\n  {\r\n    this.keyLED = text;\r\n    this.repeat = repeat;\r\n    this.canvas = canvas;\r\n    this.id = id;\r\n    this.id_str = `${id[0]} ${id[1]} ${id[2]} ${id[3]}` \r\n    this.activeList = activeList\r\n  }\r\n\r\n  play = async() =>\r\n  {\r\n    if(this.activeList[this.id_str] === undefined)\r\n    {\r\n      this.activeList[this.id_str] = this.id\r\n      // console.log(\"Active List added\")\r\n      // console.log(this.activeList)\r\n    }\r\n    var threadID = this.getID()\r\n    this.activeThread = threadID\r\n    this.currentOn = []\r\n    var currentLoop = 0\r\n    this.end = false;\r\n    this.lastEventTime = Date.now()\r\n    // console.log(\"KeyLED\")\r\n    // console.timeLog(\"KeyOn\")\r\n    while(this.repeat === 0 || currentLoop++ < this.repeat)\r\n    {\r\n      for(var line of this.keyLED)\r\n      {\r\n        line = line.trim()\r\n        if(this.activeThread != threadID)\r\n          return\r\n\r\n        if(line == \"\")\r\n          continue;\r\n        \r\n        let command = line.split(\" \");\r\n        // console.log(line)\r\n\r\n        switch(command[0])\r\n        {\r\n          case 'o': //set color\r\n          case 'on': //set color\r\n              if(command[1] === \"*\")\r\n              {\r\n                command[1] = \"mc\"\r\n              }\r\n              if(command[1] === \"mc\" || command[1] === \"l\") //For \"l\", the y is garbage but it won't be read for the setColor functions so just gonna let it be\r\n              {\r\n                [x, y] = [command[1], parseInt(command[2] - 1)]\r\n              }\r\n              else if(parseInt(command[1]) !== NaN)\r\n              {\r\n                [x, y] = [parseInt(command[2] - 1), parseInt(command[1] - 1)]\r\n              }\r\n\r\n              var color\r\n              if(command[command.length - 2] === \"a\" || command[command.length - 2] === \"auto\")\r\n              {\r\n                color = parseInt(command[command.length - 1])\r\n              }\r\n              else\r\n              {\r\n                color = \"#\" + command[command.length - 1]\r\n              }\r\n\r\n              this.canvas.setColor(x, y, color)\r\n\r\n              var id = x + \"-\" + y\r\n              if(this.currentOn[id] === undefined) \r\n              {\r\n                this.currentOn[id] = [x, y]\r\n              }\r\n              else if(color === 0)\r\n              {\r\n                delete this.currentOn[id]\r\n              }\r\n              break;\r\n          case 'f': //color off\r\n          case 'off': //color off\r\n            var [x, y] = [undefined, undefined]\r\n            if(command[1] === \"*\")\r\n            {\r\n              command[1] = \"mc\"\r\n            }\r\n            if(command[1] === \"mc\" || command[1] === \"l\")\r\n            {\r\n              [x, y] = [command[1], parseInt(command[2] - 1)]\r\n            }\r\n            else if(parseInt(command[1]) !== NaN)\r\n            {\r\n              [x, y] = [parseInt(command[2] - 1), parseInt(command[1] - 1)]\r\n            }\r\n\r\n            this.canvas.setColor(x, y, 0)\r\n            var id = x + \"-\" + y\r\n            delete this.currentOn[id]\r\n            break;\r\n          case 'd': //wait\r\n          case 'delay': \r\n          await this.wait(parseInt(command[1]));\r\n            break;\r\n          default:\r\n        }\r\n      }\r\n      if(this.end)\r\n      {\r\n        this.stop()\r\n        break;\r\n      }\r\n    }\r\n    if(this.activeThread == threadID) //Added due to current thread on the last wait then the next thread started. This will result in the next thread to be stuck\r\n    {\r\n      this.activeThread = -1\r\n      this.removeFromActiveList()\r\n    }\r\n  }\r\n\r\n  wait(ms)\r\n  {\r\n    var adjusted_ms = this.lastEventTime + ms - Date.now()\r\n    this.lastEventTime += ms\r\n    if(adjusted_ms > 5)\r\n    {\r\n      return new Promise(resolve => setTimeout(resolve, adjusted_ms))\r\n    }\r\n    else\r\n    {\r\n      return \r\n    }\r\n  }\r\n\r\n  getID()\r\n  {\r\n    return this.nextID++;\r\n  }\r\n\r\n  stop(clearLight = true)\r\n  { \r\n    //Threading System (Light 1 in delay then we set it to stop and create a Light 2 so it can start right away, set )\r\n    if(this.activeThread === -1)\r\n      return\r\n    this.activeThread = -1\r\n    if(clearLight)\r\n    {\r\n      for(var id in this.currentOn)\r\n      {\r\n        var [x,y] = this.currentOn[id]\r\n        this.canvas.setColor(x, y, 0)\r\n      }\r\n    }\r\n    this.currentOn = []\r\n    this.removeFromActiveList()\r\n  }\r\n\r\n  endLoop()\r\n  {\r\n    this.end = true\r\n  }\r\n\r\n  removeFromActiveList()\r\n  {\r\n    // console.log(\"Try to delete \" + this.id_str)\r\n    // console.log(this.activeList)\r\n    delete this.activeList[this.id_str]\r\n    // console.log(this.activeList)\r\n  }\r\n}\r\n\r\nexport default KeyLED;","class AutoPlay {\r\n  autoplay = undefined;\r\n  status = \"STOPPED\"\r\n  progress = 0\r\n  total = 0\r\n  currentChain = 0\r\n  canvas = undefined;\r\n  lastEventTime = undefined;\r\n\r\n  led = true;\r\n  highlight = false;\r\n  highlightColor = \"#00FFFF\"\r\n\r\n  constructor(text, canvas) {\r\n    this.autoplay = text;\r\n    this.total = text === undefined ? 0 : text.length;\r\n    this.canvas = canvas;\r\n  }\r\n\r\n  play = async (callback) => {\r\n    // console.time(\"Autoplay\")\r\n    if (this.progress === 0) {\r\n      this.canvas.initlalizeCanvas();\r\n      this.canvas.autoplay = this;\r\n    }\r\n    else\r\n    {\r\n      this.syncChain();\r\n    }\r\n    this.status = \"PLAYING\"\r\n    this.lastEventTime = Date.now()\r\n    for (this.progress; this.progress < this.autoplay.length; this.progress++) {\r\n      // console.timeEnd(\"Autoplay\");\r\n      // console.time(\"Autoplay\")\r\n\r\n      if (this.status === \"STOPPED\" || this.status === \"PAUSED\") {\r\n        return;\r\n      }\r\n\r\n      console.log(this.autoplay[this.progress])\r\n      let command = this.autoplay[this.progress].split(\" \");\r\n\r\n      if(callback !== undefined)\r\n        callback([this.progress, this.autoplay.length])\r\n\r\n      if (command.length < 2)\r\n        continue;\r\n\r\n      if (this.canvas.currentChain != this.currentChain) {\r\n        this.canvas.chainChange(this.currentChain);\r\n      }\r\n\r\n      switch (command[0]) {\r\n        case 'o':\r\n        case 'on':\r\n          this.canvas.keyOn(parseInt(command[2]) - 1, parseInt(command[1]) - 1, undefined, true, true, this.led);\r\n          if(this.highlight)\r\n          {\r\n            this.canvas.setHighlight(parseInt(command[2]) - 1, parseInt(command[1]) - 1, this.highlightColor)\r\n          }\r\n          break;\r\n        case 'f':\r\n        case 'off':\r\n          this.canvas.keyOff(parseInt(command[2]) - 1, parseInt(command[1]) - 1, undefined, true);\r\n          if(this.highlight)\r\n          {\r\n            this.canvas.setHighlight(parseInt(command[2]) - 1, parseInt(command[1]) - 1)\r\n          }\r\n          break;\r\n        case 't':\r\n        case 'touch':\r\n              this.canvas.keyOn(parseInt(command[2]) - 1, parseInt(command[1]) - 1, undefined, true, true, this.led);\r\n              this.canvas.keyOff(parseInt(command[2]) - 1, parseInt(command[1]) - 1, undefined, true);\r\n            if(this.highlight)\r\n            {\r\n              this.canvas.setHighlight(parseInt(command[2]) - 1, parseInt(command[1]) - 1, this.highlightColor)\r\n              setTimeout(() => {this.canvas.setHighlight(parseInt(command[2]) - 1, parseInt(command[1]) - 1)}, 200)\r\n            }\r\n            break;\r\n        case 'd':\r\n        case 'delay':\r\n          var ms = parseInt(command[1])\r\n          if(ms < 10)\r\n            break;\r\n          await this.wait(parseInt(command[1]));\r\n          break;\r\n        case 'c':\r\n        case 'chain':\r\n          this.canvas.chainChange(parseInt(command[1]) - 1);\r\n          this.currentChain = parseInt(command[1]) - 1;\r\n          if(this.highlight)\r\n            {\r\n              this.canvas.setHighlight(\"chain\", parseInt(command[1]) - 1, this.highlightColor)\r\n              setTimeout(() => {this.canvas.setHighlight(\"chain\", parseInt(command[1]) - 1)}, 200)\r\n            }\r\n          break;\r\n        default:\r\n      }\r\n    }\r\n    this.stop();\r\n  }\r\n\r\n  pause() {\r\n    this.status = \"PAUSED\"\r\n  }\r\n\r\n  stop() {\r\n    this.status = \"STOPPED\"\r\n    this.progress = 0\r\n    this.canvas.autoplay = null;\r\n  }\r\n\r\n  backward()\r\n  {\r\n    if(this.status == \"PAUSED\")\r\n    {\r\n      \r\n    }\r\n  }\r\n\r\n  forward()\r\n  {\r\n    if(this.status == \"PAUSED\")\r\n    {\r\n\r\n    }\r\n  }\r\n\r\n  seek(index)\r\n  {\r\n\r\n  }\r\n\r\n  syncChain()\r\n  {\r\n    for(var progress = this.progress; progress >= 0; progress--)\r\n    {\r\n      let command = this.autoplay[this.progress].split(\" \");\r\n      if(command == \"c\" || command == \"chain\")\r\n      {\r\n        this.canvas.chainChange(parseInt(command[1]) - 1);\r\n        this.currentChain = parseInt(command[1]) - 1;\r\n        return;\r\n      }\r\n    }\r\n    this.canvas.chainChange(0);\r\n    this.currentChain = 0;\r\n  }\r\n\r\n  wait(ms) {\r\n    var adjusted_ms = this.lastEventTime + ms - Date.now()\r\n    this.lastEventTime += ms\r\n    if(adjusted_ms > 5)\r\n    {\r\n      return new Promise(resolve => setTimeout(resolve, adjusted_ms))\r\n    }\r\n    else\r\n    {\r\n      return \r\n    }\r\n  }\r\n}\r\n\r\nexport default AutoPlay;","// import {Howler, Howl} from \"../../howler/howler.core\";\r\nimport {Howler, Howl} from \"howler\";\r\nclass keySound {\r\n  file = undefined;\r\n  howl = undefined;\r\n  format = undefined\r\n  loopTarget = {};\r\n  loopCounter = {};\r\n\r\n  constructor(file, name) {\r\n    // console.log(Howler.usingWebAudio)\r\n    // console.log(file)\r\n    this.file = window.URL.createObjectURL(new File([file], name))\r\n    this.format = name.toLowerCase().split(\".\").pop()\r\n    // console.log(this.format)\r\n    // console.log(Howler.codecs(this.format))\r\n    this.howl = new Howl({\r\n      src: [this.file],\r\n      format: [this.format],\r\n      html5: !Howler.usingWebAudio,\r\n      onend: this.onEnd.bind(this),\r\n      onloaderror:function (id, message) {\r\n        console.error(`Howler Load Error ${id} ${message}`)\r\n      },\r\n      onplayerror:function (id, message) {\r\n        console.error(`Howler Play Error ${id} ${message}`)\r\n      }\r\n    });\r\n  }\r\n\r\n  play(loop = 1) {\r\n    if(loop !== 1)\r\n    {\r\n      this.howl._loop = true;\r\n    }\r\n\r\n    var id = this.howl.play()\r\n    // console.log(\"KeySound\")\r\n    // console.timeLog(\"KeyOn\")\r\n\r\n    this.loopCounter[id] = 0\r\n    this.loopTarget[id] = loop;\r\n  }\r\n\r\n  stop() {\r\n    if(this.howl !== undefined)\r\n    {\r\n      this.howl.stop()\r\n    }\r\n  }\r\n\r\n  onEnd(id) {\r\n    // console.log(`ID ${id} Loop #${this.loopCounter[id]} ended`)\r\n    if (this.loopTarget[id] !== 0 && ++this.loopCounter[id] >= this.loopTarget[id]) { // So if loopTarget is 0 then it will keep going\r\n      this.howl._loop = false\r\n      this.howl.stop(id)\r\n    }\r\n  }\r\n\r\n  endLoop()\r\n  {\r\n    this.howl._loop = false;\r\n    for(var i in this.loopTarget)\r\n    {\r\n      this.loopTarget[i] = 1\r\n    }\r\n  }\r\n}\r\n\r\nexport default keySound;","import KeyLED from \"./keyLED\"\r\nimport AutoPlay from \"./autoPlay\"\r\nimport keySound from './keySound';\r\nimport { Howler } from \"howler\";\r\n\r\nclass ProjectFile {\r\n  info = {};\r\n  soundFiles = {};\r\n  keySound = undefined;\r\n  autoplay = undefined;\r\n  keyLED = undefined;\r\n  canvas = undefined\r\n  activeKeyLED = {}\r\n\r\n  constructor(file, canvas) {\r\n    this.canvas = canvas.current;\r\n    return this.unpack(file);\r\n  }\r\n\r\n  unpack(projectFile) {\r\n    return new Promise(async (resolve, reject) => {\r\n      try{\r\n      console.log(this.info)\r\n      let JSZip = require(\"jszip\");\r\n      let files = await JSZip.loadAsync(projectFile).then(function (zip) {\r\n        return Object.values(zip.files)\r\n      }, function (e) {\r\n        reject(\"Failed to extract selected file\");\r\n        console.log(e);\r\n        return;\r\n      });\r\n      let projectRoot = undefined;\r\n      let keySoundFile = undefined;\r\n      let autoplayFile = undefined;\r\n      let keyLEDFiles = {};\r\n\r\n      //Load info and categorize files\r\n      for (let file of files) {\r\n        let filename = file.name.toLowerCase()\r\n        if (!filename.endsWith(\"/\")) //Ignore folder\r\n        {\r\n          if (filename.includes(\"sounds/\")) //Audio\r\n          {\r\n            console.log(\"Sound file: \" + filename);\r\n            this.soundFiles[filename.split(\"/\").pop()] = await file.async(\"blob\").then(function (blob) {\r\n              return new keySound(blob, filename.split(\"/\").pop())\r\n            });\r\n          }\r\n          else {\r\n            let text = await file.async(\"text\").then((text) => { return text = text.split(/\\r?\\n/); });\r\n            if (filename.endsWith(\"info\")) //Text\r\n            {\r\n              console.log(\"Info file: \" + filename);\r\n              projectRoot = filename.slice(0, -4);\r\n              console.log(\" project root: \" + projectRoot);\r\n              text.forEach(info => this.info[info.split('=')[0]] = info.split('=')[1]);\r\n              this.info[\"buttonX\"] = parseInt(this.info[\"buttonX\"]);\r\n              this.info[\"buttonY\"] = parseInt(this.info[\"buttonY\"]);\r\n              this.info[\"chain\"] = parseInt(this.info[\"chain\"]);\r\n              this.info[\"squareButton\"] = this.info[\"squareButton\"] === \"true\";\r\n              this.info[\"landscape\"] = this.info[\"landscape\"] === \"true\";\r\n              console.log(\" title: \" + this.info[\"title\"])\r\n              console.log(\" producerName: \" + this.info[\"producerName\"])\r\n              console.log(\" buttonX: \" + this.info[\"buttonX\"])\r\n              console.log(\" buttonY: \" + this.info[\"buttonY\"])\r\n              console.log(\" chain: \" + this.info[\"chain\"])\r\n              console.log(\" squareButton: \" + this.info[\"squareButton\"])\r\n              console.log(\" landscape: \" + this.info[\"landscape\"])\r\n              if (this.info[\"buttonX\"] !== 8 || this.info[\"buttonY\"] !== 8) {\r\n                reject(\"Only 8x8 Unipad project are supported\");\r\n                return;\r\n              }\r\n              if (this.info[\"chain\"] > 8) {\r\n                // reject(\"Only Unipad project that has within 8 chains are supported\");\r\n                // alert(`This Unipad Project has ${this.info[\"chain\"]} chains. Projects that has more than 8 chains are limited supported`)\r\n                // return;\r\n              }\r\n            }\r\n            else if (filename.endsWith(\"keysound\")) {\r\n              console.log(\"KeySound file: \" + filename);\r\n              keySoundFile = text;\r\n            }\r\n            else if (filename.endsWith(\"autoplay\")) {\r\n              console.log(\"AutoPlay file: \" + filename);\r\n              autoplayFile = text;\r\n            }\r\n            else if (filename.includes(\"keyled/\")) {\r\n              console.log(\"KeyLED file: \" + filename);\r\n              keyLEDFiles[filename] = text;\r\n            }\r\n            else {\r\n              console.log(\"Unknown file: \" + filename);\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      //Initialize 4D arraies\r\n      this.keySound = new Array(this.info.chain).fill(null).map(\r\n        () => new Array(this.info.buttonX).fill(null).map(\r\n          () => new Array(this.info.buttonY).fill(null).map(\r\n            () => new Array())));\r\n\r\n      this.keyLED = new Array(this.info.chain).fill(null).map(\r\n        () => new Array(this.info.buttonX).fill(null).map(\r\n          () => new Array(this.info.buttonY).fill(null).map(\r\n            () => new Array())));\r\n\r\n      // Load KeyLED\r\n      for (var [name, text] of Object.entries(keyLEDFiles)) {\r\n        let fileInfo = name.split(\"/\").pop().split(\" \");\r\n        try\r\n        {\r\n        // if (fileInfo.length === 5) {\r\n        //   this.keyLED[parseInt(fileInfo[0]) - 1][parseInt(fileInfo[2]) - 1][parseInt(fileInfo[1]) - 1][fileInfo[4].charCodeAt(0) - 97] = new KeyLED(text, parseInt(fileInfo[3]), this.canvas)\r\n        //   // console.log(name)\r\n        //   // console.log([parseInt(fileInfo[0]) - 1, parseInt(fileInfo[2]) - 1, parseInt(fileInfo[1]) - 1, fileInfo[4].charCodeAt(0) - 97])\r\n        //   // console.log(this.keyLED[parseInt(fileInfo[0]) - 1][parseInt(fileInfo[2]) - 1][parseInt(fileInfo[1]) - 1][fileInfo[4].charCodeAt(0) - 97])\r\n        // }\r\n        // else if (fileInfo.length === 4) {\r\n          let index = fileInfo[4] !== undefined ? fileInfo[4].charCodeAt(0) - 97 : 0 //97 is 'a' \r\n          // console.log([parseInt(fileInfo[0]) - 1, parseInt(fileInfo[2]) - 1, parseInt(fileInfo[1]) - 1, index])\r\n          let [chain, x, y, repeat] = [parseInt(fileInfo[0]) - 1, parseInt(fileInfo[2]) - 1, parseInt(fileInfo[1]) - 1, parseInt(fileInfo[3])]\r\n          this.keyLED[chain][x][y][index] = new KeyLED(text, repeat, this.canvas, [chain, x, y, index], this.activeKeyLED)\r\n        // }\r\n        // else {\r\n        //   console.warn(\"Unknown keyLED file name: \" + name);\r\n        // }\r\n        }\r\n        catch\r\n        {\r\n          console.warn(\"Unable to parse file name - \" + name.split(\"/\").pop())\r\n        }\r\n      }\r\n\r\n      //Load KeySound\r\n      for (var line of keySoundFile) {\r\n        line = line.trim()\r\n        try\r\n        {\r\n          if (line == \"\") //For empty lines\r\n          continue;\r\n\r\n          let command = line.split(\" \");\r\n\r\n          // console.log(command);\r\n          let [chain, x, y, filename] = [parseInt(command[0]) - 1, parseInt(command[2]) - 1, parseInt(command[1]) - 1, command[3].toLowerCase()]\r\n          console.log([chain, x, y, filename])\r\n          this.keySound[chain][x][y].push([this.soundFiles[filename], command.slice(4)]);\r\n        }\r\n        catch\r\n        {\r\n          console.warn(\"Unable to parse line - \" + line)\r\n        }\r\n      }\r\n\r\n      //Load AutoPlay\r\n      if(autoplayFile !== undefined)\r\n        this.autoplay = new AutoPlay(autoplayFile, this.canvas);\r\n\r\n      resolve(this)\r\n    }\r\n    catch(e)\r\n    {\r\n      reject(e)\r\n    }\r\n    });\r\n  }\r\n\r\n  stopKeySound() {\r\n    Howler.stop()\r\n  }\r\n\r\n  stopKeyLED() {\r\n    // console.log(this.activeKeyLED)\r\n    for(var id_str in this.activeKeyLED)\r\n    {\r\n      var[chain, x, y, index] = this.activeKeyLED[id_str]\r\n      this.keyLED[chain][x][y][index].stop(false)\r\n      delete this.activeKeyLED[id_str]\r\n    }\r\n    setTimeout(this.canvas.clearCanvas(), 200)\r\n    // new KeyLED().stopAll()\r\n    // for (var chain = 0; chain < this.info.chain; chain++) {\r\n    //   for (\r\n    //     var x = 0;\r\n    //     chain < this.keyLED[chain].length;\r\n    //     x++\r\n    //   ) {\r\n    //     for (\r\n    //       var y = 0;\r\n    //       chain < this.keyLED[chain][x].length;\r\n    //       y++\r\n    //     ) {\r\n    //       for (\r\n    //         var index = 0;\r\n    //         chain < this.keyLED[chain][x][y].length;\r\n    //         index++\r\n    //       ) {\r\n    //         if (\r\n    //           this.keyLED[chain][x][y][index] !== undefined\r\n    //         ) {\r\n    //           this.keyLED[chain][x][y][index].stop();\r\n    //         }\r\n    //       }\r\n    //     }\r\n    //   }\r\n    // }\r\n  }\r\n\r\n  stopAll() {\r\n    this.stopKeyLED()\r\n    this.stopKeySound()\r\n  }\r\n}\r\n\r\nexport default ProjectFile;","import React, { Component } from 'react'\r\n\r\nclass Button extends Component {\r\n    state = {\r\n        keyState: false,\r\n    }\r\n\r\n    // Turns stuff on\r\n    on = () => \r\n    {   \r\n        if (!this.keyState) {\r\n            this.keyState = true;\r\n            this.props.on(this.props.x, this.props.y)\r\n        }\r\n    }\r\n    \r\n    // Turns stuff off\r\n    off = () => {\r\n        if (this.keyState) {\r\n            this.keyState = false;\r\n            this.props.off(this.props.x, this.props.y)\r\n        }\r\n    }\r\n\r\n    // Updates\r\n    shouldUpdate = (nextProps) => this.props.color !== nextProps.color\r\n\r\n    render = () => (\r\n        <div style={{position: 'relative', display: 'grid'}}>\r\n        {(this.isTouchDevice()) ? \r\n        (<button className={this.props.class} style={{backgroundColor: this.props.color, borderColor: this.props.highlight ? this.props.highlight : \"#000000\", borderWidth: this.props.highlight ? 5 : 2}} onTouchStart={this.on} onTouchEnd={this.off} onTouchCancel={this.off}/>) : \r\n        (<button className={this.props.class} style={{backgroundColor: this.props.color, borderColor: this.props.highlight ? this.props.highlight : \"#000000\", borderWidth: this.props.highlight ? 5 : 2}} onMouseDown={this.on} onMouseUp={this.off} onMouseLeave={this.off}/>)}\r\n        <div className={this.props.overlayClass}/>\r\n        </div>\r\n    )\r\n\r\n    isTouchDevice() {\r\n        return (('ontouchstart' in window) ||\r\n        (navigator.maxTouchPoints > 0) ||\r\n        (navigator.msMaxTouchPoints > 0));\r\n    }\r\n}\r\n\r\nexport default Button;","export const palette = [\r\n  //New optimized palette\r\n  \"#808080\",\t//0\r\n  \"#dadfe4\",\t//1\r\n  \"#e6e9ed\",\t//2\r\n  \"#fafafa\",\t//3\r\n  \"#f8bbd0\",\t//4\r\n  \"#ef5350\",\t//5\r\n  \"#e57373\",\t//6\r\n  \"#ef9a9a\",\t//7\r\n  \"#fff3e0\",\t//8\r\n  \"#ffa726\",\t//9\r\n  \"#ffb960\",\t//10\r\n  \"#ffcc80\",\t//11\r\n  \"#ffe0b2\",\t//12\r\n  \"#ffee58\",\t//13\r\n  \"#fff59d\",\t//14\r\n  \"#fff9c4\",\t//15\r\n  \"#dcedc8\",\t//16\r\n  \"#8bc34a\",\t//17\r\n  \"#aed581\",\t//18\r\n  \"#bfdf9f\",\t//19\r\n  \"#5ee2b0\",\t//20\r\n  \"#00ce3c\",  //21\r\n  \"#00ba43\",  //22\r\n  \"#119c3f\",\t//23\r\n  \"#57ecc1\",\t//24\r\n  \"#00e864\",  //25\r\n  \"#00e05c\",  //26\r\n  \"#00d545\",  //27\r\n  \"#7afddd\",\t//28\r\n  \"#00e4c5\",  //29\r\n  \"#00e0b2\",  //30\r\n  \"#01eec6\",  //31\r\n  \"#49efef\",\t//32\r\n  \"#00e7d8\",  //33\r\n  \"#00e5d1\",  //34\r\n  \"#01efde\",  //35\r\n  \"#6addff\",\t//36\r\n  \"#00dafe\",  //37\r\n  \"#01d6ff\",  //38\r\n  \"#08acdc\",  //39\r\n  \"#73cefe\",\t//40\r\n  \"#0d9bf7\",  //41\r\n  \"#148de4\",\t//42\r\n  \"#2a77c9\",\t//43\r\n  \"#8693ff\",\t//44\r\n  \"#2196f3\",\t//45\r\n  \"#4668f6\",\t//46\r\n  \"#4153dc\",\t//47\r\n  \"#b095ff\",\t//48\r\n  \"#8453fd\",\t//49\r\n  \"#634acd\",\t//50\r\n  \"#5749c5\",\t//51\r\n  \"#ffb7ff\",\t//52\r\n  \"#e863fb\",\t//53\r\n  \"#d655ed\",\t//54\r\n  \"#d14fe9\",\t//55\r\n  \"#fc99e3\",\t//56\r\n  \"#e736c2\",\t//57\r\n  \"#e52fbe\",\t//58\r\n  \"#e334b6\",\t//59\r\n  \"#ed353e\",\t//60\r\n  \"#ffa726\",\t//61\r\n  \"#f4df0b\",  //62\r\n  \"#66bb6a\",\t//63\r\n  \"#5cd100\",  //64\r\n  \"#00d29e\",  //65\r\n  \"#2388ff\",\t//66\r\n  \"#3669fd\",\t//67\r\n  \"#00b4d0\",  //68\r\n  \"#475cdc\",\t//69\r\n  \"#f2f3f5\",\t//70\r\n  \"#eef0f2\",\t//71\r\n  \"#f72737\",\t//72\r\n  \"#d2ea7b\",\t//73\r\n  \"#c8df10\",\t//74\r\n  \"#7fe422\",\t//75\r\n  \"#00c931\",  //76\r\n  \"#00d7a6\",\t//77\r\n  \"#00d8fc\",  //78\r\n  \"#0b9bfc\",  //79\r\n  \"#585cf5\",\t//80\r\n  \"#ac59f0\",\t//81\r\n  \"#d980dc\",\t//82\r\n  \"#b8814a\",\t//83\r\n  \"#ff9800\",  //84\r\n  \"#abdf22\",\t//85\r\n  \"#9ee154\",\t//86\r\n  \"#66bb6a\",\t//87\r\n  \"#3bda47\",\t//88\r\n  \"#6fdeb9\",\t//89\r\n  \"#27dbda\",\t//90\r\n  \"#9cc8fd\",\t//91\r\n  \"#79b8f7\",\t//92\r\n  \"#afafef\",\t//93\r\n  \"#d580eb\",\t//94\r\n  \"#f74fca\",\t//95\r\n  \"#ea8a1f\",\t//96\r\n  \"#dbdb08\",  //97\r\n  \"#9cd60d\",  //98\r\n  \"#f3d335\",\t//99\r\n  \"#c8af41\",\t//100\r\n  \"#00ca69\",  //101\r\n  \"#24d2b0\",\t//102\r\n  \"#757ebe\",\t//103\r\n  \"#5388db\",\t//104\r\n  \"#e5c5a6\",\t//105\r\n  \"#e93b3b\",\t//106\r\n  \"#f9a2a1\",\t//107\r\n  \"#ed9c65\",\t//108\r\n  \"#e1ca72\",\t//109\r\n  \"#b8da78\",\t//110\r\n  \"#98d52c\",\t//111\r\n  \"#626cbd\",\t//112\r\n  \"#cac8a0\",\t//113\r\n  \"#90d4c2\",\t//114\r\n  \"#ceddfe\",\t//115\r\n  \"#beccf7\",\t//116\r\n  \"#d2d7de\",\t//117\r\n  \"#dadfe4\",\t//118\r\n  \"#e6e9ed\",\t//119\r\n  \"#fe1624\",\t//120\r\n  \"#cd2724\",\t//121\r\n  \"#9ccc65\",\t//122\r\n  \"#009c1b\",  //123\r\n  \"#ffff00\",  //124\r\n  \"#beb212\",\t//125\r\n  \"#f5d01d\",\t//126\r\n  \"#e37829\",\t//127\r\n];\r\n\r\nexport const rawPalette = [\r\n  //LaunchpadXcolorPalette\r\n  \"#000000\", //0\r\n  \"#3F3F3F\", //1\r\n  \"#7F7F7F\", //2\r\n  \"#FFFFFF\", //3\r\n  \"#FF3F3F\", //4\r\n  \"#FF0000\", //5\r\n  \"#7F0000\", //6\r\n  \"#3F0000\", //7\r\n  \"#FFBF6F\", //8\r\n  \"#FF3F00\", //9\r\n  \"#7F1F00\", //10\r\n  \"#3F0F00\", //11\r\n  \"#FFAF2F\", //12\r\n  \"#FFFF00\", //13\r\n  \"#7F7F00\", //14\r\n  \"#3F3F00\", //15\r\n  \"#7FFF2F\", //16\r\n  \"#4FFF00\", //17\r\n  \"#2F7F00\", //18\r\n  \"#173F00\", //19\r\n  \"#4FFF3F\", //20\r\n  \"#00FF00\", //21\r\n  \"#007F00\", //22\r\n  \"#003F00\", //23\r\n  \"#4FFF4F\", //24\r\n  \"#00FF1F\", //25\r\n  \"#007F0F\", //26\r\n  \"#003F07\", //27\r\n  \"#4FFF5F\", //28\r\n  \"#00FF5F\", //29\r\n  \"#007F2F\", //30\r\n  \"#003F17\", //31\r\n  \"#4FFFBF\", //32\r\n  \"#00FF9F\", //33\r\n  \"#007F4F\", //34\r\n  \"#003F27\", //35\r\n  \"#4FBFFF\", //36\r\n  \"#00AFFF\", //37\r\n  \"#00577F\", //38\r\n  \"#002F3F\", //39\r\n  \"#4F7FFF\", //40\r\n  \"#0057FF\", //41\r\n  \"#002F7F\", //42\r\n  \"#00173F\", //43\r\n  \"#2F1FFF\", //44\r\n  \"#0000FF\", //45\r\n  \"#00007F\", //46\r\n  \"#00003F\", //47\r\n  \"#5F3FFF\", //48\r\n  \"#2F00FF\", //49\r\n  \"#17007F\", //50\r\n  \"#0F003F\", //51\r\n  \"#FF3FFF\", //52\r\n  \"#FF00FF\", //53\r\n  \"#7F007F\", //54\r\n  \"#3F003F\", //55\r\n  \"#FF3F6F\", //56\r\n  \"#FF004F\", //57\r\n  \"#7F002F\", //58\r\n  \"#3F001F\", //59\r\n  \"#FF0F00\", //60\r\n  \"#9F3F00\", //61\r\n  \"#7F4F00\", //62\r\n  \"#2F2F00\", //63\r\n  \"#003F00\", //64\r\n  \"#003F1F\", //65\r\n  \"#001F6F\", //66\r\n  \"#0000FF\", //67\r\n  \"#003F3F\", //68\r\n  \"#1F00BF\", //69\r\n  \"#5F3F4F\", //70\r\n  \"#1F0F17\", //71\r\n  \"#FF0000\", //72\r\n  \"#BFFF2F\", //73\r\n  \"#AFEF00\", //74\r\n  \"#5FFF00\", //75\r\n  \"#0F7F00\", //76\r\n  \"#00FF5F\", //77\r\n  \"#009FFF\", //78\r\n  \"#002FFF\", //79\r\n  \"#1F00FF\", //80\r\n  \"#5F00EF\", //81\r\n  \"#AF1F7F\", //82\r\n  \"#2F0F00\", //83\r\n  \"#FF2F00\", //84\r\n  \"#7FDF00\", //85\r\n  \"#6FFF1F\", //86\r\n  \"#00FF00\", //87\r\n  \"#3FFF2F\", //88\r\n  \"#5FEF6F\", //89\r\n  \"#3FFFCF\", //90\r\n  \"#5F8FFF\", //91\r\n  \"#2F4FCF\", //92\r\n  \"#6F4FDF\", //93\r\n  \"#DF1FFF\", //94\r\n  \"#FF005F\", //95\r\n  \"#FF4F00\", //96\r\n  \"#BFAF00\", //97\r\n  \"#8FFF00\", //98\r\n  \"#7F5F00\", //99\r\n  \"#3F2F00\", //100\r\n  \"#00470F\", //101\r\n  \"#0F4F1F\", //102\r\n  \"#17172F\", //103\r\n  \"#171F5F\", //104\r\n  \"#5F3717\", //105\r\n  \"#7F0000\", //106\r\n  \"#DF3F2F\", //107\r\n  \"#DF470F\", //108\r\n  \"#FFBF1F\", //109\r\n  \"#9FDF2F\", //110\r\n  \"#6FAF0F\", //111\r\n  \"#17172F\", //112\r\n  \"#DFDF6F\", //113\r\n  \"#7FEF8F\", //114\r\n  \"#9F9FFF\", //115\r\n  \"#8F6FFF\", //116\r\n  \"#3F3F3F\", //117\r\n  \"#6F6F6F\", //118\r\n  \"#DFFFFF\", //119\r\n  \"#9F0000\", //120\r\n  \"#370000\", //121\r\n  \"#17CF00\", //122\r\n  \"#003F00\", //123\r\n  \"#BFAF00\", //124\r\n  \"#3F2F00\", //125\r\n  \"#AF4F00\", //126\r\n  \"#4F0F00\"  //127\r\n];\r\n\r\nexport default palette","const buttonConfigs = {\r\n  \"◻\":\r\n  {\r\n    class: \"LEDButtonSquare\",\r\n  },\r\n  \"◼️\":\r\n  {\r\n    class: \"LEDButtonSquare\",\r\n    overlayClass: \"LEDButtonSquareOverlay\"\r\n  },\r\n  \"◯\":\r\n  {\r\n    class: \"LEDButtonCircle75\",\r\n    overlayClass: \"LEDButtonCircle75Overlay\"\r\n  },\r\n  \"⬤\":\r\n  {\r\n    class: \"LEDButtonCircle75\",\r\n    overlayClass: \"LEDButtonCircle75Overlay\"\r\n  },\r\n  \"◸\":\r\n  {\r\n    class: \"LEDButtonSquare\",\r\n  },\r\n  \"◹\":\r\n  {\r\n    class: \"LEDButtonSquare\",\r\n  },\r\n  \"◺\":\r\n  {\r\n    class: \"LEDButtonSquare\",\r\n  },\r\n  \"⊿\":\r\n  {\r\n    class: \"LEDButtonSquare\",\r\n  },\r\n  \"◤\":\r\n  {\r\n    class: \"LEDButtonSquare\",\r\n    overlayClass: \"LEDButtonSquareOverlay\"\r\n  },\r\n  \"◥\":\r\n  {\r\n    class: \"LEDButtonSquare\",\r\n    overlayClass: \"LEDButtonSquareOverlay\"\r\n  },\r\n  \"◣\":\r\n  {\r\n    class: \"LEDButtonSquare\",\r\n    overlayClass: \"LEDButtonSquareOverlay\"\r\n  },\r\n  \"◢\":\r\n  {\r\n    class: \"LEDButtonSquare\",\r\n    overlayClass: \"LEDButtonSquareOverlay\"\r\n  },\r\n  //Launchpad Pro MK3\r\n  \"▬\":\r\n  {\r\n    class: \"LEDButtonRectangle\",\r\n    overlayClass: \"LEDButtonRectangleOverlay\"\r\n  },\r\n  //Midi Fighter 64\r\n  \"⦿\":\r\n  {\r\n    class: \"LEDButtonCircleLarge\",\r\n    overlayClass: \"LEDButtonCircleLargeOverlay\"\r\n  },\r\n  //Debug or Theme Base\r\n  \"⌗\":\r\n  {\r\n    class: \"LEDButtonFull\"\r\n  },\r\n}\r\n\r\nexport default buttonConfigs;","import React, { Component } from \"react\";\r\n// import ProjectFileReader from './Components/projectFileReader';\r\nimport Button from \"./Button\";\r\nimport { palette, rawPalette } from \"../palette\";\r\nimport buttonConfigs from \"../buttonConfigs.js\";\r\n\r\nclass Canvas extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    setInterval(() => {\r\n      this.setState({ colormap: this.state.colormap });\r\n    }, 1000 / 60);\r\n  }\r\n\r\n  state = {\r\n    colormap: new Array(this.props.layoutConfig.width).fill(null).map(() => new Array(this.props.layoutConfig.height).fill(palette[0])),\r\n    highlightmap: new Array(this.props.layoutConfig.width).fill(null).map(() => new Array(this.props.layoutConfig.height).fill(null)),\r\n  };\r\n\r\n  keypressHistory = new Array(this.props.layoutConfig.width).fill(null).map(() => new Array(this.props.layoutConfig.height).fill(0));\r\n  currentChain = 0;\r\n  currentKeyPress = [];\r\n  autoplay = null;\r\n\r\n  // shouldUpdate = (nextProps) => !Object.is(this.props.layoutConfig, nextProps.layoutConfig);\r\n\r\n  shouldComponentUpdate(nextProps) {\r\n    if (nextProps.projectFile !== this.props.projectFile) {\r\n      console.log(\"Project File Loaded\");\r\n      this.initlalizeCanvas();\r\n    }\r\n\r\n    if (nextProps.layoutConfig !== this.props.layoutConfig) {\r\n      this.initlalizeCanvas(nextProps.layoutConfig);\r\n    }\r\n\r\n    if (nextProps.inputDevice !== this.props.inputDevice /* || prevProps.inputConfig !== this.props.inputConfig */) {\r\n      this.setupMidiInput(nextProps.inputDevice, this.props.inputDevice);\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  initlalizeCanvas(config = this.props.layoutConfig) {\r\n    this.clearCanvas(config);\r\n    this.clearKeypressHistory();\r\n    this.currentChain = 0;\r\n  }\r\n\r\n  clearCanvas(config = this.props.layoutConfig) {\r\n    this.state.colormap = new Array(config.width).fill(null).map(() => new Array(config.height).fill(palette[0])); //I write directly into state because that takes so long it will be complete by the time render is over and throw an error already. Since shouldComponentUpdate will enforce update I will give it a pass\r\n  }\r\n\r\n  clearKeypressHistory() {\r\n    this.keypressHistory = new Array(8).fill(null).map(() => new Array(8).fill(0));\r\n  }\r\n\r\n  setupMidiInput(newInput, oldInput) {\r\n    // console.log([newInput, oldInput])\r\n    if (oldInput !== undefined) oldInput.removeListener();\r\n    if (newInput !== undefined) newInput.addListener(\"midimessage\", \"all\", this.midiInputHandler.bind(this));\r\n  }\r\n\r\n  midiInputHandler = (midiEvent) => {\r\n    console.log(midiEvent.data)\r\n    var [event, note, velocity] = midiEvent.data\r\n    var [x, y] = [undefined, undefined]\r\n    if(this.props.inputConfig.noteToXY !== undefined)\r\n    { \r\n      var xy = this.props.inputConfig.noteToXY(note)\r\n      if(xy == undefined) return\r\n      [x, y] = xy\r\n    }\r\n    else\r\n    {\r\n      [x, y] = this.indexOf2dArray(note, this.props.inputConfig.keymap); \r\n    }\r\n    console.log([x, y]);\r\n    if (x !== undefined && y !== undefined) {\r\n      // let [canvas_x, canvas_y] = this.arrayCalculation([x, y], this.props.inputConfig.canvas_origin, \"-\");\r\n      switch (event >> 4) {\r\n        case 9: //Note On\r\n        case 11: //Control Change\r\n          if (velocity != 0) {\r\n            //Fall back to Note Off\r\n            this.keyOn(x, y, this.props.inputConfig);\r\n            break;\r\n          }\r\n        case 8: //Note Off\r\n          this.keyOff(x, y, this.props.inputConfig);\r\n          break;\r\n      }\r\n    }\r\n  };\r\n\r\n  keyOn = (x, y, config = this.props.layoutConfig, reverseOffset = false, sound = true, led = true) => {\r\n    const currentKeyPressIndex = this.currentKeyPress.indexOf([x, y]);\r\n    if (currentKeyPressIndex == -1) {\r\n      this.currentKeyPress.push([x, y]) // 2nd parameter means remove one item only\r\n      if(this.autoplay != null && this.autoplay.state == \"PAUSED\")\r\n      {\r\n        \r\n      }\r\n    }\r\n\r\n    let soundLoop = 1;\r\n    let [canvas_x, canvas_y] = [x, y]; //canvas_XY means the grid scope XY (Square), Raw XY will be the source XY (Including the chain keys)\r\n    if (!reverseOffset) {\r\n      [canvas_x, canvas_y] = this.arrayCalculation([x, y], config.canvas_origin, \"-\");\r\n    } else {\r\n      [x, y] = this.arrayCalculation([x, y], config.canvas_origin, \"+\");\r\n    }\r\n    console.log(\"Note On - \" + x.toString() + \" \" + y.toString());\r\n    // console.log([x, y, canvas_x, canvas_y])\r\n\r\n    if (this.props.projectFile !== undefined) {\r\n      if (canvas_x >= 0 && canvas_x < 8 && canvas_y >= 0 && canvas_y < 8) {\r\n        //LED\r\n        if (led && this.props.projectFile.keyLED !== undefined && this.props.projectFile.keyLED[this.currentChain] !== undefined && this.props.projectFile.keyLED[this.currentChain][canvas_x] !== undefined && this.props.projectFile.keyLED[this.currentChain][canvas_x][canvas_y] !== undefined && this.props.projectFile.keyLED[this.currentChain][canvas_x][canvas_y].length > 0) {\r\n          let ledIndex = this.keypressHistory[canvas_x][canvas_y] % this.props.projectFile.keyLED[this.currentChain][canvas_x][canvas_y].length;\r\n          this.props.projectFile.keyLED[this.currentChain][canvas_x][canvas_y][ledIndex].stop();\r\n          this.props.projectFile.keyLED[this.currentChain][canvas_x][canvas_y][ledIndex].play();\r\n        }\r\n\r\n        if (sound && this.props.projectFile.keySound !== undefined && this.props.projectFile.keySound[this.currentChain] !== undefined && this.props.projectFile.keySound[this.currentChain][canvas_x] !== undefined && this.props.projectFile.keySound[this.currentChain][canvas_x][canvas_y] !== undefined && this.props.projectFile.keySound[this.currentChain][canvas_x][canvas_y].length > 0) {\r\n          //Sound\r\n          let soundIndex = this.keypressHistory[canvas_x][canvas_y] % this.props.projectFile.keySound[this.currentChain][canvas_x][canvas_y].length;\r\n          // console.log('Play sound ${this.currentChain} ${canvas_x}')\r\n          if (this.props.projectFile.keySound[this.currentChain][canvas_x][canvas_y][soundIndex][1] !== undefined) {\r\n            //Has special data\r\n            if (\r\n              this.props.projectFile.keySound[this.currentChain][canvas_x][canvas_y][soundIndex][1][0] !== undefined // Loop\r\n            ) {\r\n              soundLoop = parseInt(this.props.projectFile.keySound[this.currentChain][canvas_x][canvas_y][soundIndex][1][0]);\r\n            }\r\n          }\r\n          this.props.projectFile.keySound[this.currentChain][canvas_x][canvas_y][soundIndex][0].stop();\r\n          this.props.projectFile.keySound[this.currentChain][canvas_x][canvas_y][soundIndex][0].play(soundLoop);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  checkChain = (x, y, config) => {\r\n    if(config.chainKey !== undefined)\r\n    {\r\n      for (var i = 0; i < Math.min(config.chainKey.length, this.props.projectFile.info.chain); i++) {\r\n        if (config.chainKey[i][0] === x && config.chainKey[i][1] === y) this.chainChange(i);\r\n      }\r\n    }\r\n  };\r\n\r\n  keyOff = (x, y, config = this.props.layoutConfig, reverseOffset = false, sound = true, led = true) => {\r\n    const currentKeyPressIndex = this.currentKeyPress.indexOf([x, y]);\r\n    if (currentKeyPressIndex > -1) {\r\n      this.currentKeyPress.splice(currentKeyPressIndex, 1); // 2nd parameter means remove one item only\r\n    }\r\n\r\n    let [canvas_x, canvas_y] = [x, y]; //canvas_XY means the grid scope XY (Square), Raw XY will be the source XY (Including the chain keys)\r\n    if (!reverseOffset) {\r\n      [canvas_x, canvas_y] = this.arrayCalculation([x, y], config.canvas_origin, \"-\");\r\n    } else {\r\n      [x, y] = this.arrayCalculation([x, y], config.canvas_origin, \"+\");\r\n    }\r\n    console.log(\"Note Off - \" + x.toString() + \" \" + y.toString());\r\n\r\n    if (this.props.projectFile !== undefined) {\r\n      if (canvas_x >= 0 && canvas_x < 8 && canvas_y >= 0 && canvas_y < 8) {\r\n        //LED\r\n        if (led && this.props.projectFile.keyLED !== undefined && this.props.projectFile.keyLED[this.currentChain] !== undefined && this.props.projectFile.keyLED[this.currentChain][canvas_x] !== undefined && this.props.projectFile.keyLED[this.currentChain][canvas_x][canvas_y] !== undefined && this.props.projectFile.keyLED[this.currentChain][canvas_x][canvas_y].length > 0) {\r\n          let ledIndex = this.keypressHistory[canvas_x][canvas_y] % this.props.projectFile.keyLED[this.currentChain][canvas_x][canvas_y].length;\r\n          if (this.props.projectFile.keyLED[this.currentChain][canvas_x][canvas_y][ledIndex] !== undefined && this.props.projectFile.keyLED[this.currentChain][canvas_x][canvas_y][ledIndex].repeat === 0) {\r\n            //Page might have changed\r\n            this.props.projectFile.keyLED[this.currentChain][canvas_x][canvas_y][ledIndex].endLoop();\r\n          }\r\n        }\r\n\r\n        if (sound && this.props.projectFile.keySound !== undefined && this.props.projectFile.keySound[this.currentChain] !== undefined && this.props.projectFile.keySound[this.currentChain][canvas_x] !== undefined && this.props.projectFile.keySound[this.currentChain][canvas_x][canvas_y] !== undefined && this.props.projectFile.keySound[this.currentChain][canvas_x][canvas_y].length > 0) {\r\n          //Sound\r\n          let soundIndex = this.keypressHistory[canvas_x][canvas_y] % this.props.projectFile.keySound[this.currentChain][canvas_x][canvas_y].length;\r\n          // console.log('Play sound ${this.currentChain} ${canvas_x}')\r\n          if (this.props.projectFile.keySound[this.currentChain][canvas_x][canvas_y][soundIndex][1] !== undefined) {\r\n            if (\r\n              this.props.projectFile.keySound[this.currentChain][canvas_x][canvas_y][soundIndex][1][0] == \"0\" // Inf Loop\r\n            ) {\r\n              this.props.projectFile.keySound[this.currentChain][canvas_x][canvas_y][soundIndex][0].endLoop();\r\n            }\r\n\r\n            if (this.props.projectFile.keySound[this.currentChain][canvas_x][canvas_y][soundIndex][1][1] !== undefined) {\r\n              //Wormhole\r\n              let targetChain = parseInt(this.props.projectFile.keySound[this.currentChain][canvas_x][canvas_y][soundIndex][1][1]) - 1;\r\n              console.log(`Wormhole to Chain ${targetChain + 1}`);\r\n              this.chainChange(targetChain);\r\n            }\r\n          }\r\n        }\r\n\r\n        //Update History\r\n        if (this.keypressHistory[canvas_x] != undefined && this.keypressHistory[canvas_x][canvas_y] != undefined) \r\n          this.keypressHistory[canvas_x][canvas_y]++;\r\n      }\r\n      else\r\n      {\r\n        //Chain Change\r\n        this.checkChain(x, y, config);\r\n      }\r\n    }\r\n  };\r\n\r\n  chainChange = (chain) => {\r\n    console.log(\"Chain Changed to \" + (chain + 1));\r\n    if (chain !== this.currentChain) this.clearKeypressHistory();\r\n    this.currentChain = chain;\r\n  };\r\n\r\n  setColor = (x, y, color) => {\r\n    // console.log(`Set Color ${x} ${y} ${color}`)\r\n    this.setColorCanvas(x, y, color);\r\n    this.setColorOutput(x, y, color);\r\n  };\r\n\r\n  setHighlight = (x, y, color) => {\r\n    // console.log(`Set Color ${x} ${y} ${color}`)\r\n    this.setHighlightCanvas(x, y, color);\r\n  };\r\n\r\n  getCanvasPosition(x, y) {\r\n    var [canvas_x, canvas_y] = [undefined, undefined];\r\n    if (x === \"l\") {\r\n      if (this.props.layoutConfig.lKey == undefined) return;\r\n      [canvas_x, canvas_y] = this.props.layoutConfig.lKey;\r\n    } else if (x === \"mc\") {\r\n      if (this.props.layoutConfig.mcTable === undefined || this.props.layoutConfig.mcTable[y] == null) return;\r\n      [canvas_x, canvas_y] = this.props.layoutConfig.mcTable[y];\r\n    } else if (x === \"chain\") {\r\n        if (this.props.layoutConfig.chainKey === undefined || this.props.layoutConfig.chainKey[y] == null) return;\r\n        [canvas_x, canvas_y] = this.props.layoutConfig.chainKey[y];\r\n    } else {\r\n      [canvas_x, canvas_y] = this.arrayCalculation([x, y], this.props.layoutConfig.canvas_origin, \"+\");\r\n    }\r\n\r\n    return [canvas_x, canvas_y];\r\n  };\r\n\r\n  setColorCanvas(x, y, color) {\r\n    var [canvas_x, canvas_y] = this.getCanvasPosition(x, y);\r\n   \r\n    try {\r\n      if (/^#[0-9A-F]{6}$/i.test(color)) {\r\n        //Check if it is a Hex String\r\n        this.state.colormap[canvas_x][canvas_y] = color;\r\n      } else {\r\n        this.state.colormap[canvas_x][canvas_y] = palette[color];\r\n      }\r\n    } catch (e) {\r\n      console.error(e);\r\n      console.error([x, y, color, canvas_x, canvas_y]);\r\n    }\r\n  }\r\n\r\n  setHighlightCanvas(x, y, color = null) {\r\n    var [canvas_x, canvas_y] = this.getCanvasPosition(x, y);\r\n\r\n    try {\r\n      if (/^#[0-9A-F]{6}$/i.test(color)) {\r\n        //Check if it is a Hex String\r\n        this.state.highlightmap[canvas_x][canvas_y] = color;\r\n      } else {\r\n        this.state.highlightmap[canvas_x][canvas_y] = palette[color];\r\n      }\r\n    } catch (e) {\r\n      console.error(e);\r\n      console.error([x, y, color, canvas_x, canvas_y]);\r\n    }\r\n  }\r\n\r\n  getDevicePosition(x, y)\r\n  {\r\n    var [output_x, output_y] = [undefined, undefined];\r\n    if (x === \"l\") {\r\n      if (this.props.outputConfig.lKey == undefined) return;\r\n      [output_x, output_y] = this.props.outputConfig.lKey;\r\n    } else if (x === \"mc\") {\r\n      if (this.props.outputConfig.mcTable === undefined || this.props.outputConfig.mcTable[y] == null) return\r\n      [output_x, output_y] = this.props.outputConfig.mcTable[y];\r\n    } else if (x === \"chain\") {\r\n      if (this.props.layoutConfig.chainKey === undefined || this.props.layoutConfig.chainKey[y] == null) return;\r\n      [output_x, output_y]= this.props.layoutConfig.chainKey[y];\r\n    } else {\r\n      [output_x, output_y] = this.arrayCalculation([x, y], this.props.outputConfig.canvas_origin, \"+\");\r\n    }\r\n\r\n    return [output_x, output_y];\r\n  }\r\n\r\n  setColorOutput(x, y, color) {\r\n    if (this.props.outputDevice !== undefined && this.props.outputConfig !== undefined) {\r\n      var [output_x, output_y] = this.getDevicePosition(x, y);\r\n      \r\n      try {\r\n        if (/^#[0-9A-F]{6}$/i.test(color)) {\r\n          //Check if it is a Hex String\r\n          this.sendSysex(this.props.outputConfig.hexSysexGen(output_y, output_x, color));\r\n        } else {\r\n          this.sendMidi(\"NoteOn\", this.props.outputConfig.channel, this.props.outputConfig.keymap[output_y][output_x], color);\r\n        }\r\n      } catch (e) {\r\n        console.error(e);\r\n        console.error([x, y, color, output_x, output_y]);\r\n      }\r\n    }\r\n  }\r\n\r\n  sendMidi(mode, channel, note, value = 0) {\r\n    if (typeof note === \"string\") {\r\n      let modeKey = note.charAt(0);\r\n      note = parseInt(note.substr(1));\r\n      switch (modeKey) {\r\n        case \"C\":\r\n          mode = \"CC\";\r\n          break;\r\n        case \"X\":\r\n          mode = \"HEX\";\r\n          break;\r\n        default:\r\n          return;\r\n      }\r\n    }\r\n    switch (mode) {\r\n      case \"NoteOn\":\r\n        this.props.outputDevice.send(0x90 + channel - 1, [note, value]);\r\n        break;\r\n      case \"NoteOff\":\r\n        this.props.outputDevice.send(0x80 + channel - 1, [note, value]);\r\n        break;\r\n      case \"CC\":\r\n        this.props.outputDevice.send(0xb0 + channel - 1, [note, value]);\r\n        break;\r\n      case \"HEX\":\r\n        this.sendSysex(this.props.outputConfig.hexSysexGen(note, rawPalette[value]));\r\n        break;\r\n    }\r\n  }\r\n\r\n  sendSysex(message) {\r\n    // console.log(message)\r\n    this.props.outputDevice.sendSysex([], message);\r\n  }\r\n\r\n  // // Overlays a color\r\n  // colorOverlay = (hex, overlay) => {\r\n  //   let [r, g, b] = this.toRGB(hex)\r\n  //   let [r0, g0, b0] = this.toRGB(overlay)\r\n  //   r = Math.round(r * (255 - r0) / 255 + r0);\r\n  //   g = Math.round(g * (255 - g0) / 255 + g0);\r\n  //   b = Math.round(b * (255 - b0) / 255 + b0);\r\n  //   return this.toHEX(r, g, b)\r\n  // }\r\n\r\n  // // Converts a CHAD HEX color to a beta RGB color\r\n  // toRGB = (hex) => {\r\n  //   const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex)\r\n  //   return [parseInt(result[1], 16),\r\n  //           parseInt(result[2], 16),\r\n  //           parseInt(result[3], 16)]\r\n  // }\r\n\r\n  // // Converts a beta RGB color to a CHAD HEX color\r\n  // toHEX = (r, g, b) => '#' + this.componentToHex(r) + this.componentToHex(g) + this.componentToHex(b)\r\n\r\n  // // Converts the value of a given component to CHAD HEX\r\n  // componentToHex = (component) => {\r\n  //   const hex = component.toString(16)\r\n  //   return hex.length === 1 ? '0' + hex : hex\r\n  // }\r\n\r\n  arrayCalculation = (array1, array2, operation) => {\r\n    let newArray = [];\r\n    if (array1.length === array2.length) {\r\n      switch (operation) {\r\n        case \"+\":\r\n          for (var i = 0; i < array1.length; i++) {\r\n            newArray.push(array1[i] + array2[i]);\r\n          }\r\n          return newArray;\r\n        case \"-\":\r\n          for (var i = 0; i < array1.length; i++) {\r\n            newArray.push(array1[i] - array2[i]);\r\n          }\r\n          return newArray;\r\n      }\r\n    }\r\n  };\r\n\r\n  indexOf2dArray(id, matrix) {\r\n    for (var y = 0, len = matrix.length; y < len; y++) {\r\n      for (var x = 0, len2 = matrix[y].length; x < len2; x++) {\r\n        if (matrix[y][x] === id) {\r\n          return [x, y];\r\n        }\r\n      }\r\n    }\r\n    return [undefined, undefined];\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className=\"canvas\"\r\n        style={{\r\n          padding: this.props.layoutConfig.padding,\r\n          borderRadius: this.props.layoutConfig.radius,\r\n        }}\r\n      >\r\n        {this.props.layoutConfig.layout.map((value, y) => {\r\n          return (\r\n            <div className=\"button-row\">\r\n              {this.props.layoutConfig.layout[y].map((value, x) => {\r\n                if(Object.keys(buttonConfigs).includes(value))\r\n                  {\r\n                    return <Button x={x} y={y} class={buttonConfigs[value].class} overlayClass={buttonConfigs[value].overlayClass} color={this.state.colormap[x][y]} highlight={this.state.highlightmap[x][y]} on={this.keyOn} off={this.keyOff} />;\r\n                  }\r\n                  else\r\n                  {\r\n                    return <div key={\"Spacer \" + x.toString() + \"-\" + y.toString()} style={{width: \"96px\"}}/>\r\n                  }\r\n                }\r\n              )}\r\n            </div>\r\n          );\r\n        })}\r\n        {/* <button onClick={this.playAutoplay}>Auto Play</button> */}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Canvas;\r\n","const config = {\r\n  defaultLayout: \"Launchpad Pro\",\r\n}\r\n\r\nexport default config;","const deviceConfigs = {\r\n  \"Launchpad Pro\":\r\n  {\r\n    channel: 1,\r\n    midiNameRegex: \"Launchpad Pro\", //For some reason mine shows up as \"3- Launchpad Pro\"\r\n\r\n    initializationSysex:[\r\n      [0, 32, 41, 2, 16, 33, 0], //Enter Live Mode\r\n      [0, 32, 41, 2, 16, 14, 0], //Clear canvas\r\n      [0, 32, 41, 2, 16, 10, 99, 0], //Turn off Mode light\r\n    ],\r\n\r\n    // inputInfoMessage:[\r\n    //   \"Hello\",\r\n    //   \"World\",\r\n    // ],\r\n\r\n    // outputInfoMessage:[\r\n    //   \"Hello\",\r\n    //   \"World\",\r\n    // ],\r\n\r\n    layout: [\r\n      [\"　\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"　\"],\r\n      [\"⬤\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"⬤\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"⬤\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"⬤\", \"◻\", \"◻\", \"◻\", \"◸\", \"◹\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"⬤\", \"◻\", \"◻\", \"◻\", \"◺\", \"⊿\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"⬤\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"⬤\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"⬤\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"　\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \" \"]],\r\n\r\n    keymap: [\r\n      [null, 91, 92, 93, 94, 95, 96, 97, 98, null],\r\n      [80, 81, 82, 83, 84, 85, 86, 87, 88, 89],\r\n      [70, 71, 72, 73, 74, 75, 76, 77, 78, 79],\r\n      [60, 61, 62, 63, 64, 65, 66, 67, 68, 69],\r\n      [50, 51, 52, 53, 54, 55, 56, 57, 58, 59],\r\n      [40, 41, 42, 43, 44, 45, 46, 47, 48, 49],\r\n      [30, 31, 32, 33, 34, 35, 36, 37, 38, 39],\r\n      [20, 21, 22, 23, 24, 25, 26, 27, 28, 29],\r\n      [10, 11, 12, 13, 14, 15, 16, 17, 18, 19],\r\n      [null, 1, 2, 3, 4, 5, 6, 7, 8, \"X99\"]],\r\n\r\n    //Size of LED since sometimes Key can come without LED. We don't really need them since we can load the size of layout array\r\n    width: 10,\r\n    height: 10,\r\n\r\n    //UI related\r\n    padding: 25,\r\n    radius: 15,\r\n\r\n    canvas_origin: [1, 1],\r\n\r\n    chainKey: [[9, 1], [9, 2], [9, 3], [9, 4], [9, 5], [9, 6], [9, 7], [9, 8],\r\n    [8, 9], [7, 9], [6, 9], [5, 9], [4, 9], [3, 9], [2, 9], [1, 9],\r\n    [0, 8], [0, 7], [0, 6], [0, 5], [0, 4], [0, 3], [0, 2], [0, 1]],\r\n\r\n    mcTable: [\r\n      [1, 0], [2, 0], [3, 0], [4, 0], [5, 0], [6, 0], [7, 0], [8, 0],\r\n      [9, 1], [9, 2], [9, 3], [9, 4], [9, 5], [9, 6], [9, 7], [9, 8],\r\n      [8, 9], [7, 9], [6, 9], [5, 9], [4, 9], [3, 9], [2, 9], [1, 9],\r\n      [0, 8], [0, 7], [0, 6], [0, 5], [0, 4], [0, 3], [0, 2], [0, 1]],\r\n\r\n    lKey: [9, 9],\r\n\r\n    noteToXY(note)\r\n    {\r\n      if(note >= 1 && note <= 99 /* && note != 9 && note != 90 */)\r\n        return [note % 10, 9 - Math.floor(note / 10)]\r\n    },\r\n\r\n    hexSysexGen: function () {\r\n      if (arguments.length != 2 && arguments.length != 3)\r\n        return [] //Error\r\n      switch (arguments.length) {\r\n        case 2: //ID\r\n          var id = arguments[0]\r\n          var hex = arguments[1]\r\n          break;\r\n        case 3: //XY\r\n          var x = arguments[0] + 1\r\n          var y = arguments[1] + 1\r\n          var id = x * 10 + y\r\n          var hex = arguments[2]\r\n          break;\r\n        default:\r\n          return []\r\n      }\r\n      if (typeof (hex) === \"string\" && hex.charAt(0) === '#') {\r\n        hex = parseInt(hex.substr(1), 16)\r\n      }\r\n      else {\r\n        return []\r\n      }\r\n      var r = (hex >> 16) >> 2 //6 bit color\r\n      var g = (hex & 0xFF00 >> 8) >> 2\r\n      var b = (hex & 0xFF) >> 2\r\n      return [0, 32, 41, 2, 16, 11, id, r, g, b]\r\n    }\r\n  },\r\n  \"Launchpad Pro (Phantom)\":\r\n  {\r\n    layout: [\r\n      [\"　\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"　\"],\r\n      [\"⬤\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"⬤\"],\r\n      [\"⬤\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"⬤\"],\r\n      [\"⬤\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"⬤\"],\r\n      [\"⬤\", \"◼️\", \"◼️\", \"◼️\", \"◤\", \"◥\", \"◼️\", \"◼️\", \"◼️\", \"⬤\"],\r\n      [\"⬤\", \"◼️\", \"◼️\", \"◼️\", \"◣\", \"◢\", \"◼️\", \"◼️\", \"◼️\", \"⬤\"],\r\n      [\"⬤\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"⬤\"],\r\n      [\"⬤\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"⬤\"],\r\n      [\"⬤\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"⬤\"],\r\n      [\"　\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \" \"]],\r\n\r\n    //Size of LED since sometimes Key can come without LED. We don't really need them since we can load the size of layout array\r\n    width: 10,\r\n    height: 10,\r\n\r\n    //UI related\r\n    padding: 25,\r\n    radius: 15,\r\n\r\n    canvas_origin: [1, 1],\r\n\r\n    chainKey: [[9, 1], [9, 2], [9, 3], [9, 4], [9, 5], [9, 6], [9, 7], [9, 8],\r\n    [8, 9], [7, 9], [6, 9], [5, 9], [4, 9], [3, 9], [2, 9], [1, 9],\r\n    [0, 8], [0, 7], [0, 6], [0, 5], [0, 4], [0, 3], [0, 2], [0, 1]],\r\n\r\n    mcTable: [\r\n      [1, 0], [2, 0], [3, 0], [4, 0], [5, 0], [6, 0], [7, 0], [8, 0],\r\n      [9, 1], [9, 2], [9, 3], [9, 4], [9, 5], [9, 6], [9, 7], [9, 8],\r\n      [8, 9], [7, 9], [6, 9], [5, 9], [4, 9], [3, 9], [2, 9], [1, 9],\r\n      [0, 8], [0, 7], [0, 6], [0, 5], [0, 4], [0, 3], [0, 2], [0, 1]],\r\n\r\n    lKey: [9, 9],\r\n  },\r\n  \"Launchpad Pro (CFW)\":\r\n  {\r\n    channel: 16,\r\n    midiNameRegex: \"Launchpad Open\", //For some reason mine shows up as \"3- Launchpad Pro\"\r\n\r\n    initializationSysex:[\r\n      [0, 32, 41, 2, 16, 33, 1], //Enter Performance Mode\r\n      [0, 32, 41, 2, 16, 14, 0], //Clear canvas\r\n    ],\r\n\r\n    keymap: [\r\n      [null, 28, 29, 30, 31, 32, 33, 34, 35, null],\r\n      [108, 64, 65, 66, 67, 96, 97, 98, 99, 100],\r\n      [109, 60, 61, 62, 63, 92, 93, 94, 95, 101],\r\n      [110, 56, 57, 58, 59, 88, 89, 90, 91, 102],\r\n      [111, 52, 53, 54, 55, 84, 85, 86, 87, 103],\r\n      [112, 48, 49, 50, 51, 80, 81, 82, 83, 104],\r\n      [113, 44, 45, 46, 47, 76, 77, 78, 79, 105],\r\n      [114, 40, 41, 42, 43, 72, 73, 74, 75, 106],\r\n      [115, 36, 37, 38, 39, 68, 69, 70, 71, 107],\r\n      [null, 116, 117, 118, 119, 120, 121, 122, 123, 27]],\r\n\r\n    //Size of LED since sometimes Key can come without LED. We don't really need them since we can load the size of layout array\r\n    width: 10,\r\n    height: 10,\r\n\r\n    //UI related\r\n    padding: 30,\r\n    radius: 15,\r\n\r\n    canvas_origin: [1, 1],\r\n\r\n    chainKey: [[9, 1], [9, 2], [9, 3], [9, 4], [9, 5], [9, 6], [9, 7], [9, 8],\r\n    [8, 9], [7, 9], [6, 9], [5, 9], [4, 9], [3, 9], [2, 9], [1, 9],\r\n    [0, 8], [0, 7], [0, 6], [0, 5], [0, 4], [0, 3], [0, 2], [0, 1]],\r\n\r\n    mcTable: [\r\n      [1, 0], [2, 0], [3, 0], [4, 0], [5, 0], [6, 0], [7, 0], [8, 0],\r\n      [9, 1], [9, 2], [9, 3], [9, 4], [9, 5], [9, 6], [9, 7], [9, 8],\r\n      [8, 9], [7, 9], [6, 9], [5, 9], [4, 9], [3, 9], [2, 9], [1, 9],\r\n      [0, 8], [0, 7], [0, 6], [0, 5], [0, 4], [0, 3], [0, 2], [0, 1]],\r\n\r\n    lKey: [9, 9],\r\n\r\n    noteToXY(note)\r\n    {\r\n      if(note >= 36 && note <= 99) // grid\r\n      {\r\n        var keymap_lut = [[1,8],[2,8],[3,8],[4,8],[1,7],[2,7],[3,7],[4,7],[1,6],[2,6],[3,6],[4,6],[1,5],[2,5],[3,5],[4,5],[1,4],[2,4],[3,4],[4,4],[1,3],[2,3],[3,3],[4,3],[1,2],[2,2],[3,2],[4,2],[1,1],[2,1],[3,1],[4,1],[5,8],[6,8],[7,8],[8,8],[5,7],[6,7],[7,7],[8,7],[5,6],[6,6],[7,6],[8,6],[5,5],[6,5],[7,5],[8,5],[5,4],[6,4],[7,4],[8,4],[5,3],[6,3],[7,3],[8,3],[5,2],[6,2],[7,2],[8,2],[5,1],[6,1],[7,1],[8,1]]\r\n        return keymap_lut[note - 36]\r\n      }\r\n      else if(note >= 100 && note <= 107)\r\n      {\r\n        return this.mcTable[note - 100 + 8] //note - 100 is the raw index, +8 is the offset\r\n      }\r\n      else if(note >= 116 && note <= 123)\r\n      {\r\n        return this.mcTable[7 - (note - 116) + 16] //7 - as reverse the direction\r\n      }\r\n      else if(note >= 108 && note <= 115)\r\n      {\r\n        return this.mcTable[7 - (note - 108) + 24]\r\n      }\r\n      else if(note >= 28 && note <= 35)\r\n      {\r\n        return this.mcTable[note - 28]\r\n      }\r\n      else if(note == 27)\r\n      {\r\n        return this.lKey\r\n      }\r\n    },\r\n\r\n    hexSysexGen: function () {\r\n      if (arguments.length != 2 && arguments.length != 3)\r\n        return [] //Error\r\n      switch (arguments.length) {\r\n        case 2: //ID\r\n          var id = arguments[0]\r\n          var hex = arguments[1]\r\n          break;\r\n        case 3: //XY\r\n          var x = arguments[0] + 1\r\n          var y = arguments[1] + 1\r\n          var id = x * 10 + y\r\n          var hex = arguments[2]\r\n          break;\r\n        default:\r\n          return []\r\n      }\r\n      if (typeof (hex) === \"string\" && hex.charAt(0) === '#') {\r\n        hex = parseInt(hex.substr(1), 16)\r\n      }\r\n      else {\r\n        return []\r\n      }\r\n      var r = (hex >> 16) >> 2 //6 bit color\r\n      var g = (hex & 0xFF00 >> 8) >> 2\r\n      var b = (hex & 0xFF) >> 2\r\n      return [0, 32, 41, 2, 16, 11, id, r, g, b]\r\n    }\r\n  },\r\n  \"Launchpad MK2\":\r\n  {\r\n    channel: 1,\r\n    midiNameRegex: \"Launchpad MK2\",\r\n\r\n    layout: [\r\n      [\"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"　\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◸\", \"◹\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◺\", \"⊿\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"]],\r\n\r\n    keymap: [\r\n      [\"C104\", \"C105\", \"C106\", \"C107\", \"C108\", \"C109\", \"C110\", \"C111\", null],\r\n      [81, 82, 83, 84, 85, 86, 87, 88, 89],\r\n      [71, 72, 73, 74, 75, 76, 77, 78, 79],\r\n      [61, 62, 63, 64, 65, 66, 67, 68, 69],\r\n      [51, 52, 53, 54, 55, 56, 57, 58, 59],\r\n      [41, 42, 43, 44, 45, 46, 47, 48, 49],\r\n      [31, 32, 33, 34, 35, 36, 37, 38, 39],\r\n      [21, 22, 23, 24, 25, 26, 27, 28, 29],\r\n      [11, 12, 13, 14, 15, 16, 17, 18, 19]],\r\n\r\n    width: 9,\r\n    height: 9,\r\n\r\n    //UI related\r\n    padding: 30,\r\n    radius: 15,\r\n\r\n    canvas_origin: [0, 1],\r\n\r\n    chainKey: [[8, 1], [8, 2], [8, 3], [8, 4], [8, 5], [8, 6], [8, 7], [8, 8]],\r\n\r\n    mcTable: [\r\n      [0, 0], [1, 0], [2, 0], [3, 0], [4, 0], [5, 0], [6, 0], [7, 0],\r\n      [8, 1], [8, 2], [8, 3], [8, 4], [8, 5], [8, 6], [8, 7], [8, 8],\r\n      null, null, null, null, null, null, null, null,\r\n      null, null, null, null, null, null, null, null,],\r\n\r\n      noteToXY(note)\r\n      {\r\n        if(note >= 11 && note <= 89)\r\n        {\r\n          return [(note % 10) - 1, 9 - Math.floor(note / 10)]\r\n        }\r\n        else if(note >= 104 && note <= 111)\r\n        {\r\n          return this.mcTable[note - 104 + 24]\r\n        }\r\n      },\r\n\r\n    hexSysexGen: function () {\r\n      if (arguments.length != 2 && arguments.length != 3)\r\n        return [] //Error\r\n      switch (arguments.length) {\r\n        case 2: //ID\r\n          var id = arguments[0]\r\n          var hex = arguments[1]\r\n          break;\r\n        case 3: //XY\r\n          var x = arguments[0] + 1\r\n          var y = arguments[1] + 1\r\n          var id = x * 10 + y\r\n          var hex = arguments[2]\r\n          break;\r\n        default:\r\n          return []\r\n      }\r\n      if (typeof (hex) === \"string\" && hex.charAt(0) === '#') {\r\n        hex = parseInt(hex.substr(1), 16)\r\n      }\r\n      else {\r\n        return []\r\n      }\r\n      var r = (hex >> 16) >> 2 //6 bit color\r\n      var g = (hex & 0xFF00 >> 8) >> 2\r\n      var b = (hex & 0xFF) >> 2\r\n      return [0, 32, 41, 2, 24, 11, id, r, g, b]\r\n    }\r\n  },\r\n  \"Launchpad X\":\r\n  {\r\n    channel: 1,\r\n    midiNameRegex: \"Launchpad X|LPX MIDI\",\r\n\r\n    initializationSysex:[\r\n      [0, 32, 41, 2, 12, 14, 1], //Enter Programmer Mode\r\n    ],\r\n\r\n    layout: [\r\n      [\"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \" \"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◼️\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◼️\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◼️\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◸\", \"◹\", \"◻\", \"◻\", \"◻\", \"◼️\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◺\", \"⊿\", \"◻\", \"◻\", \"◻\", \"◼️\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◼️\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◼️\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◼️\"]],\r\n\r\n    keymap: [\r\n      [91, 92, 93, 94, 95, 96, 97, 98, 99],\r\n      [81, 82, 83, 84, 85, 86, 87, 88, 89],\r\n      [71, 72, 73, 74, 75, 76, 77, 78, 79],\r\n      [61, 62, 63, 64, 65, 66, 67, 68, 69],\r\n      [51, 52, 53, 54, 55, 56, 57, 58, 59],\r\n      [41, 42, 43, 44, 45, 46, 47, 48, 49],\r\n      [31, 32, 33, 34, 35, 36, 37, 38, 39],\r\n      [21, 22, 23, 24, 25, 26, 27, 28, 29],\r\n      [11, 12, 13, 14, 15, 16, 17, 18, 19]],\r\n\r\n    width: 9,\r\n    height: 9,\r\n\r\n    //UI related\r\n    padding: 30,\r\n    radius: 5,\r\n\r\n    canvas_origin: [0, 1],\r\n\r\n    chainKey: [[8, 1], [8, 2], [8, 3], [8, 4], [8, 5], [8, 6], [8, 7], [8, 8]],\r\n\r\n    mcTable: [\r\n      [0, 0], [1, 0], [2, 0], [3, 0], [4, 0], [5, 0], [6, 0], [7, 0],\r\n      [8, 1], [8, 2], [8, 3], [8, 4], [8, 5], [8, 6], [8, 7], [8, 8],\r\n      null, null, null, null, null, null, null, null,\r\n      null, null, null, null, null, null, null, null,],\r\n\r\n    lKey: [9, 0],\r\n\r\n    noteToXY(note)\r\n    {\r\n      if(note >= 11 && note <= 99) // grid\r\n      {\r\n        return [(note % 10) - 1, 9 - (Math.floor(note / 10))]\r\n      }\r\n    },\r\n\r\n    hexSysexGen: function () {\r\n      if (arguments.length != 2 && arguments.length != 3)\r\n        return [] //Error\r\n      switch (arguments.length) {\r\n        case 2: //MC\r\n          var mc = arguments[0]\r\n          if (this.mcTable[mc] == null)\r\n            return []\r\n          var x, y = this.mcTable[mc]\r\n          var hex = arguments[1]\r\n          break;\r\n        case 3: //XY\r\n          var x = arguments[0] + 1\r\n          var y = arguments[1] + 1\r\n          var hex = arguments[2]\r\n          break;\r\n        default:\r\n          return []\r\n      }\r\n      var xy = x * 10 + y\r\n      var r = (hex >> 16) >> 1 //7 bit color\r\n      var g = (hex & 0xFF00 >> 8) >> 1\r\n      var b = (hex & 0xFF) >> 1\r\n      return [0, 32, 41, 2, 12, 3, 3, xy, r, g, b]\r\n    }\r\n  },\r\n  \"Launchpad Pro MK3\":\r\n  {\r\n    channel: 1,\r\n    midiNameRegex: \"Launchpad Pro MK3\",\r\n\r\n    initializationSysex:[\r\n      [0, 32, 41, 2, 12, 14, 0, 17, 0], //Enter Programmer Mode\r\n    ],\r\n\r\n    layout: [\r\n      [\"　\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \" \"],\r\n      [\"◼️\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◼️\"],\r\n      [\"◼️\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◼️\"],\r\n      [\"◼️\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◼️\"],\r\n      [\"◼️\", \"◻\", \"◻\", \"◻\", \"◸\", \"◹\", \"◻\", \"◻\", \"◻\", \"◼️\"],\r\n      [\"◼️\", \"◻\", \"◻\", \"◻\", \"◺\", \"⊿\", \"◻\", \"◻\", \"◻\", \"◼️\"],\r\n      [\"◼️\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◼️\"],\r\n      [\"◼️\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◼️\"],\r\n      [\"◼️\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◼️\"],\r\n      [\"　\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \" \"]],\r\n\r\n    keymap: [\r\n      [null, 91, 92, 93, 94, 95, 96, 97, 98, 99],\r\n      [80, 81, 82, 83, 84, 85, 86, 87, 88, 89],\r\n      [70, 71, 72, 73, 74, 75, 76, 77, 78, 79],\r\n      [60, 61, 62, 63, 64, 65, 66, 67, 68, 69],\r\n      [50, 51, 52, 53, 54, 55, 56, 57, 58, 59],\r\n      [40, 41, 42, 43, 44, 45, 46, 47, 48, 49],\r\n      [30, 31, 32, 33, 34, 35, 36, 37, 38, 39],\r\n      [20, 21, 22, 23, 24, 25, 26, 27, 28, 29],\r\n      [10, 11, 12, 13, 14, 15, 16, 17, 18, 19],\r\n      [null, 1, 2, 3, 4, 5, 6, 7, 8, null]],\r\n\r\n    //Size of LED since sometimes Key can come without LED. We don't really need them since we can load the size of layout array\r\n    width: 10,\r\n    height: 10,\r\n\r\n    //UI related\r\n    padding: 25,\r\n    radius: 5,\r\n\r\n    canvas_origin: [1, 1],\r\n\r\n    chainKey: [[9, 1], [9, 2], [9, 3], [9, 4], [9, 5], [9, 6], [9, 7], [9, 8]],\r\n\r\n    mcTable: [\r\n      [1, 0], [2, 0], [3, 0], [4, 0], [5, 0], [6, 0], [7, 0], [8, 0],\r\n      [9, 1], [9, 2], [9, 3], [9, 4], [9, 5], [9, 6], [9, 7], [9, 8],\r\n      [8, 9], [7, 9], [6, 9], [5, 9], [4, 9], [3, 9], [2, 9], [1, 9],\r\n      [0, 8], [0, 7], [0, 6], [0, 5], [0, 4], [0, 3], [0, 2], [0, 1]],\r\n\r\n    lKey: [9, 0],\r\n\r\n    noteToXY(note)\r\n    {\r\n      if(note >= 1 && note <= 99)\r\n      {\r\n        return [(note % 10), 9 - (Math.floor(note / 10))]\r\n      }\r\n      else if(note >= 101 && note <= 108)\r\n      {\r\n        return [note - 100, 9]\r\n      }\r\n    },\r\n\r\n    hexSysexGen: function () {\r\n      if (arguments.length != 2 && arguments.length != 3)\r\n        return [] //Error\r\n      switch (arguments.length) {\r\n        case 2: //MC\r\n          var mc = arguments[0]\r\n          // if (this.mcTable[mc] == null)\r\n          //   return []\r\n          var x, y = this.mcTable[mc]\r\n          var hex = arguments[1]\r\n          break;\r\n        case 3: //XY\r\n          var x = arguments[0] + 1\r\n          var y = arguments[1] + 1\r\n          var hex = arguments[2]\r\n          break;\r\n        default:\r\n          return []\r\n      }\r\n      var xy = x * 10 + y\r\n      var r = (hex >> 16) >> 1 //7 bit color\r\n      var g = (hex & 0xFF00 >> 8) >> 1\r\n      var b = (hex & 0xFF) >> 1\r\n      return [0, 32, 41, 2, 14, 3, 3, xy, r, g, b]\r\n    }\r\n  },\r\n  \"Matrix\":\r\n  {\r\n    channel: 2,\r\n    midiNameRegex: \"^Matrix\",\r\n\r\n    layout: [\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◸\", \"◹\", \"◻\", \"◻\", \"◻\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◺\", \"⊿\", \"◻\", \"◻\", \"◻\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\"]],\r\n\r\n    keymap: [\r\n      [64, 65, 66, 67, 96, 97, 98, 99],\r\n      [60, 61, 62, 63, 92, 93, 94, 95],\r\n      [56, 57, 58, 59, 88, 89, 90, 91],\r\n      [52, 53, 54, 55, 84, 85, 86, 87],\r\n      [48, 49, 50, 51, 80, 81, 82, 83],\r\n      [44, 45, 46, 47, 76, 77, 78, 79],\r\n      [40, 41, 42, 43, 72, 73, 74, 75],\r\n      [36, 37, 38, 39, 68, 69, 70, 71],\r\n      [100, 101, 102, 103, 104, 105, 106, 107]],\r\n\r\n    width: 8,\r\n    height: 8,\r\n\r\n    //UI related\r\n    padding: 20,\r\n    radius: 15,\r\n\r\n    canvas_origin: [0, 0],\r\n\r\n    chainKey: [[0, 8], [1, 8], [2, 8], [3, 8], [4, 8], [5, 8], [6, 8], [7, 8]],\r\n\r\n    // mcTable: [\r\n    //   null, null, null, null, null, null, null, null,\r\n    //   null, null, null, null, null, null, null, null,\r\n    //   null, null, null, null, null, null, null, null,\r\n    //   null, null, null, null, null, null, null, null,],\r\n\r\n    noteToXY(note)\r\n    {\r\n      if(note > 35 && note < 100) // grid\r\n      {\r\n        var keymap_lut = [[0,7],[1,7],[2,7],[3,7],[0,6],[1,6],[2,6],[3,6],[0,5],[1,5],[2,5],[3,5],[0,4],[1,4],[2,4],[3,4],[0,3],[1,3],[2,3],[3,3],[0,2],[1,2],[2,2],[3,2],[0,1],[1,1],[2,1],[3,1],[0,0],[1,0],[2,0],[3,0],[4,7],[5,7],[6,7],[7,7],[4,6],[5,6],[6,6],[7,6],[4,5],[5,5],[6,5],[7,5],[4,4],[5,4],[6,4],[7,4],[4,3],[5,3],[6,3],[7,3],[4,2],[5,2],[6,2],[7,2],[4,1],[5,1],[6,1],[7,1],[4,0],[5,0],[6,0],[7,0]]\r\n        return keymap_lut[note - 36]\r\n      }\r\n      else if(note > 99 && note < 108)\r\n      {\r\n        return this.chainKey[note - 100]\r\n      }\r\n    },\r\n\r\n    hexSysexGen: function () {\r\n      if (arguments.length != 3)\r\n        return [] //Error\r\n      switch (arguments.length) {\r\n        // case 2: //MC\r\n        //   var mc = arguments[0]\r\n        //   if(this.mcTable[mc] == null)\r\n        //     return\r\n        //   var x,y = this.mcTable[mc]\r\n        //   var hex = arguments[1]\r\n        case 3: //XY\r\n          var x = arguments[0]\r\n          var y = arguments[1]\r\n          var hex = arguments[2]\r\n          break;\r\n        default:\r\n          return;\r\n      }\r\n      var r = (hex >> 16) >> 1 //7 bit color\r\n      var g = (hex & 0xFF00 >> 8) >> 1\r\n      var b = (hex & 0xFF) >> 1\r\n      return [240, 0, 2, 3, 1, 0, 18, 32, 0, 3, r, g, b, 247]\r\n    }\r\n  },\r\n  \"Matrix Pro\":\r\n  {\r\n    channel: 2,\r\n    midiNameRegex: \"^Matrix Pro\",\r\n\r\n    // layout: [\r\n    //   [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\"],\r\n    //   [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\"],\r\n    //   [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\"],\r\n    //   [\"◻\", \"◻\", \"◻\", \"◸\", \"◹\", \"◻\", \"◻\", \"◻\"],\r\n    //   [\"◻\", \"◻\", \"◻\", \"◺\", \"⊿\", \"◻\", \"◻\", \"◻\"],\r\n    //   [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\"],\r\n    //   [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\"],\r\n    //   [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\"]],\r\n\r\n    keymap: [\r\n      [null, 28, 29, 30, 31, 32, 33, 34, 35, null],\r\n      [108, 64, 65, 66, 67, 96, 97, 98, 99, 100],\r\n      [109, 60, 61, 62, 63, 92, 93, 94, 95, 101],\r\n      [110, 56, 57, 58, 59, 88, 89, 90, 91, 102],\r\n      [111, 52, 53, 54, 55, 84, 85, 86, 87, 103],\r\n      [112, 48, 49, 50, 51, 80, 81, 82, 83, 104],\r\n      [113, 44, 45, 46, 47, 76, 77, 78, 79, 105],\r\n      [114, 40, 41, 42, 43, 72, 73, 74, 75, 106],\r\n      [115, 36, 37, 38, 39, 68, 69, 70, 71, 107],\r\n      [null, 116, 117, 118, 119, 120, 121, 122, 123, null]],\r\n    width: 10,\r\n    height: 10,\r\n\r\n    //UI related\r\n    padding: 20,\r\n    radius: 15,\r\n\r\n    canvas_origin: [1, 1],\r\n\r\n    chainKey: [[0, 8], [1, 8], [2, 8], [3, 8], [4, 8], [5, 8], [6, 8], [7, 8]],\r\n\r\n    mcTable: [\r\n      [1, 0], [2, 0], [3, 0], [4, 0], [5, 0], [6, 0], [7, 0], [8, 0],\r\n      [9, 1], [9, 2], [9, 3], [9, 4], [9, 5], [9, 6], [9, 7], [9, 8],\r\n      [8, 9], [7, 9], [6, 9], [5, 9], [4, 9], [3, 9], [2, 9], [1, 9],\r\n      [0, 8], [0, 7], [0, 6], [0, 5], [0, 4], [0, 3], [0, 2], [0, 1]],\r\n\r\n    noteToXY(note)\r\n    {\r\n      if(note > 35 && note < 100) // grid\r\n      {\r\n        var keymap_lut = [[0,7],[1,7],[2,7],[3,7],[0,6],[1,6],[2,6],[3,6],[0,5],[1,5],[2,5],[3,5],[0,4],[1,4],[2,4],[3,4],[0,3],[1,3],[2,3],[3,3],[0,2],[1,2],[2,2],[3,2],[0,1],[1,1],[2,1],[3,1],[0,0],[1,0],[2,0],[3,0],[4,7],[5,7],[6,7],[7,7],[4,6],[5,6],[6,6],[7,6],[4,5],[5,5],[6,5],[7,5],[4,4],[5,4],[6,4],[7,4],[4,3],[5,3],[6,3],[7,3],[4,2],[5,2],[6,2],[7,2],[4,1],[5,1],[6,1],[7,1],[4,0],[5,0],[6,0],[7,0]]\r\n        return keymap_lut[note - 36]\r\n      }\r\n      else if(note > 99 && note < 108)\r\n      {\r\n        return this.chainKey[note - 100]\r\n      }\r\n    },\r\n\r\n    hexSysexGen: function () {\r\n      if (arguments.length != 3)\r\n        return [] //Error\r\n      switch (arguments.length) {\r\n        // case 2: //MC\r\n        //   var mc = arguments[0]\r\n        //   if(this.mcTable[mc] == null)\r\n        //     return\r\n        //   var x,y = this.mcTable[mc]\r\n        //   var hex = arguments[1]\r\n        case 3: //XY\r\n          var x = arguments[0]\r\n          var y = arguments[1]\r\n          var hex = arguments[2]\r\n          break;\r\n        default:\r\n          return;\r\n      }\r\n      var r = (hex >> 16) >> 1 //7 bit color\r\n      var g = (hex & 0xFF00 >> 8) >> 1\r\n      var b = (hex & 0xFF) >> 1\r\n      return [240, 0, 2, 3, 1, 0, 18, 32, 0, 3, r, g, b, 247]\r\n    }\r\n  },\r\n  \"Midi Fighter 64\":\r\n  {\r\n    channel: 1,\r\n    midiNameRegex: \"^Midi Fighter 64\",\r\n\r\n    layout: [\r\n      [\"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\"],\r\n      [\"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\"],\r\n      [\"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\"],\r\n      [\"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\"],\r\n      [\"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\"],\r\n      [\"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\"],\r\n      [\"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\"],\r\n      [\"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\"]],\r\n\r\n    keymap: [\r\n      [64, 65, 66, 67, 96, 97, 98, 99],\r\n      [60, 61, 62, 63, 92, 93, 94, 95],\r\n      [56, 57, 58, 59, 88, 89, 90, 91],\r\n      [52, 53, 54, 55, 84, 85, 86, 87],\r\n      [48, 49, 50, 51, 80, 81, 82, 83],\r\n      [44, 45, 46, 47, 76, 77, 78, 79],\r\n      [40, 41, 42, 43, 72, 73, 74, 75],\r\n      [36, 37, 38, 39, 68, 69, 70, 71]],\r\n\r\n    width: 8,\r\n    height: 8,\r\n\r\n    //UI related\r\n    padding: 20,\r\n    radius: 50,\r\n\r\n    canvas_origin: [0, 0],\r\n\r\n    noteToXY(note)\r\n    {\r\n      if(note > 35 && note < 100) // grid\r\n      {\r\n        var keymap_lut = [[0,7],[1,7],[2,7],[3,7],[0,6],[1,6],[2,6],[3,6],[0,5],[1,5],[2,5],[3,5],[0,4],[1,4],[2,4],[3,4],[0,3],[1,3],[2,3],[3,3],[0,2],[1,2],[2,2],[3,2],[0,1],[1,1],[2,1],[3,1],[0,0],[1,0],[2,0],[3,0],[4,7],[5,7],[6,7],[7,7],[4,6],[5,6],[6,6],[7,6],[4,5],[5,5],[6,5],[7,5],[4,4],[5,4],[6,4],[7,4],[4,3],[5,3],[6,3],[7,3],[4,2],[5,2],[6,2],[7,2],[4,1],[5,1],[6,1],[7,1],[4,0],[5,0],[6,0],[7,0]]\r\n        return keymap_lut[note - 36]\r\n      }\r\n    },\r\n\r\n    hexSysexGen: function () {\r\n      if (arguments.length != 3)\r\n        return [] //Error\r\n      switch (arguments.length) {\r\n        // case 2: //MC\r\n        //   var mc = arguments[0]\r\n        //   if(this.mcTable[mc] == null)\r\n        //     return\r\n        //   var x,y = this.mcTable[mc]\r\n        //   var hex = arguments[1]\r\n        case 3: //XY\r\n          var x = arguments[0]\r\n          var y = arguments[1]\r\n          var hex = arguments[2]\r\n          break;\r\n        default:\r\n          return;\r\n      }\r\n      var r = (hex >> 16) >> 1 //7 bit color\r\n      var g = (hex & 0xFF00 >> 8) >> 1\r\n      var b = (hex & 0xFF) >> 1\r\n      return [240, 0, 2, 3, 1, 0, 18, 32, 0, 3, r, g, b, 247]\r\n    }\r\n  },\r\n  // \"Debug\":\r\n  // {\r\n  //   layout: [\r\n  //     [\"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\"],\r\n  //     [\"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\"],\r\n  //     [\"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\"],\r\n  //     [\"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\"],\r\n  //     [\"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\"],\r\n  //     [\"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\"],\r\n  //     [\"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\"],\r\n  //     [\"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\"],\r\n  //     [\"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\"],\r\n  //     [\"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\"]],\r\n\r\n  //   //Size of LED since sometimes Key can come without LED. We don't really need them since we can load the size of layout array\r\n  //   width: 10,\r\n  //   height: 10,\r\n\r\n  //   //UI related\r\n  //   padding: 25,\r\n  //   radius: 15,\r\n\r\n  //   canvas_origin: [1, 1],\r\n\r\n  //   chainKey: [[9, 1], [9, 2], [9, 3], [9, 4], [9, 5], [9, 6], [9, 7], [9, 8],\r\n  //   [8, 9], [7, 9], [6, 9], [5, 9], [4, 9], [3, 9], [2, 9], [1, 9],\r\n  //   [0, 8], [0, 7], [0, 6], [0, 5], [0, 4], [0, 3], [0, 2], [0, 1]],\r\n\r\n  //   mcTable: [\r\n  //     [1, 0], [2, 0], [3, 0], [4, 0], [5, 0], [6, 0], [7, 0], [8, 0],\r\n  //     [9, 1], [9, 2], [9, 3], [9, 4], [9, 5], [9, 6], [9, 7], [9, 8],\r\n  //     [8, 9], [7, 9], [6, 9], [5, 9], [4, 9], [3, 9], [2, 9], [1, 9],\r\n  //     [0, 8], [0, 7], [0, 6], [0, 5], [0, 4], [0, 3], [0, 2], [0, 1]],\r\n\r\n  //   lKey: [9, 0],\r\n  // },\r\n}\r\n\r\nexport default deviceConfigs;","import React, { Component } from \"react\";\r\n\r\nclass AutoplayControl extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    setInterval(() => {\r\n      if (this.props.project !== undefined && this.props.project.autoplay !== undefined) {\r\n        this.forceUpdate();\r\n      }\r\n    }, 1000 / 60);\r\n  }\r\n\r\n  render() {\r\n    var playButton = (\r\n      <button\r\n        style={{ width: \"50px\", marginRight: \"10px\" }}\r\n        onClick={this.playAutoplay}\r\n      >\r\n        Play\r\n      </button>\r\n    );\r\n    var pauseButton = (\r\n      <button\r\n        style={{ width: \"50px\", marginRight: \"10px\" }}\r\n        onClick={this.pauseAutoplay}\r\n      >\r\n        Pause\r\n      </button>\r\n    );\r\n    var stopButton = (\r\n      <button\r\n        style={{ width: \"50px\", marginRight: \"10px\" }}\r\n        onClick={this.stopAutoplay}\r\n      >\r\n        Stop\r\n      </button>\r\n    );\r\n    var buttons = [];\r\n\r\n    var statusText = \"\";\r\n    if (this.props.project == undefined || this.props.project.autoplay == undefined || this.props.project.autoplay.total === 0)\r\n      return null;\r\n    switch (this.props.project.autoplay.status) {\r\n      case \"PLAYING\":\r\n        statusText = ` - ${(\r\n          (this.props.project.autoplay.progress / this.props.project.autoplay.total) *\r\n          100\r\n        ).toFixed(2)}% completed (${this.props.project.autoplay.progress}/${\r\n          this.props.project.autoplay.total\r\n        })`;\r\n        buttons.push(pauseButton);\r\n        break;\r\n      case \"PAUSED\":\r\n        statusText = ` - ${(\r\n          (this.props.project.autoplay.progress / this.props.project.autoplay.total) *\r\n          100\r\n        ).toFixed(2)}% completed (${this.props.project.autoplay.progress}/${\r\n          this.props.project.autoplay.total\r\n        }) - Paused`;\r\n        buttons.push(playButton, stopButton);\r\n        break;\r\n      case \"STOPPED\":\r\n        buttons.push(playButton);\r\n        break;\r\n    }\r\n    return (\r\n      <div>\r\n        <text>{\"Autoplay\" + statusText}</text>\r\n        <div />\r\n        <input type=\"checkbox\" checked={this.props.project.autoplay.led} onChange={() => {this.props.project.autoplay.led = !this.props.project.autoplay.led}}/>LED\r\n        <input type=\"checkbox\" checked={this.props.project.autoplay.highlight} onChange={() => {this.props.project.autoplay.highlight = !this.props.project.autoplay.highlight}}/>Highlight\r\n        <div />\r\n        {buttons}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  playAutoplay = () => {\r\n    if (this.props.project.autoplay !== undefined) {\r\n      this.props.project.autoplay.play(\r\n        // this.props.canvas.current,\r\n        // this.props.layoutConfig.canvas_origin\r\n      );\r\n    } else {\r\n      alert(\"No project loaded!\");\r\n    }\r\n  };\r\n\r\n  stopAutoplay = () => {\r\n    if (this.props.project.autoplay !== undefined) {\r\n      this.props.project.autoplay.stop();\r\n      this.props.canvas.current.initlalizeCanvas();\r\n    } else {\r\n      alert(\"No project loaded!\");\r\n    }\r\n  };\r\n\r\n  pauseAutoplay = () => {\r\n    if (this.props.project.autoplay !== undefined) {\r\n      this.props.project.autoplay.pause();\r\n      this.props.project.stopAll();\r\n    } else {\r\n      alert(\"No project loaded!\");\r\n    }\r\n  };\r\n}\r\n\r\nexport default AutoplayControl;\r\n","import React, { Component } from \"react\";\r\nimport ProjectFileReader from \"./ProjectFileReader\";\r\nimport ProjectFile from \"../Engine/projectFile\";\r\nimport Canvas from \"./Canvas\";\r\nimport config from \"../config\";\r\nimport deviceConfigs from \"../deviceConfigs\";\r\nimport Select from \"react-select\";\r\nimport AutoplayControl from \"./AutoplayControl\";\r\nimport WebMidi from \"webmidi\";\r\nimport preval from 'preval.macro'\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  componentDidMount()\r\n  {\r\n    console.log(\"%c203 | Prismatic \\nBuild \" + preval`module.exports = new Date().toLocaleString();`, \"color: cyan;font-size:24px;\")\r\n    this.loadUserConfigPerfences()\r\n    setTimeout((this.initlization).bind(this), 0) //Hacky way to get initlization done after first render\r\n  }\r\n\r\n  initlization()\r\n  {\r\n    WebMidi.enable(err => {\r\n      if (err) {\r\n        this.onMIDIFailure()\r\n      } else {\r\n        this.onMIDISuccess();\r\n      }},\r\n      true\r\n    );\r\n\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    if (urlParams.get(\"unipack\")) {\r\n      var unipack_url = urlParams.get(\"unipack\");\r\n      this.downloadProjectFile(unipack_url);\r\n    }\r\n  }\r\n\r\n  state = {\r\n    projectFile: undefined,\r\n    statusMessage: \"No project loaded\",\r\n\r\n    midiInput: {},\r\n    midiOutput: {},\r\n\r\n    layoutConfigName: config.defaultLayout,\r\n    layoutConfig: deviceConfigs[config.defaultLayout],\r\n\r\n    inputDevice: undefined,\r\n    inputConfigName: undefined,\r\n    inputConfig: undefined,\r\n\r\n    outputDevice: undefined,\r\n    outputConfigName: undefined,\r\n    outputConfig: undefined,\r\n  };\r\n\r\n  canvas = React.createRef();\r\n\r\n  downloadProjectFile = (url) => {\r\n    alert(\"Download Unipack from \" + url)\r\n    fetch(\"https://cors-anywhere.herokuapp.com/\" + url).then\r\n    ((r => \r\n      {var file = r.blob();\r\n        console.log(file);\r\n        this.loadProjectFile(file);\r\n      }).bind(this));\r\n  };\r\n\r\n  loadProjectFile = (projectPack) => {\r\n    if(projectPack == null)\r\n      return\r\n    this.setState({statusMessage: \"Loading Unipack\"});\r\n    new ProjectFile(projectPack, this.canvas)\r\n      .then((projectFile) => {\r\n        this.setState({ projectFile: projectFile });\r\n        console.log(projectFile);\r\n        this.setState({statusMessage: `Current Project: ${this.state.projectFile.info[\"title\"]} by ${this.state.projectFile.info[\"producerName\"]}`});\r\n      })\r\n      .catch((message) => {\r\n        this.setState({statusMessage: \"Error Loading Unipack\"});\r\n        alert(\"Error Loading Unipack: \" + projectPack.name)\r\n        console.error(\"Error Loading Unipack\")\r\n        console.error(message);\r\n      });\r\n  };\r\n\r\n  onMIDISuccess(){\r\n    console.log(\"Got access your MIDI devices.\");\r\n\r\n    this.updateMidiList();\r\n\r\n    WebMidi.addListener(\"connected\", this.onMidiStateChange.bind(this))\r\n    WebMidi.addListener(\"disconnected\", this.onMidiStateChange.bind(this))\r\n\r\n    this.loadUserDevicePerfences()\r\n  };\r\n\r\n  onMidiStateChange(e) {\r\n    console.log(e);\r\n    console.log(e.port.name, e.port.type, e.port.state);\r\n    if (e.port.state === \"disconnected\") {\r\n      if (e.port.type === \"input\") {\r\n        if (\r\n          this.state.inputDevice !== undefined &&\r\n          this.state.inputDevice.name === e.port.name\r\n        ) {\r\n          this.setState({ inputDevice: undefined });\r\n          this.setState({ inputDeviceConfig: undefined });\r\n          this.setState({ inputDeviceName: undefined });\r\n        }\r\n      } else if (e.port.type === \"output\") {\r\n        if (\r\n          this.state.outputDevice !== undefined &&\r\n          this.state.outputDevice.name === e.port.name\r\n        ) {\r\n          this.setState({ outputDevice: undefined });\r\n          this.setState({ outputDeviceConfig: undefined });\r\n          this.setState({ outputDeviceName: undefined });\r\n        }\r\n      }\r\n    }\r\n    this.updateMidiList();\r\n  }\r\n  \r\n  updateMidiList() {\r\n    var midiInput = {};\r\n    console.log(\"Input\");\r\n    for (var input of WebMidi.inputs) {\r\n      console.log(input.name);\r\n      midiInput[input.name] = input\r\n    }\r\n    this.setState({ midiInput: midiInput });\r\n\r\n    var midiOutput = {};\r\n    console.log();\r\n    console.log(\"Output\");\r\n    for (var output of WebMidi.outputs) {\r\n      console.log(output.name);\r\n      midiOutput[output.name] = output\r\n    }\r\n    this.setState({ midiOutput: midiOutput });\r\n  }\r\n\r\n\r\n  onMIDIFailure() {\r\n    console.log(\"Could not access your MIDI devices.\");\r\n    alert(\r\n      \"Could not access your MIDI devices. Try use another web browser or hardware platform.\"\r\n    );\r\n  }\r\n\r\n  autoConfigPicker(deviceName, mode) {\r\n    if (deviceName !== undefined) {\r\n      for (var key in deviceConfigs) {\r\n        if (deviceConfigs[key].midiNameRegex !== undefined && deviceName.match(deviceConfigs[key].midiNameRegex) !== null) {\r\n          var config = deviceConfigs[key];\r\n          console.log(\r\n            `${\r\n              mode ? \"Output\" : \"input\"\r\n            } config has been auto assigned to ${key}`\r\n          );\r\n          switch (mode) {\r\n            case \"Input\":\r\n              this.setInputConfig({label: key, value: config})\r\n              return true;\r\n            case \"Output\":\r\n              this.setOutputConfig({label: key, value: config})\r\n              return true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    alert(\r\n      `Unable to find matching ${\r\n        mode ? \"output\" : \"input\"\r\n      } config for device ${deviceName}`\r\n    );\r\n    return false\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"main\">\r\n          <div className=\"sidebar\">\r\n            <text>203 | Prismatic (Tech Preview Demo)</text>\r\n            <div className=\"sidebarItem\" />\r\n            <text className=\"sidebarItem\">\r\n              {this.state.statusMessage}\r\n            </text>\r\n            <ProjectFileReader\r\n              loadProjectFile={this.loadProjectFile}\r\n            ></ProjectFileReader>\r\n            <div className=\"sidebarItem\" />\r\n            <text>UI Layout</text>\r\n            <Select\r\n              className=\"sidebarItem\"\r\n              options={this.prepSelectConfig(deviceConfigs, \"layout\")}\r\n              autosize={true}\r\n              value={\r\n                this.state.layoutConfigName !== undefined\r\n                  ? {\r\n                      label: this.state.layoutConfigName,\r\n                      value: this.state.layoutConfig,\r\n                    }\r\n                  : { label: \"Layout Config\", value: undefined }\r\n              }\r\n              onChange={this.setLayoutConfig.bind(this)}\r\n            />\r\n            <text>Midi Input Device</text>\r\n            <Select\r\n              className=\"sidebarItem\"\r\n              options={this.prepSelectConfig(this.state.midiInput)}\r\n              autosize={true}\r\n              value={\r\n                this.state.inputDevice !== undefined\r\n                  ? {\r\n                      label: this.state.inputDevice.name,\r\n                      value: this.state.inputDevice,\r\n                    }\r\n                  : { label: \"Input Device\", value: undefined }\r\n              }\r\n              onChange={this.setInputDevice.bind(this)}\r\n            />\r\n            <text>Midi Input Device Config</text>\r\n            <Select\r\n              className=\"sidebarItem\"\r\n              options={this.prepSelectConfig(deviceConfigs, \"keymap\")}\r\n              autosize={true}\r\n              value={\r\n                this.state.inputConfigName !== undefined\r\n                  ? {\r\n                      label: this.state.inputConfigName,\r\n                      value: this.state.inputConfig,\r\n                    }\r\n                  : { label: \"Input Device Config\", value: undefined }\r\n              }\r\n              onChange={this.setInputConfig.bind(this)}\r\n            />\r\n            <text>Midi Output Device</text>\r\n            <Select\r\n              className=\"sidebarItem\"\r\n              options={this.prepSelectConfig(this.state.midiOutput)}\r\n              autosize={true}\r\n              value={\r\n                this.state.outputDevice !== undefined\r\n                  ? {\r\n                      label: this.state.outputDevice.name,\r\n                      value: this.state.outputDevice,\r\n                    }\r\n                  : { label: \"Output Device\", value: undefined }\r\n              }\r\n              onChange={this.setOutputDevice.bind(this)}\r\n            />\r\n            <text>Midi Output Device Config</text>\r\n            <Select\r\n              className=\"sidebarItem\"\r\n              options={this.prepSelectConfig(deviceConfigs, \"keymap\")}\r\n              autosize={true}\r\n              value={\r\n                this.state.outputConfigName !== undefined\r\n                  ? {\r\n                      label: this.state.outputConfigName,\r\n                      value: this.state.outputConfig,\r\n                    }\r\n                  : { label: \"Output Device Config\", value: undefined }\r\n              }\r\n              onChange={this.setOutputConfig.bind(this)}\r\n            />\r\n            <div />\r\n            <AutoplayControl project={this.state.projectFile} canvas={this.canvas} layoutConfig={this.state.layoutConfig}/>\r\n          </div>\r\n            <Canvas\r\n              ref={this.canvas}\r\n              projectFile={this.state.projectFile}\r\n              layoutConfig={this.state.layoutConfig}\r\n              inputDevice={this.state.inputDevice}\r\n              inputConfig={this.state.inputConfig}\r\n              outputDevice={this.state.outputDevice}\r\n              outputConfig={this.state.outputConfig}\r\n            />\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  setLayoutConfig(config) {\r\n    // console.log(config)\r\n    this.setState({ layoutConfigName: config.label });\r\n    this.setState({ layoutConfig: config.value });\r\n    localStorage.setItem('perferedLayoutConfig', config.label);\r\n  }\r\n\r\n  setInputConfig(config) {\r\n    // console.log(config)\r\n    this.setState({ inputConfigName: config.label });\r\n    this.setState({ inputConfig: config.value }, this.initlizateInputDevice.bind(this));\r\n    localStorage.setItem('perferedInputConfig', config.label);\r\n  }\r\n\r\n  setOutputConfig(config) {\r\n    // console.log(config)\r\n    this.setState({ outputConfigName: config.label });\r\n    this.setState({ outputConfig: config.value }, this.initlizateOutputDevice.bind(this));\r\n    localStorage.setItem('perferedOutputConfig', config.label);\r\n  }\r\n\r\n  setInputDevice(device, autoPickConfig = true) {\r\n    this.setState({ inputDevice: device.value });\r\n    if(autoPickConfig) this.autoConfigPicker(device.value.name, \"Input\");\r\n    localStorage.setItem('perferedInputDevice', device.value.name);\r\n  }\r\n\r\n  setOutputDevice(device, autoPickConfig = true) {\r\n    // console.log(\"Output device set to \" + device.name);\r\n    this.setState({ outputDevice: device.value });\r\n    if(autoPickConfig) this.autoConfigPicker(device.value.name, \"Output\");\r\n    localStorage.setItem('perferedOutputDevice', device.value.name);\r\n  }\r\n\r\n  initlizateInputDevice()\r\n  {\r\n    if(this.state.inputConfig !== undefined && this.state.inputDevice !== undefined)\r\n    {\r\n      if(this.state.inputConfig.inputInfoMessage !== undefined)\r\n      {\r\n        for(var i in this.state.inputConfig.infoMessage)\r\n        {\r\n          alert(this.state.inputConfig.inputInfoMessage[i])\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  initlizateOutputDevice()\r\n  {\r\n    //Sysex\r\n    if(this.state.outputConfig !== undefined && this.state.outputDevice !== undefined)\r\n    {\r\n      if(this.state.outputConfig.initializationSysex !== undefined)\r\n      {\r\n        for(var i in this.state.outputConfig.initializationSysex)\r\n        {\r\n          this.state.outputDevice.sendSysex([], this.state.outputConfig.initializationSysex[i])\r\n        }\r\n      }\r\n      if(this.state.outputConfig.outputInfoMessage !== undefined)\r\n      {\r\n        for(var i in this.state.outputConfig.infoMessage)\r\n        {\r\n          alert(this.state.outputConfig.outputInfoMessage[i])\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  prepSelectConfig(config, requiredKey = undefined) {\r\n    var result = [];\r\n    for (var key in config) {\r\n      if (requiredKey === undefined || config[key][requiredKey] !== undefined) {\r\n        result.push({\r\n          label: key,\r\n          value: config[key],\r\n        });\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  loadUserConfigPerfences() {\r\n    const perferedLayoutConfig = localStorage.getItem('perferedLayoutConfig');\r\n    if(perferedLayoutConfig !== null && deviceConfigs[perferedLayoutConfig] !== undefined)\r\n    {\r\n      this.setLayoutConfig({label: perferedLayoutConfig, value:deviceConfigs[perferedLayoutConfig]})\r\n    }\r\n\r\n    const perferedInputConfig = localStorage.getItem('perferedInputConfig');\r\n    if(perferedInputConfig !== null && deviceConfigs[perferedInputConfig] !== undefined)\r\n    {\r\n      this.setInputConfig({label: perferedInputConfig, value:deviceConfigs[perferedInputConfig]})\r\n    }\r\n\r\n    const perferedOutputConfig = localStorage.getItem('perferedOutputConfig');\r\n    if(perferedOutputConfig !== null && deviceConfigs[perferedOutputConfig] !== undefined)\r\n    {\r\n      this.setOutputConfig({label: perferedOutputConfig, value:deviceConfigs[perferedOutputConfig]})\r\n    }\r\n  }\r\n\r\n  loadUserDevicePerfences() {\r\n    const perferedInputDevice = localStorage.getItem('perferedInputDevice');\r\n    if(perferedInputDevice !== null && this.state.midiInput[perferedInputDevice] !== undefined)\r\n    {\r\n      this.setInputDevice({label: perferedInputDevice, value:this.state.midiInput[perferedInputDevice]}, false)\r\n    }\r\n\r\n    const perferedOutputDevice = localStorage.getItem('perferedOutputDevice');\r\n    if(perferedOutputDevice !== null && this.state.midiOutput[perferedOutputDevice] !== undefined)\r\n    {\r\n      this.setOutputDevice({label: perferedOutputDevice, value:this.state.midiOutput[perferedOutputDevice]}, false)\r\n    }\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './styles/main.css'\r\nimport App from './Components/App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\n  ReactDOM.render(<App/>, document.getElementById(\"root\"))\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}