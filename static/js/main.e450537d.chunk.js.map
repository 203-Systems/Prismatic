{"version":3,"sources":["Components/ProjectFileReader.jsx","Components/Navbar.jsx","Engine/keyLED.js","Engine/autoPlay.js","Engine/projectFile.js","Components/Button.jsx","palette.js","Components/Canvas.jsx","Components/Spacer.jsx","config.js","deviceConfigs.js","Components/App.jsx","serviceWorker.js","index.js"],"names":["ProjectFileReader","Component","onFileChange","event","props","loadProjectFile","target","files","Fragment","type","id","name","accept","onChange","this","KeyLED","text","repeat","keyLED","undefined","play","canvas","a","i","line","command","split","length","setColorPalette","parseInt","setMCColorPalette","setColorHEX","setMCColorHEX","wait","ms","Promise","resolve","setTimeout","AutoPlay","autoplay","canvas_origin","console","log","keyOn","keyOff","chainChange","ProjectFile","file","info","keySound","unpack","projectFile","reject","JSZip","require","loadAsync","then","zip","Object","values","e","projectRoot","keySoundFile","autoplayFile","soundFiles","keyLEDFiles","endsWith","toLowerCase","includes","pop","async","slice","forEach","Array","chain","fill","map","buttonX","buttonY","entries","fileInfo","charCodeAt","warn","sound","window","URL","createObjectURL","format","Howl","src","push","Button","state","keyState","on","x","y","off","shouldUpdate","nextProps","color","render","onMouseDown","onTouchStart","className","class","style","backgroundColor","palette","Canvas","colormap","layoutConfig","width","height","keypressHistory","currentChain","midiInputHandler","midiMessage","data","indexOf2dArray","inputConfig","keymap","NaN","config","toString","arrayCalculation","offseted_x","offseted_y","soundIndex","stop","ledIndex","checkChain","chainKey","playAutoplay","initlalizeCanvas","alert","p","outputDevice","output_offseted_x","output_offseted_y","sendMidi","outputConfig","channel","mc","mcTable","device_x","device_y","hex","sendSysex","hexSysexGen","array1","array2","operation","newArray","setInterval","setState","inputDevice","setupMidiInput","newInput","oldInput","onmidimessage","mode","note","value","modeKey","charAt","substr","send","message","matrix","len","j","len2","layout","Zoff","defaultLayout","deviceConfigs","midiNameRegex","padding","radius","arguments","xy","r","g","b","App","midiInput","midiOutput","layoutConfigName","inputConfigName","outputConfigName","downloadProjectFile","url","projectPack","catch","onMIDISuccess","midiAccess","inputs","input","label","outputs","output","onstatechange","onMidiStateChange","navigator","requestMIDIAccess","onMIDIFailure","urlParams","URLSearchParams","location","search","get","unipack_url","port","splice","inputDeviceConfig","inputDeviceName","outputDeviceConfig","outputDeviceName","deviceName","key","match","options","prepDeviceConfig","autosize","placeholder","setLayoutConfig","bind","setInputDevice","setInputConfig","setOutputDevice","setOutputConfig","borderRadius","device","autoConfigPicker","result","Boolean","hostname","ReactDOM","document","getElementById","serviceWorker","ready","registration","unregister","error"],"mappings":"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AAW,IAAID,EAASyB,GAE7B3B,EAAQ,GArHS,+EAAZ,6D,KCsBIuD,E,4MAlCXC,MAAQ,CACJC,UAAU,G,EAIdC,GAAK,kBAAM,EAAK1F,MAAM0F,GAAG,EAAK1F,MAAM2F,EAAG,EAAK3F,MAAM4F,I,EAGlDC,IAAM,WACE,EAAKJ,WACL,EAAKA,UAAY,EAAKA,SACtB,EAAKzF,MAAM6F,IAAI,EAAK7F,MAAM2F,EAAG,EAAK3F,MAAM4F,K,EAKhDE,aAAe,SAACC,GAAD,OAAe,EAAK/F,MAAMgG,QAAUD,EAAUC,O,EAE7DC,OAAS,kBACL,8BACI,wBAAQC,YAAa,EAAKR,GAAIS,aAAc,EAAKT,GAAIU,UAAW,EAAKpG,MAAMqG,MAAOC,MAC9E,CACAC,gBAAiB,EAAKvG,MAAMgG,Y,YAvBvBnG,a,QCsQN2G,EAxQC,CAEd,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WC8LaC,GC5TM5G,Y,kDDInB,WAAYG,GAAQ,IAAD,8BACjB,cAAMA,IAIRwF,MAAQ,CACNkB,SAAU,IAAIrC,MAAM,EAAKrE,M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","file":"static/js/main.e450537d.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nclass ProjectFileReader extends Component {\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <input type=\"file\" id=\"projectFilePicker\" name=\"projectFile\" accept=\".zip\" onChange={this.onFileChange}/>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  onFileChange = event => { \r\n    this.props.loadProjectFile(event.target.files[0]);\r\n  };\r\n}\r\n\r\nexport default ProjectFileReader;","import React, { Component } from 'react'\r\n\r\nclass Navbar extends Component {\r\n\r\n    render = () => (\r\n        <nav className='navbar-container'>\r\n            <form className='navbar-form' /*action={TODO}*/>\r\n                <div className='navbar-input'>\r\n                    <input type='file' id='file' onChange={this.props.onFileChange}/>\r\n                </div>\r\n                <div className='navbar-project'>\r\n                    <span>Curent project: {this.props.name}</span>\r\n                </div>\r\n            </form>\r\n        </nav>\r\n    )\r\n}\r\n\r\nexport default Navbar ","class KeyLED\r\n{\r\n  keyLED = undefined\r\n  repeat = 1;\r\n  constructor(text, repeat)\r\n  {\r\n    this.keyLED = text;\r\n    this.repeat = repeat;\r\n  }\r\n\r\n  play = async(canvas) =>\r\n  {\r\n    for(var i = 0; i < this.repeat; i++)\r\n    {\r\n      for(var line of this.keyLED)\r\n      {\r\n        let command = line.split(\" \");\r\n        // console.log(command);\r\n        if(command.length < 2)\r\n          continue;\r\n\r\n        switch(command[0])\r\n        {\r\n          case 'o': //set color\r\n          case 'on': //set color\r\n            if(command.length === 5) //PaletteMode\r\n            {\r\n              if(command[1] !== \"mc\")\r\n              {\r\n                canvas.setColorPalette(parseInt(command[2] - 1), parseInt(command[1] - 1), parseInt(command[4]));\r\n              }\r\n              else\r\n              {\r\n                canvas.setMCColorPalette(parseInt(command[2] - 1), parseInt(command[4]));\r\n              }\r\n            }else if(command.length === 4)\r\n            {\r\n              if(command[1] !== \"mc\")\r\n              {\r\n                canvas.setColorHEX(parseInt(command[2] - 1), parseInt(command[1] - 1), \"#\" + command[3]);\r\n              }\r\n              else\r\n              {\r\n                canvas.setMCColorHEX(parseInt(command[2] - 1), \"#\" + command[3]);\r\n              }\r\n            }\r\n              break;\r\n          case 'f': //color off\r\n          case 'off': //color off\r\n          if(command[1] !== \"mc\")\r\n            {\r\n              canvas.setColorPalette(parseInt(command[2] - 1), parseInt(command[1] - 1), 0);\r\n            }\r\n            else\r\n            {\r\n              canvas.setMCColorPalette(parseInt(command[2] - 1), 0);\r\n            }\r\n            break;\r\n          case 'd': //wait\r\n            await this.wait(parseInt(command[1]));\r\n            break;\r\n          default:\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  wait(ms)\r\n  {\r\n    return new Promise(resolve => setTimeout(resolve, ms))\r\n  }\r\n}\r\n\r\nexport default KeyLED;","class AutoPlay\r\n{\r\n  autoplay = undefined;\r\n  constructor(text)\r\n  {\r\n    this.autoplay = text;\r\n  }\r\n\r\n  play = async(canvas, canvas_origin) =>\r\n  {\r\n    console.log(canvas_origin);\r\n    for(var line of this.autoplay)\r\n    {\r\n      console.log(line)\r\n      let command = line.split(\" \");\r\n      \r\n      if(command.length < 2)\r\n        continue;\r\n\r\n      switch(command[0])\r\n      {\r\n        case 't':\r\n        case 'o':\r\n          canvas.keyOn(parseInt(command[2]) - 1 + canvas_origin[0], parseInt(command[1]) - 1 + canvas_origin[1]);\r\n          break;\r\n        case 'f':\r\n          canvas.keyOff(parseInt(command[2]) - 1 + canvas_origin[0], parseInt(command[1]) - 1 + canvas_origin[1]);\r\n          break;\r\n        case 'd':\r\n          // console.time(\"Autoplay wait\");\r\n          await this.wait(parseInt(command[1]));\r\n          // console.timeEnd(\"Autoplay wait\");\r\n          // await this.better_wait(parseInt(parameter[1]));\r\n          break;\r\n        case 'c':\r\n        case 'chain':\r\n          canvas.chainChange(parseInt(command[1]) - 1);\r\n          break;\r\n        default:\r\n      }\r\n    }\r\n  }\r\n\r\n  wait(ms)\r\n  {\r\n    return new Promise(resolve => setTimeout(resolve, ms))\r\n  }\r\n}\r\n\r\nexport default AutoPlay;","import { Howl } from 'howler';\r\nimport KeyLED from \"./keyLED\"\r\nimport AutoPlay from \"./autoPlay\"\r\n\r\nclass ProjectFile {\r\n  info = {};\r\n  keySound = undefined;\r\n  autoplay = undefined;\r\n  keyLED = undefined;\r\n\r\n  constructor(file) {\r\n    return this.unpack(file);\r\n  }\r\n\r\n  unpack(projectFile) {\r\n    return new Promise(async (resolve, reject) => {\r\n      console.log(this.info)\r\n      let JSZip = require(\"jszip\");\r\n      let files = await JSZip.loadAsync(projectFile).then(function (zip) {\r\n        return Object.values(zip.files)\r\n      }, function (e) {\r\n        reject(\"Failed to extract selected file\");\r\n        console.log(e);\r\n        return;\r\n      });\r\n      let projectRoot = undefined;\r\n      let keySoundFile = undefined;\r\n      let autoplayFile = undefined;\r\n      let soundFiles = {};\r\n      let keyLEDFiles = {};\r\n\r\n      //Load info and categorize files\r\n      for (let file of files) {\r\n        if (!file.name.endsWith(\"/\")) //Ignore folder\r\n        {\r\n          if (file.name.toLowerCase().includes(\"sounds/\")) //Audio\r\n          {\r\n            console.log(\"Sound file: \" + file.name);\r\n            soundFiles[file.name.split(\"/\").pop()] = file;\r\n          }\r\n          else {\r\n            let text = await file.async(\"text\").then((text) => { return text = text.split(/\\r?\\n/); });\r\n            if (file.name.toLowerCase().endsWith(\"info\")) //Text\r\n            {\r\n              console.log(\"Info file: \" + file.name);\r\n              projectRoot = file.name.slice(0, -4);\r\n              console.log(\" project root: \" + projectRoot);\r\n              text.forEach(info => this.info[info.split('=')[0]] = info.split('=')[1]);\r\n              this.info[\"buttonX\"] = parseInt(this.info[\"buttonX\"]);\r\n              this.info[\"buttonY\"] = parseInt(this.info[\"buttonY\"]);\r\n              this.info[\"chain\"] = parseInt(this.info[\"chain\"]);\r\n              this.info[\"squareButton\"] = this.info[\"squareButton\"] === \"true\";\r\n              this.info[\"landscape\"] = this.info[\"landscape\"] === \"true\";\r\n              console.log(\" title: \" + this.info[\"title\"])\r\n              console.log(\" producerName: \" + this.info[\"producerName\"])\r\n              console.log(\" buttonX: \" + this.info[\"buttonX\"])\r\n              console.log(\" buttonY: \" + this.info[\"buttonY\"])\r\n              console.log(\" chain: \" + this.info[\"chain\"])\r\n              console.log(\" squareButton: \" + this.info[\"squareButton\"])\r\n              console.log(\" landscape: \" + this.info[\"landscape\"])\r\n              if (this.info[\"buttonX\"] !== 8 || this.info[\"buttonY\"] !== 8) {\r\n                reject(\"Only 8x8 Unipad project are supported\");\r\n                return;\r\n              }\r\n              if (this.info[\"chain\"] > 8) {\r\n                reject(\"Only Unipad project that has within 8 chains are supported\");\r\n                return;\r\n              }\r\n            }\r\n            else if (file.name.toLowerCase().endsWith(\"keysound\")) {\r\n              console.log(\"KeySound file: \" + file.name);\r\n              keySoundFile = text;\r\n            }\r\n            else if (file.name.toLowerCase().endsWith(\"autoplay\")) {\r\n              console.log(\"AutoPlay file: \" + file.name);\r\n              autoplayFile = text;\r\n            }\r\n            else if (file.name.toLowerCase().includes(\"keyled/\")) {\r\n              console.log(\"KeyLED file: \" + file.name);\r\n              keyLEDFiles[file.name] = text;\r\n            }\r\n            else {\r\n              console.log(\"Unknown file: \" + file.name);\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      //Initialize 4D arraies\r\n      this.keySound = new Array(this.info.chain).fill(null).map(\r\n        () => new Array(this.info.buttonX).fill(null).map(\r\n          () => new Array(this.info.buttonY).fill(null).map(\r\n            () => new Array())));\r\n\r\n      this.keyLED = new Array(this.info.chain).fill(null).map(\r\n        () => new Array(this.info.buttonX).fill(null).map(\r\n          () => new Array(this.info.buttonY).fill(null).map(\r\n            () => new Array())));\r\n\r\n      // Load KeyLED\r\n      for (var [name, text] of Object.entries(keyLEDFiles)) {\r\n        let fileInfo = name.split(\"/\").pop().split(\" \");\r\n        if (fileInfo.length === 5) {\r\n          this.keyLED[parseInt(fileInfo[0]) - 1][parseInt(fileInfo[2]) - 1][parseInt(fileInfo[1]) - 1][fileInfo[4].charCodeAt(0) - 97] = new KeyLED(text, parseInt(fileInfo[3]))\r\n        }\r\n        else if (fileInfo.length === 4) {\r\n          this.keyLED[parseInt(fileInfo[0]) - 1][parseInt(fileInfo[2]) - 1][parseInt(fileInfo[1]) - 1] = [new KeyLED(text, parseInt(fileInfo[3]))]\r\n        }\r\n        else {\r\n          console.warn(\"Unknown keyLED file name: \" + name);\r\n        }\r\n      }\r\n\r\n      //Load KeySound\r\n      for (var line of keySoundFile) {\r\n        let command = line.split(\" \");\r\n\r\n        if (command.length < 2) //For empty lines\r\n          continue;\r\n\r\n        // console.log(command);\r\n        this.keySound[parseInt(command[0]) - 1][parseInt(command[2]) - 1][parseInt(command[1]) - 1].push(\r\n          await soundFiles[command[3]].async(\"blob\").then(function (sound) {\r\n            sound = window.URL.createObjectURL(sound);\r\n            let format = command[3].split(\".\").pop()\r\n            return new Howl({ src: [sound], format: [format] });\r\n          }));\r\n      }\r\n\r\n      //Load AutoPlay\r\n      this.autoplay = new AutoPlay(autoplayFile);\r\n\r\n      resolve(this)\r\n    });\r\n  }\r\n}\r\n\r\nexport default ProjectFile;","import React, { Component } from 'react'\r\n\r\nclass Button extends Component {\r\n    state = {\r\n        keyState: false,\r\n    }\r\n\r\n    // Turns stuff on\r\n    on = () => this.props.on(this.props.x, this.props.y)\r\n    \r\n    // Turns stuff off\r\n    off = () => {\r\n        if (this.keyState) {\r\n            this.keyState = !this.keyState\r\n            this.props.off(this.props.x, this.props.y)\r\n        }\r\n    }\r\n\r\n    // Updates\r\n    shouldUpdate = (nextProps) => this.props.color !== nextProps.color\r\n\r\n    render = () => (\r\n        <div>\r\n            <button onMouseDown={this.on} onTouchStart={this.on} className={this.props.class} style={\r\n                {\r\n                backgroundColor: this.props.color,\r\n                }\r\n            }>\r\n                {/* <svg width='80' height='80'>\r\n                    <path d='M75,80H5a5,5,0,0,1-5-5V5A5,5,0,0,1,5,0H62a8.33,8.33,0,0,1,5.12,2.12L77.88,12.88A8.33,8.33,0,0,1,80,18V75A5,5,0,0,1,75,80Z' fill={this.props.color} stroke='black' stoke-width='2px'/>\r\n                </svg> */}\r\n                {/* {this.props.x.toString() + ' ' + this.props.y.toString()} */}\r\n            </button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Button;","const palette = [\r\n  //New optimized palette\r\n  \"#808080\",\t//0\r\n  \"#dadfe4\",\t//1\r\n  \"#e6e9ed\",\t//2\r\n  \"#fafafa\",\t//3\r\n  \"#f8bbd0\",\t//4\r\n  \"#ef5350\",\t//5\r\n  \"#e57373\",\t//6\r\n  \"#ef9a9a\",\t//7\r\n  \"#fff3e0\",\t//8\r\n  \"#ffa726\",\t//9\r\n  \"#ffb960\",\t//10\r\n  \"#ffcc80\",\t//11\r\n  \"#ffe0b2\",\t//12\r\n  \"#ffee58\",\t//13\r\n  \"#fff59d\",\t//14\r\n  \"#fff9c4\",\t//15\r\n  \"#dcedc8\",\t//16\r\n  \"#8bc34a\",\t//17\r\n  \"#aed581\",\t//18\r\n  \"#bfdf9f\",\t//19\r\n  \"#5ee2b0\",\t//20\r\n  \"#00ce3c\",  //21\r\n  \"#00ba43\",  //22\r\n  \"#119c3f\",\t//23\r\n  \"#57ecc1\",\t//24\r\n  \"#00e864\",  //25\r\n  \"#00e05c\",  //26\r\n  \"#00d545\",  //27\r\n  \"#7afddd\",\t//28\r\n  \"#00e4c5\",  //29\r\n  \"#00e0b2\",  //30\r\n  \"#01eec6\",  //31\r\n  \"#49efef\",\t//32\r\n  \"#00e7d8\",  //33\r\n  \"#00e5d1\",  //34\r\n  \"#01efde\",  //35\r\n  \"#6addff\",\t//36\r\n  \"#00dafe\",  //37\r\n  \"#01d6ff\",  //38\r\n  \"#08acdc\",  //39\r\n  \"#73cefe\",\t//40\r\n  \"#0d9bf7\",  //41\r\n  \"#148de4\",\t//42\r\n  \"#2a77c9\",\t//43\r\n  \"#8693ff\",\t//44\r\n  \"#2196f3\",\t//45\r\n  \"#4668f6\",\t//46\r\n  \"#4153dc\",\t//47\r\n  \"#b095ff\",\t//48\r\n  \"#8453fd\",\t//49\r\n  \"#634acd\",\t//50\r\n  \"#5749c5\",\t//51\r\n  \"#ffb7ff\",\t//52\r\n  \"#e863fb\",\t//53\r\n  \"#d655ed\",\t//54\r\n  \"#d14fe9\",\t//55\r\n  \"#fc99e3\",\t//56\r\n  \"#e736c2\",\t//57\r\n  \"#e52fbe\",\t//58\r\n  \"#e334b6\",\t//59\r\n  \"#ed353e\",\t//60\r\n  \"#ffa726\",\t//61\r\n  \"#f4df0b\",  //62\r\n  \"#66bb6a\",\t//63\r\n  \"#5cd100\",  //64\r\n  \"#00d29e\",  //65\r\n  \"#2388ff\",\t//66\r\n  \"#3669fd\",\t//67\r\n  \"#00b4d0\",  //68\r\n  \"#475cdc\",\t//69\r\n  \"#f2f3f5\",\t//70\r\n  \"#eef0f2\",\t//71\r\n  \"#f72737\",\t//72\r\n  \"#d2ea7b\",\t//73\r\n  \"#c8df10\",\t//74\r\n  \"#7fe422\",\t//75\r\n  \"#00c931\",  //76\r\n  \"#00d7a6\",\t//77\r\n  \"#00d8fc\",  //78\r\n  \"#0b9bfc\",  //79\r\n  \"#585cf5\",\t//80\r\n  \"#ac59f0\",\t//81\r\n  \"#d980dc\",\t//82\r\n  \"#b8814a\",\t//83\r\n  \"#ff9800\",  //84\r\n  \"#abdf22\",\t//85\r\n  \"#9ee154\",\t//86\r\n  \"#66bb6a\",\t//87\r\n  \"#3bda47\",\t//88\r\n  \"#6fdeb9\",\t//89\r\n  \"#27dbda\",\t//90\r\n  \"#9cc8fd\",\t//91\r\n  \"#79b8f7\",\t//92\r\n  \"#afafef\",\t//93\r\n  \"#d580eb\",\t//94\r\n  \"#f74fca\",\t//95\r\n  \"#ea8a1f\",\t//96\r\n  \"#dbdb08\",  //97\r\n  \"#9cd60d\",  //98\r\n  \"#f3d335\",\t//99\r\n  \"#c8af41\",\t//100\r\n  \"#00ca69\",  //101\r\n  \"#24d2b0\",\t//102\r\n  \"#757ebe\",\t//103\r\n  \"#5388db\",\t//104\r\n  \"#e5c5a6\",\t//105\r\n  \"#e93b3b\",\t//106\r\n  \"#f9a2a1\",\t//107\r\n  \"#ed9c65\",\t//108\r\n  \"#e1ca72\",\t//109\r\n  \"#b8da78\",\t//110\r\n  \"#98d52c\",\t//111\r\n  \"#626cbd\",\t//112\r\n  \"#cac8a0\",\t//113\r\n  \"#90d4c2\",\t//114\r\n  \"#ceddfe\",\t//115\r\n  \"#beccf7\",\t//116\r\n  \"#d2d7de\",\t//117\r\n  \"#dadfe4\",\t//118\r\n  \"#e6e9ed\",\t//119\r\n  \"#fe1624\",\t//120\r\n  \"#cd2724\",\t//121\r\n  \"#9ccc65\",\t//122\r\n  \"#009c1b\",  //123\r\n  \"#ffff00\",  //124\r\n  \"#beb212\",\t//125\r\n  \"#f5d01d\",\t//126\r\n  \"#e37829\",\t//127\r\n];\r\n\r\n// const palette = [\r\n//   //LaunchpadXcolorPalette\r\n//   \"#000000\", //0\r\n//   \"#3F3F3F\", //1\r\n//   \"#7F7F7F\", //2\r\n//   \"#FFFFFF\", //3\r\n//   \"#FF3F3F\", //4\r\n//   \"#FF0000\", //5\r\n//   \"#7F0000\", //6\r\n//   \"#3F0000\", //7\r\n//   \"#FFBF6F\", //8\r\n//   \"#FF3F00\", //9\r\n//   \"#7F1F00\", //10\r\n//   \"#3F0F00\", //11\r\n//   \"#FFAF2F\", //12\r\n//   \"#FFFF00\", //13\r\n//   \"#7F7F00\", //14\r\n//   \"#3F3F00\", //15\r\n//   \"#7FFF2F\", //16\r\n//   \"#4FFF00\", //17\r\n//   \"#2F7F00\", //18\r\n//   \"#173F00\", //19\r\n//   \"#4FFF3F\", //20\r\n//   \"#00FF00\", //21\r\n//   \"#007F00\", //22\r\n//   \"#003F00\", //23\r\n//   \"#4FFF4F\", //24\r\n//   \"#00FF1F\", //25\r\n//   \"#007F0F\", //26\r\n//   \"#003F07\", //27\r\n//   \"#4FFF5F\", //28\r\n//   \"#00FF5F\", //29\r\n//   \"#007F2F\", //30\r\n//   \"#003F17\", //31\r\n//   \"#4FFFBF\", //32\r\n//   \"#00FF9F\", //33\r\n//   \"#007F4F\", //34\r\n//   \"#003F27\", //35\r\n//   \"#4FBFFF\", //36\r\n//   \"#00AFFF\", //37\r\n//   \"#00577F\", //38\r\n//   \"#002F3F\", //39\r\n//   \"#4F7FFF\", //40\r\n//   \"#0057FF\", //41\r\n//   \"#002F7F\", //42\r\n//   \"#00173F\", //43\r\n//   \"#2F1FFF\", //44\r\n//   \"#0000FF\", //45\r\n//   \"#00007F\", //46\r\n//   \"#00003F\", //47\r\n//   \"#5F3FFF\", //48\r\n//   \"#2F00FF\", //49\r\n//   \"#17007F\", //50\r\n//   \"#0F003F\", //51\r\n//   \"#FF3FFF\", //52\r\n//   \"#FF00FF\", //53\r\n//   \"#7F007F\", //54\r\n//   \"#3F003F\", //55\r\n//   \"#FF3F6F\", //56\r\n//   \"#FF004F\", //57\r\n//   \"#7F002F\", //58\r\n//   \"#3F001F\", //59\r\n//   \"#FF0F00\", //60\r\n//   \"#9F3F00\", //61\r\n//   \"#7F4F00\", //62\r\n//   \"#2F2F00\", //63\r\n//   \"#003F00\", //64\r\n//   \"#003F1F\", //65\r\n//   \"#001F6F\", //66\r\n//   \"#0000FF\", //67\r\n//   \"#003F3F\", //68\r\n//   \"#1F00BF\", //69\r\n//   \"#5F3F4F\", //70\r\n//   \"#1F0F17\", //71\r\n//   \"#FF0000\", //72\r\n//   \"#BFFF2F\", //73\r\n//   \"#AFEF00\", //74\r\n//   \"#5FFF00\", //75\r\n//   \"#0F7F00\", //76\r\n//   \"#00FF5F\", //77\r\n//   \"#009FFF\", //78\r\n//   \"#002FFF\", //79\r\n//   \"#1F00FF\", //80\r\n//   \"#5F00EF\", //81\r\n//   \"#AF1F7F\", //82\r\n//   \"#2F0F00\", //83\r\n//   \"#FF2F00\", //84\r\n//   \"#7FDF00\", //85\r\n//   \"#6FFF1F\", //86\r\n//   \"#00FF00\", //87\r\n//   \"#3FFF2F\", //88\r\n//   \"#5FEF6F\", //89\r\n//   \"#3FFFCF\", //90\r\n//   \"#5F8FFF\", //91\r\n//   \"#2F4FCF\", //92\r\n//   \"#6F4FDF\", //93\r\n//   \"#DF1FFF\", //94\r\n//   \"#FF005F\", //95\r\n//   \"#FF4F00\", //96\r\n//   \"#BFAF00\", //97\r\n//   \"#8FFF00\", //98\r\n//   \"#7F5F00\", //99\r\n//   \"#3F2F00\", //100\r\n//   \"#00470F\", //101\r\n//   \"#0F4F1F\", //102\r\n//   \"#17172F\", //103\r\n//   \"#171F5F\", //104\r\n//   \"#5F3717\", //105\r\n//   \"#7F0000\", //106\r\n//   \"#DF3F2F\", //107\r\n//   \"#DF470F\", //108\r\n//   \"#FFBF1F\", //109\r\n//   \"#9FDF2F\", //110\r\n//   \"#6FAF0F\", //111\r\n//   \"#17172F\", //112\r\n//   \"#DFDF6F\", //113\r\n//   \"#7FEF8F\", //114\r\n//   \"#9F9FFF\", //115\r\n//   \"#8F6FFF\", //116\r\n//   \"#3F3F3F\", //117\r\n//   \"#6F6F6F\", //118\r\n//   \"#DFFFFF\", //119\r\n//   \"#9F0000\", //120\r\n//   \"#370000\", //121\r\n//   \"#17CF00\", //122\r\n//   \"#003F00\", //123\r\n//   \"#BFAF00\", //124\r\n//   \"#3F2F00\", //125\r\n//   \"#AF4F00\", //126\r\n//   \"#4F0F00\"  //127\r\n// ];\r\n\r\nexport default palette","import React, { Component } from \"react\";\r\n// import ProjectFileReader from './Components/projectFileReader';\r\nimport Button from './Button'\r\nimport palette from '../palette'\r\nimport Spacer from './Spacer'\r\n\r\nclass Canvas extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    setInterval(() => {this.setState({colormap: this.state.colormap})}, 1000/60);\r\n  }\r\n\r\n  state = {  \r\n    colormap: new Array(this.props.layoutConfig.width).fill(null).map(\r\n      () => new Array(this.props.layoutConfig.height).fill(palette[0])),\r\n  };\r\n\r\n  keypressHistory = new Array(8).fill(null).map(\r\n              () => new Array(this.props.layoutConfig.width).fill(null).map(\r\n              () => new Array(this.props.layoutConfig.height).fill(0)));\r\n  currentChain = 0;\r\n  // overlay = \"#808080\";\r\n\r\n  // shouldUpdate = (nextProps) => !Object.is(this.props.layoutConfig, nextProps.layoutConfig);\r\n\r\n  shouldComponentUpdate(nextProps) {\r\n    if (nextProps.layoutConfig !== this.props.layoutConfig) {\r\n      this.initlalizeCanvas(nextProps.layoutConfig);\r\n    }\r\n\r\n    if (nextProps.inputDevice !== this.props.inputDevice /* || prevProps.inputConfig !== this.props.inputConfig */ ) {\r\n      this.setupMidiInput(nextProps.inputDevice, this.props.inputDevice);\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  initlalizeCanvas(config = this.props.layoutConfig)\r\n  {\r\n    this.state.colormap = new Array(config.width).fill(null).map(\r\n      () => new Array(config.height).fill(palette[0])) //I write directly into state because that takes so long it will be complete by the time render is over and throw an error already. Since shouldComponentUpdate will enforce update I will give it a pass\r\n    // this.setState({colormap: this.state.colormap})\r\n    this.keypressHistory = new Array(8).fill(null).map(\r\n      () => new Array(config.width).fill(null).map(\r\n      () => new Array(config.height).fill(0)));\r\n    this.currentChain = 0;\r\n  }\r\n\r\n  setupMidiInput(newInput, oldInput)\r\n  {\r\n    // console.log([newInput, oldInput])\r\n    if(oldInput !== undefined)\r\n      oldInput.onmidimessage = null;\r\n    if(newInput !== undefined)\r\n      newInput.onmidimessage = this.midiInputHandler;\r\n  } \r\n\r\n  midiInputHandler = (midiMessage) =>\r\n  {\r\n    console.log(midiMessage.data);\r\n    let [y,x] = this.indexOf2dArray(midiMessage.data[1], this.props.inputConfig.keymap);\r\n    if(x !== NaN && y !== NaN)\r\n    {\r\n      // let [offseted_x, offseted_y] = this.arrayCalculation([x, y], this.props.inputConfig.canvas_origin, \"-\");\r\n      switch(midiMessage.data[0])\r\n      {\r\n        case 144:\r\n          if(midiMessage.data[2] != 0)\r\n          {\r\n            this.keyOn(x, y, this.props.inputConfig);\r\n            break;\r\n          }\r\n        case 128:\r\n          this.keyOff(x, y, this.props.inputConfig);\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  keyOn = (x, y, config = this.props.layoutConfig) => \r\n  {\r\n    console.log(\"Note On - \" + x.toString() + ' ' + y.toString());\r\n\r\n    let [offseted_x, offseted_y] = this.arrayCalculation([x, y], config.canvas_origin, \"-\");\r\n    console.log([x, y, offseted_x, offseted_y])\r\n\r\n    if(this.props.projectFile !== undefined)\r\n    {\r\n      //Sound\r\n      if(this.props.projectFile.keySound !== undefined && this.props.projectFile.keySound[this.currentChain] !== undefined && this.props.projectFile.keySound[this.currentChain][offseted_x] !== undefined && this.props.projectFile.keySound[this.currentChain][offseted_x][offseted_y] !== undefined && this.props.projectFile.keySound[this.currentChain][offseted_x][offseted_y].length > 0)\r\n      {\r\n        let soundIndex = this.keypressHistory[this.currentChain][x][y] % this.props.projectFile.keySound[this.currentChain][offseted_x][offseted_y].length;\r\n        // console.log('Play sound ${this.currentChain} ${offseted_x}')\r\n        this.props.projectFile.keySound[this.currentChain][offseted_x][offseted_y][soundIndex].stop();\r\n        this.props.projectFile.keySound[this.currentChain][offseted_x][offseted_y][soundIndex].play();\r\n      }\r\n\r\n      //LED\r\n      if(this.props.projectFile.keyLED !== undefined && this.props.projectFile.keyLED[this.currentChain] !== undefined && this.props.projectFile.keyLED[this.currentChain][offseted_x] !== undefined && this.props.projectFile.keyLED[this.currentChain][offseted_x][offseted_y] !== undefined && this.props.projectFile.keyLED[this.currentChain][offseted_x][offseted_y].length > 0)\r\n      {\r\n        let ledIndex = this.keypressHistory[this.currentChain][x][y] % this.props.projectFile.keyLED[this.currentChain][offseted_x][offseted_y].length;\r\n        this.props.projectFile.keyLED[this.currentChain][offseted_x][offseted_y][ledIndex].play(this);\r\n      }\r\n\r\n      //Update History\r\n      if(this.keypressHistory[this.currentChain][x] != undefined && this.keypressHistory[this.currentChain][x][y] != undefined)\r\n        this.keypressHistory[this.currentChain][x][y] += 1;\r\n\r\n      //Chain Change\r\n      this.checkChain(x, y, config);\r\n    }\r\n  }\r\n\r\n  checkChain = (x, y, config) =>\r\n  {\r\n    for(var i = 0; i < config.chainKey.length; i++) {\r\n      if(config.chainKey[i][0] === x && config.chainKey[i][1] === y)\r\n        this.chainChange(i);\r\n    }\r\n  }\r\n\r\n  keyOff = (x, y) => \r\n  {\r\n    console.log(\"Note Off - \" + x.toString() + ' ' + y.toString());\r\n  }\r\n\r\n  playAutoplay = () =>\r\n  {\r\n    if(this.props.projectFile !== undefined && this.props.projectFile.autoplay !== undefined)\r\n    {\r\n      this.initlalizeCanvas();\r\n\r\n      this.props.projectFile.autoplay.play(this, this.props.layoutConfig.canvas_origin) \r\n    }\r\n    else\r\n    {\r\n      alert(\"No project loaded!\")\r\n    }\r\n  }\r\n\r\n  chainChange = (chain) =>\r\n  {\r\n    console.log(\"Chain Changed to \" + (chain + 1));\r\n    this.currentChain = chain;\r\n  }\r\n\r\n  setColorPalette = (x, y, p) =>\r\n  {\r\n    let [offseted_x, offseted_y] = this.arrayCalculation([x, y], this.props.layoutConfig.canvas_origin, \"+\");\r\n    this.state.colormap[offseted_x][offseted_y] = palette[p]\r\n    if(this.props.outputDevice != undefined)\r\n    {\r\n      let [output_offseted_x, output_offseted_y] = this.arrayCalculation([x, y], this.props.inputConfig.canvas_origin, \"+\");\r\n      this.sendMidi(\"NoteOn\", this.props.outputConfig.channel, this.props.outputConfig.keymap[output_offseted_y][output_offseted_x], p)\r\n    }\r\n  }\r\n\r\n  setMCColorPalette = (mc, p) =>\r\n  {\r\n    if(this.props.layoutConfig.mcTable[mc] != null)\r\n    {\r\n      let [x, y] = this.props.layoutConfig.mcTable[mc];\r\n      this.state.colormap[x][y] = palette[p]\r\n      if(this.props.outputDevice != undefined && this.props.outputConfig.mcTable[mc] != undefined)\r\n      {\r\n        let [device_x, device_y] = this.props.outputConfig.mcTable[mc];\r\n        this.sendMidi(\"NoteOn\", this.props.outputConfig.channel, this.props.outputConfig.keymap[device_y][device_x], p)\r\n      }\r\n    }\r\n  }\r\n\r\n  setColorHEX = (x, y, hex) =>\r\n  {\r\n    let [offseted_x, offseted_y] = this.arrayCalculation([x, y], this.props.layoutConfig.canvas_origin, \"+\");\r\n    this.state.colormap[offseted_x][offseted_y] = hex\r\n    this.sendSysex(this.props.outputConfig.hexSysexGen(x, y, hex))\r\n  }\r\n\r\n  setMCColorHEX = (mc, hex) =>\r\n  {\r\n    if(this.props.layoutConfig.mcTable[mc] != null)\r\n    {\r\n      let [x, y] = this.props.layoutConfig.mcTable[mc];\r\n      this.state.colormap[x][y] = hex\r\n    }\r\n    if(this.props.outputConfig.mcTable[mc] != null)\r\n    {\r\n      this.sendSysex(this.props.outputConfig.hexSysexGen(mc, hex))\r\n    }\r\n  }\r\n\r\n  sendMidi(mode, channel, note, value)\r\n  {\r\n    if(typeof(note) === \"string\")\r\n    {\r\n      let modeKey = note.charAt(0);\r\n      note = parseInt(note.substr(1))\r\n      switch(modeKey)\r\n      {\r\n        case \"C\":\r\n          mode = \"CC\"\r\n          break;\r\n        default:\r\n          return;\r\n      }\r\n    } \r\n    switch(mode)\r\n    {\r\n      case \"NoteOn\":\r\n        this.props.outputDevice.send([0x90 + channel - 1, note, value])\r\n          break;\r\n      case \"NoteOff\":\r\n        this.props.outputDevice.send([0x80 + channel - 1, note, value])\r\n        break;\r\n      case \"CC\":\r\n        this.props.outputDevice.send([0xB0 + channel - 1, note, value])\r\n        break;\r\n    }\r\n  }\r\n\r\n  sendSysex(message)\r\n  {\r\n    this.props.outputDevice.send(message)\r\n  }\r\n\r\n  // // Overlays a color\r\n  // colorOverlay = (hex, overlay) => {\r\n  //   let [r, g, b] = this.toRGB(hex)\r\n  //   let [r0, g0, b0] = this.toRGB(overlay)\r\n  //   r = Math.round(r * (255 - r0) / 255 + r0);\r\n  //   g = Math.round(g * (255 - g0) / 255 + g0);\r\n  //   b = Math.round(b * (255 - b0) / 255 + b0);\r\n  //   return this.toHEX(r, g, b)\r\n  // }\r\n\r\n  // // Converts a CHAD HEX color to a beta RGB color\r\n  // toRGB = (hex) => {\r\n  //   const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex)\r\n  //   return [parseInt(result[1], 16),\r\n  //           parseInt(result[2], 16),\r\n  //           parseInt(result[3], 16)]\r\n  // }\r\n\r\n  // // Converts a beta RGB color to a CHAD HEX color\r\n  // toHEX = (r, g, b) => '#' + this.componentToHex(r) + this.componentToHex(g) + this.componentToHex(b)\r\n\r\n  // // Converts the value of a given component to CHAD HEX\r\n  // componentToHex = (component) => {\r\n  //   const hex = component.toString(16)\r\n  //   return hex.length === 1 ? '0' + hex : hex\r\n  // }\r\n\r\n  arrayCalculation = (array1, array2, operation) =>\r\n  {\r\n    let newArray = [];\r\n    if(array1.length === array2.length)\r\n    {\r\n      switch(operation)\r\n      {\r\n        case \"+\":\r\n          for(var i = 0; i < array1.length; i++)\r\n          {\r\n            newArray.push(array1[i] + array2[i]);\r\n          }\r\n          return newArray;\r\n        case \"-\":\r\n          for(var i = 0; i < array1.length; i++)\r\n          {\r\n            newArray.push(array1[i] - array2[i]);\r\n          }\r\n          return newArray;\r\n      }\r\n    }\r\n  }\r\n\r\n  indexOf2dArray(id, matrix) {\r\n    for (var i=0, len=matrix.length; i<len; i++) {\r\n      for (var j=0, len2=matrix[i].length; j<len2; j++) {\r\n        if (matrix[i][j] === id) { return [i, j]; }\r\n      }\r\n    }\r\n    return [NaN, NaN];\r\n  }\r\n  \r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        {this.props.layoutConfig.layout.map((value, y) => {\r\n          return (\r\n            <div className='button-row'>\r\n              {this.props.layoutConfig.layout[y].map((value, x) => {\r\n                switch (value) {\r\n                  case \"◻\":\r\n                    return <Button x={x} y={y} class=\"LEDButtonSquare\"color={this.state.colormap[x][y]} on={this.keyOn} off={this.keyOff}/>;\r\n                  case \"⬤\":\r\n                    return <Button x={x} y={y} class=\"LEDButtonCircle75\" \r\n                    color={this.state.colormap[x][y]} \r\n                    on={this.keyOn} off={this.keyOff}/>;\r\n                  case \"◪\":\r\n                  case \"⬕\":\r\n                  case \"⬔\":\r\n                  case \"◩\":\r\n                    return <Button x={x} y={y} class=\"LEDButtonSquare\" color={this.state.colormap[x][y]} on={this.keyOn} Zoff={this.keyOff}/>;\r\n                  default:\r\n                    return <div key={\"Spacer \" + x.toString() + \"-\" + y.toString()} style={{\r\n                      width: '96px'\r\n                    }}></div>;\r\n                }\r\n              })}\r\n            </div>\r\n          );\r\n        })}\r\n      {/* <button onClick={this.playAutoplay}>Auto Play</button> */}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Canvas","import React, { Component } from 'react'\r\nimport Pallete from '../palette'\r\n\r\nclass Spacer extends Component {\r\n    state = {}\r\n\r\n    setColor = (velocity) => {\r\n    }\r\n\r\n    render = () => (\r\n        <div>\r\n            <Spacer/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Spacer","const config = {\r\n  defaultLayout: \"Launchpad Pro\",\r\n}\r\n\r\nexport default config;","const deviceConfigs = {\r\n  \"Launchpad Pro\":\r\n  {\r\n    channel: 1,\r\n    midiNameRegex: \"^Launchpad Pro\",\r\n    \r\n    layout: [\r\n      [\"　\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"　\"],\r\n      [\"⬤\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"⬤\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"⬤\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"⬤\", \"◻\", \"◻\", \"◻\", \"◪\", \"⬕\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"⬤\", \"◻\", \"◻\", \"◻\", \"⬔\", \"◩\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"⬤\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"⬤\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"⬤\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"　\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"　\"]],\r\n\r\n    keymap: [\r\n      [null, 28, 29, 30, 31, 32, 33, 34, 35, null],\r\n      [108, 64, 65, 66, 67, 96, 97, 98, 99, 100], \r\n      [109, 60, 61, 62, 63, 92, 93, 94, 95, 101],\r\n      [110, 56, 57, 58, 59, 88, 89, 90, 91, 102],\r\n      [111, 52, 53, 54, 55, 84, 85, 86, 87, 103],\r\n      [112, 48, 49, 50, 51, 80, 81, 82, 83, 104],\r\n      [113, 44, 45, 46, 47, 76, 77, 78, 79, 105],\r\n      [114, 40, 41, 42, 43, 72, 73, 74, 75, 106],\r\n      [115, 36, 37, 38, 39, 68, 69, 70, 71, 107],\r\n      [null, 116, 117, 118, 119, 120, 121, 122, 123, null]],\r\n\r\n    //Size of LED since sometimes Key can come without LED. We don't really need them since we can load the size of layout array\r\n    width: 10, \r\n    height: 10,\r\n\r\n    //UI related\r\n    padding: 25,\r\n    radius: 15,\r\n    \r\n    canvas_origin: [1,1],\r\n\r\n    chainKey: [[9,1], [9,2], [9,3], [9,4], [9,5], [9,6], [9,7], [9,8]],\r\n\r\n    mcTable: [\r\n      [1,0], [2,0], [3,0], [4,0], [5,0], [6,0], [7,0], [8,0],\r\n      [9,1], [9,2], [9,3], [9,4], [9,5], [9,6], [9,7], [9,8],\r\n      [8,9], [7,9], [6,9], [5,9], [4,9], [3,9], [2,9], [1,9],\r\n      [0,8], [0,7], [0,6], [0,5], [0,4], [0,3], [0,2], [0,1]],\r\n\r\n    hexSysexGen: function()\r\n    {\r\n      if(arguments.length != 2 && arguments.length != 3)\r\n        return [] //Error\r\n      switch(arguments.length)\r\n      {\r\n        case 2: //MC\r\n          var mc = arguments[0]\r\n          if(this.mcTable[mc] == null)\r\n            return []\r\n          var x,y = this.mcTable[mc]\r\n          var hex = arguments[1]\r\n        case 3: //XY\r\n          var x = arguments[0] + 1\r\n          var y = arguments[1] + 1\r\n          var hex = arguments[2]\r\n        default:\r\n          var xy = x * 10 + y\r\n          var r = (hex >> 16) >> 2 //6 bit color\r\n          var g = (hex & 0xFF00 >> 8) >> 2\r\n          var b = (hex & 0xFF) >> 2\r\n          return [240, 0, 32, 41, 2, 24, 11, xy, r, g, b, 247]\r\n      }\r\n    }\r\n  },\r\n  \"Launchpad MK2\":\r\n  {\r\n    channel: 1,\r\n    midiNameRegex: \"^Launchpad MK2\",\r\n    \r\n    layout: [\r\n      [\"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"　\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◪\", \"⬕\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"◻\", \"◻\", \"◻\", \"⬔\", \"◩\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"]],\r\n\r\n    keymap: [\r\n      [\"C104\", \"C105\", \"C106\", \"C107\", \"C108\", \"C109\", \"C110\", \"C111\", null],\r\n      [81, 82, 83, 84, 85, 86, 87, 88, 89],  \r\n      [71, 72, 73, 74, 75, 76, 77, 78, 79], \r\n      [61, 62, 63, 64, 65, 66, 67, 68, 69], \r\n      [51, 52, 53, 54, 55, 56, 57, 58, 59], \r\n      [41, 42, 43, 44, 45, 46, 47, 48, 49], \r\n      [31, 32, 33, 34, 35, 36, 37, 38, 39], \r\n      [21, 22, 23, 24, 25, 26, 27, 28, 29], \r\n      [11, 12, 13, 14, 15, 16, 17, 18, 19]],\r\n\r\n    width: 9, \r\n    height: 9,\r\n\r\n    //UI related\r\n    padding: 25,\r\n    radius: 15,\r\n    \r\n    canvas_origin: [0,1],\r\n\r\n    chainKey: [[8,1], [8,2], [8,3], [8,4], [8,5], [8,6], [8,7], [8,8]],\r\n\r\n    mcTable: [\r\n      [0,0], [1,0], [2,0], [3,0], [4,0], [5,0], [6,0], [7,0],\r\n      [8,1], [8,2], [8,3], [8,4], [8,5], [8,6], [8,7], [8,8],\r\n      null, null, null, null, null, null, null, null,\r\n      null, null, null, null, null, null, null, null,],\r\n\r\n    hexSysexGen: function()\r\n    {\r\n      if(arguments.length != 2 && arguments.length != 3)\r\n        return [] //Error\r\n      switch(arguments.length)\r\n      {\r\n        case 2: //MC\r\n          var mc = arguments[0]\r\n          if(this.mcTable[mc] == null)\r\n            return []\r\n          var x,y = this.mcTable[mc]\r\n          var hex = arguments[1]\r\n        case 3: //XY\r\n          var x = arguments[0] + 1\r\n          var y = arguments[1] + 1\r\n          var hex = arguments[2]\r\n        default:\r\n          var xy = x * 10 + y\r\n          var r = (hex >> 16) >> 2 //6 bit color\r\n          var g = (hex & 0xFF00 >> 8) >> 2\r\n          var b = (hex & 0xFF) >> 2\r\n          return [240, 0, 32, 41, 2, 24, 11, xy, r, g, b, 247]\r\n      }\r\n    }\r\n  },\r\n  //Launchpad X\r\n  // {\r\n  //   name: \"Launchpad X\",\r\n    \r\n  //   layout: [\r\n  //     [\"◼\", \"◼\", \"◼\", \"◼\", \"◼\", \"◼\", \"◼\", \"◼\", \"◻\"],\r\n  //     [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◼\"],\r\n  //     [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◼\"],\r\n  //     [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◼\"],\r\n  //     [\"◻\", \"◻\", \"◻\", \"◪\", \"⬕\", \"◻\", \"◻\", \"◻\", \"◼\"],\r\n  //     [\"◻\", \"◻\", \"◻\", \"⬔\", \"◩\", \"◻\", \"◻\", \"◻\", \"◼\"],\r\n  //     [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◼\"],\r\n  //     [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◼\"],\r\n  //     [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◼\"]],\r\n\r\n  //   keymap: [\r\n  //     [108, 109, 110, 111, 112, 113, 114, 115, null],\r\n  //     [64, 65, 66, 67, 96, 97, 98, 99, 100], \r\n  //     [60, 61, 62, 63, 92, 93, 94, 95, 101],\r\n  //     [56, 57, 58, 59, 88, 89, 90, 91, 102],\r\n  //     [52, 53, 54, 55, 84, 85, 86, 87, 103],\r\n  //     [48, 49, 50, 51, 80, 81, 82, 83, 104],\r\n  //     [44, 45, 46, 47, 76, 77, 78, 79, 105],\r\n  //     [40, 41, 42, 43, 72, 73, 74, 75, 106],\r\n  //     [36, 37, 38, 39, 68, 69, 70, 71, 107]],\r\n\r\n  //   width: 9, \r\n  //   height: 9,\r\n    \r\n  //   canvas_origin: [0,1],\r\n\r\n  //   chainKey: [[8,1], [8,2], [8,3], [8,4], [8,5], [8,6], [8,7], [8,8]],\r\n  //   mcTable: [\r\n  //     [8,9], [1,9], [2,9], [3,9], [4,9], [5,9], [6,9], [7,9],\r\n  //     [9,0], [9,1], [9,2], [9,3], [9,4], [9,5], [9,6], [9,7],\r\n  //     null, null, null, null, null, null, null, null,\r\n  //     null, null, null, null, null, null, null, null,],\r\n  // },\r\n  \"Matrix\":\r\n  {\r\n    channel: 2,\r\n    midiNameRegex: \"^Matrix\",\r\n    \r\n    layout: [\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◪\", \"⬕\", \"◻\", \"◻\", \"◻\"],\r\n      [\"◻\", \"◻\", \"◻\", \"⬔\", \"◩\", \"◻\", \"◻\", \"◻\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\"]],\r\n\r\n    keymap: [\r\n      [64, 65, 66, 67, 96, 97, 98, 99], \r\n      [60, 61, 62, 63, 92, 93, 94, 95],\r\n      [56, 57, 58, 59, 88, 89, 90, 91],\r\n      [52, 53, 54, 55, 84, 85, 86, 87],\r\n      [48, 49, 50, 51, 80, 81, 82, 83],\r\n      [44, 45, 46, 47, 76, 77, 78, 79],\r\n      [40, 41, 42, 43, 72, 73, 74, 75],\r\n      [36, 37, 38, 39, 68, 69, 70, 71],\r\n      [100, 101, 102, 103, 104, 105, 106, 107]],\r\n\r\n    width: 8, \r\n    height: 8,\r\n\r\n    //UI related\r\n    padding: 20,\r\n    radius: 15,\r\n    \r\n    canvas_origin: [0,0],\r\n\r\n    chainKey: [[0,8], [1,8], [2,8], [3,8], [4,8], [5,8], [6,8], [7,8]],\r\n\r\n    mcTable: [\r\n      null, null, null, null, null, null, null, null,\r\n      null, null, null, null, null, null, null, null,\r\n      null, null, null, null, null, null, null, null,\r\n      null, null, null, null, null, null, null, null,],\r\n\r\n    hexSysexGen: function()\r\n      {\r\n        if(arguments.length != 3)\r\n          return [] //Error\r\n        switch(arguments.length)\r\n        {\r\n          // case 2: //MC\r\n          //   var mc = arguments[0]\r\n          //   if(this.mcTable[mc] == null)\r\n          //     return []\r\n          //   var x,y = this.mcTable[mc]\r\n          //   var hex = arguments[1]\r\n          case 3: //XY\r\n            var x = arguments[0]\r\n            var y = arguments[1]\r\n            var hex = arguments[2]\r\n          default:\r\n            var r = (hex >> 16) >> 1 //7 bit color\r\n            var g = (hex & 0xFF00 >> 8) >> 1\r\n            var b = (hex & 0xFF) >> 1\r\n            return [240, 0, 2, 3, 1, 0, 18, 32, 0, 3, r, g, b, 247]\r\n        }\r\n      }\r\n  },\r\n}\r\n\r\nexport default deviceConfigs;","import React, { Component } from \"react\";\r\nimport Navbar from \"./Navbar\";\r\nimport ProjectFileReader from \"./ProjectFileReader\";\r\nimport ProjectFile from \"../Engine/projectFile\";\r\nimport Button from \"./Button\";\r\nimport Canvas from \"./Canvas\";\r\nimport config from \"../config\";\r\nimport deviceConfigs from \"../deviceConfigs\";\r\nimport Select from 'react-select';\r\n// import download from \"downloadjs\";\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    if(navigator.requestMIDIAccess != undefined)\r\n    {\r\n      navigator.requestMIDIAccess().then(this.onMIDISuccess, this.onMIDIFailure);\r\n    }\r\n    else\r\n    {\r\n      alert(\"Your device doesn't support WebMidi\")\r\n    }\r\n    \r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    if(urlParams.get('unipack'))\r\n    {\r\n      var unipack_url = urlParams.get('unipack');\r\n      this.downloadProjectFile(unipack_url)\r\n    }\r\n  }\r\n\r\n  state = {\r\n    projectFile: undefined,\r\n\r\n    midiInput: [],\r\n    midiOutput: [],\r\n\r\n    layoutConfigName: config.defaultLayout,\r\n    layoutConfig: deviceConfigs[config.defaultLayout],\r\n\r\n    inputDevice: undefined,\r\n    inputConfigName: undefined,\r\n    inputConfig: undefined,\r\n\r\n    outputDevice: undefined,\r\n    outputConfigName: undefined,\r\n    outputConfig: undefined,\r\n  };\r\n\r\n  downloadProjectFile = (url) => { //Scrapped for now because Browser doesn't allow cross origon fetching. Need intergration witb third party sites CDNs\r\n  // alert(\"Downloading Unipack from \" + url)  \r\n  // let projectPack = download(url)\r\n    // console.log(projectPack)\r\n  }\r\n\r\n  loadProjectFile = (projectPack) => {\r\n    // console.log(projectPack)\r\n    new ProjectFile(projectPack)\r\n    .then((projectFile) => {this.setState({ projectFile: projectFile})})\r\n    .catch((message) => {alert(message)});\r\n  }\r\n\r\n  onMIDISuccess = (midiAccess) => {\r\n    console.log(\"Got access your MIDI devices.\");\r\n\r\n    var midiInput = [];\r\n    console.log(\"Input\");\r\n    for (var input of midiAccess.inputs.values()) {\r\n      console.log(input.name);\r\n      midiInput.push({label: input.name, value: input})\r\n    }\r\n    console.log(midiInput)\r\n    this.setState({midiInput: midiInput})\r\n\r\n    var midiOutput = [];\r\n    console.log();\r\n    console.log(\"Output\");\r\n    for (var output of midiAccess.outputs.values()) {\r\n      console.log(output.name);\r\n      midiOutput.push({label: output.name, value: output})\r\n    }\r\n    this.setState({midiOutput: midiOutput})\r\n\r\n    midiAccess.onstatechange = this.onMidiStateChange\r\n  };\r\n\r\n  onMidiStateChange(e)\r\n  {\r\n    console.log(e);\r\n    console.log(e.port.name, e.port.state);\r\n    if(e.port.state === \"connected\")\r\n    {\r\n      if(e.port.type === \"input\")\r\n      {\r\n        var midiInput = this.state.midiInput\r\n        midiInput.push({label: e.port.name, value: e.port})\r\n        this.setState({midiInput: midiInput})\r\n      }\r\n      else if(e.port.type === \"output\")\r\n      {\r\n        var midiOutput = this.state.midiOutput\r\n        midiOutput.push({label: e.port.name, value: e.port})\r\n        this.setState({midiOutput: midiOutput})\r\n      }\r\n    }\r\n    else if(e.port.state === \"disconnected\")\r\n    {\r\n      if(e.port.type === \"input\")\r\n      {\r\n        var midiInput = this.state.midiInput\r\n        for(var i = 0; i < midiInput.length; i++)\r\n        {\r\n          if(midiInput[i].label === e.port.name)\r\n          {\r\n            midiInput.splice(i);\r\n            break;\r\n          }\r\n        }\r\n        this.setState({midiInput: midiInput})\r\n        if(this.state.inputDevice.name === this.e.port.name)\r\n        {\r\n          this.setState({inputDevice: undefined})\r\n          this.setState({inputDeviceConfig: undefined})\r\n          this.setState({inputDeviceName: undefined})\r\n        }\r\n      }\r\n      else if(e.port.type === \"output\")\r\n      {\r\n        var midiOutput = this.state.midiOutput\r\n        for(var i = 0; i < midiOutput.length; i++)\r\n        {\r\n          if(midiOutput[i].label === e.port.name)\r\n          {\r\n            midiOutput.splice(i);\r\n            break;\r\n          }\r\n        }\r\n        this.setState({midiOutput: midiOutput})\r\n        if(this.state.outputDevice.name === this.e.port.name)\r\n        {\r\n          this.setState({outputDevice: undefined})\r\n          this.setState({outputDeviceConfig: undefined})\r\n          this.setState({outputDeviceName: undefined})\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  onMIDIFailure() {\r\n    console.log(\"Could not access your MIDI devices.\");\r\n    alert(\"Could not access your MIDI devices. Try use another web browser or hardware platform\")\r\n  }\r\n  \r\n  autoConfigPicker(deviceName, mode) {//mode 0 for input, mode 1 for output\r\n    if(deviceName !== undefined)\r\n    {\r\n      for(var key in deviceConfigs)\r\n      {\r\n        if (deviceName.match(deviceConfigs[key].midiNameRegex) !== null) {\r\n          var config = deviceConfigs[key]\r\n          console.log(`${mode ? \"Output\" : \"input\"} config has been auto assigned to ${key}`)\r\n          switch(mode)\r\n          {\r\n            case 0:\r\n              this.setState({inputConfigName: key});\r\n              this.setState({inputConfig: config});\r\n              return;\r\n            case 1:\r\n              this.setState({outputConfigName: key});\r\n              this.setState({outputConfig: config});\r\n              return;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    alert(`Unable to find matching ${mode ? \"output\" : \"input\"} config for device ${deviceName}`);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"main\"> \r\n          <div className=\"toolbar\"> {/* Not yet made */}\r\n          <text>203 | Prismatic (Tech Preview Demo)</text>\r\n          <div/>\r\n          <text>{this.state.projectFile !== undefined ? `Current Project: ${this.state.projectFile.info[\"title\"]} by ${this.state.projectFile.info[\"producerName\"]}` : \"No project loaded\"}</text>\r\n          <ProjectFileReader loadProjectFile={this.loadProjectFile}></ProjectFileReader>\r\n          <div/>\r\n          <text>UI Layout</text>\r\n          <Select\r\n            options={this.prepDeviceConfig()}\r\n            autosize={true}\r\n            value={this.state.layoutConfigName !== undefined ? {label: this.state.layoutConfigName, value: this.state.layoutConfig} : undefined}\r\n            placeholder=\"Layout Config\"\r\n            onChange={this.setLayoutConfig.bind(this)}\r\n          />\r\n          <text>Midi Input Device</text>\r\n          <Select\r\n            options={this.state.midiInput}\r\n            autosize={true}\r\n            value={this.state.inputDevice !== undefined ? {label: this.state.inputDevice.name, value: this.state.inputDevice} : undefined}\r\n            placeholder=\"Input Device\"\r\n            onChange={this.setInputDevice.bind(this)}\r\n          />\r\n          <text>Midi Input Device Config</text>\r\n          <Select\r\n            options={this.prepDeviceConfig()}\r\n            autosize={true}\r\n            value={this.state.inputConfigName !== undefined ? {label: this.state.inputConfigName, value: this.state.inputConfig} : undefined}\r\n            placeholder=\"Input Device Config\"\r\n            onChange={this.setInputConfig.bind(this)}\r\n          />\r\n          <text>Midi Output Device</text>\r\n          <Select\r\n            options={this.state.midiOutput}\r\n            autosize={true}\r\n            value={this.state.outputDevice !== undefined ? {label: this.state.outputDevice.name, value: this.state.outputDevice} : undefined}\r\n            placeholder=\"Output Device\"\r\n            onChange={this.setOutputDevice.bind(this)}\r\n          />\r\n          <text>Midi Output Device Config</text>\r\n          <Select\r\n            options={this.prepDeviceConfig()}\r\n            autosize={true}\r\n            value={this.state.outputConfigName !== undefined ? {label: this.state.outputConfigName, value: this.state.outputConfig} : undefined}\r\n            placeholder=\"Output Device Config\"\r\n            onChange={this.setOutputConfig.bind(this)}\r\n          />\r\n          {/* <button>>Autoplay</button> */}\r\n          </div>\r\n          <div\r\n            className=\"canvas\"\r\n            style={{\r\n              padding: this.state.layoutConfig.padding,\r\n              borderRadius: this.state.layoutConfig.radius,\r\n            }}\r\n          >\r\n            <Canvas\r\n              projectFile={this.state.projectFile}\r\n              layoutConfig={this.state.layoutConfig}\r\n              inputDevice={this.state.inputDevice}\r\n              inputConfig={this.state.inputConfig}\r\n              outputDevice={this.state.outputDevice}\r\n              outputConfig={this.state.outputConfig}\r\n            />\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  setLayoutConfig(config)\r\n  {\r\n    // console.log(config)\r\n    this.setState({layoutConfigName: config.label});\r\n    this.setState({layoutConfig: config.value});\r\n  }\r\n\r\n  setInputConfig(config)\r\n  {\r\n    // console.log(config)\r\n    this.setState({inputConfigName: config.label});\r\n    this.setState({inputConfig: config.value});\r\n  }\r\n\r\n  setOutputConfig(config)\r\n  {\r\n    // console.log(config)\r\n    this.setState({outputConfigName: config.label});\r\n    this.setState({outputConfig: config.value});\r\n  }\r\n\r\n  setInputDevice(device)\r\n  {\r\n    this.setState({inputDevice: device.value});\r\n    this.autoConfigPicker(device.value.name, 0);\r\n  }\r\n\r\n  setOutputDevice(device)\r\n  {\r\n    // console.log(\"Output device set to \" + device.name);\r\n    this.setState({outputDevice: device.value});\r\n    this.autoConfigPicker(device.value.name, 1);\r\n  }\r\n\r\n  prepDeviceConfig()\r\n  { \r\n    var result=[];\r\n    for (var key in deviceConfigs)\r\n    {\r\n      result.push({\r\n        label: key,\r\n        value: deviceConfigs[key],\r\n      })\r\n    }\r\n    return result;\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './styles/index.css';\r\nimport './styles/main.css'\r\nimport App from './Components/App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\n  ReactDOM.render(<App/>, document.getElementById(\"root\"))\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}