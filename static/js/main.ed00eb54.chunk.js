/*! For license information please see main.ed00eb54.chunk.js.LICENSE.txt */
(this.webpackJsonpprismatic=this.webpackJsonpprismatic||[]).push([[0],{13:function(e,t,n){(function(n){var o;!function(){"use strict";var r=function(){this.init()};r.prototype={init:function(){var e=this||a;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=1e3,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!==typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||a;if(e=parseFloat(e),t.ctx||f(),"undefined"!==typeof e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,a.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var o=t._howls[n]._getSoundIds(),r=0;r<o.length;r++){var i=t._howls[n]._soundById(o[r]);i&&i._node&&(i._node.volume=i._volume*e)}return t}return t._volume},mute:function(e){var t=this||a;t.ctx||f(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,a.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var o=t._howls[n]._getSoundIds(),r=0;r<o.length;r++){var i=t._howls[n]._soundById(o[r]);i&&i._node&&(i._node.muted=!!e||i._muted)}return t},stop:function(){for(var e=this||a,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||a,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&"undefined"!==typeof e.ctx.close&&(e.ctx.close(),e.ctx=null,f()),e},codecs:function(e){return(this||a)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||a;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!==typeof Audio)try{"undefined"===typeof(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(t){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||a,t=null;try{t="undefined"!==typeof Audio?new Audio:null}catch(i){return e}if(!t||"function"!==typeof t.canPlayType)return e;var n=t.canPlayType("audio/mpeg;").replace(/^no$/,""),o=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),r=o&&parseInt(o[0].split("/")[1],10)<33;return e._codecs={mp3:!(r||!n&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(t.canPlayType('audio/wav; codecs="1"')||t.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||a;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function t(n){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var o=new Audio;o._unlocked=!0,e._releaseHtml5Audio(o)}catch(n){e.noAudio=!0;break}for(var r=0;r<e._howls.length;r++)if(!e._howls[r]._webAudio)for(var a=e._howls[r]._getSoundIds(),i=0;i<a.length;i++){var s=e._howls[r]._soundById(a[i]);s&&s._node&&!s._node._unlocked&&(s._node._unlocked=!0,s._node.load())}e._autoResume();var u=e.ctx.createBufferSource();u.buffer=e._scratchBuffer,u.connect(e.ctx.destination),"undefined"===typeof u.start?u.noteOn(0):u.start(0),"function"===typeof e.ctx.resume&&e.ctx.resume(),u.onended=function(){u.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0);for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),e}},_obtainHtml5Audio:function(){var e=this||a;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=(new Audio).play();return t&&"undefined"!==typeof Promise&&(t instanceof Promise||"function"===typeof t.then)&&t.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(e){var t=this||a;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&"undefined"!==typeof e.ctx.suspend&&a.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var n=0;n<e._howls[t]._sounds.length;n++)if(!e._howls[t]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout((function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var t=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(t,t)}}),3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&"undefined"!==typeof e.ctx.resume&&a.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then((function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")})),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var a=new r,i=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};i.prototype={init:function(e){var t=this;return a.ctx||f(),t._autoplay=e.autoplay||!1,t._format="string"!==typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!==typeof e.preload&&"metadata"!==e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!==typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=a.usingWebAudio&&!t._html5,"undefined"!==typeof a.ctx&&a.ctx&&a.autoUnlock&&a._unlockAudio(),a._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&"none"!==t._preload&&t.load(),t},load:function(){var e=this,t=null;if(a.noAudio)e._emit("loaderror",null,"No audio support.");else{"string"===typeof e._src&&(e._src=[e._src]);for(var n=0;n<e._src.length;n++){var o,r;if(e._format&&e._format[n])o=e._format[n];else{if("string"!==typeof(r=e._src[n])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(o=/^data:audio\/([^;,]+);/i.exec(r))||(o=/\.([^.]+)$/.exec(r.split("?",1)[0])),o&&(o=o[1].toLowerCase())}if(o||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),o&&a.codecs(o)){t=e._src[n];break}}if(t)return e._src=t,e._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new s(e),e._webAudio&&l(e),e;e._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var n=this,o=null;if("number"===typeof e)o=e,e=null;else{if("string"===typeof e&&"loaded"===n._state&&!n._sprite[e])return null;if("undefined"===typeof e&&(e="__default",!n._playLock)){for(var r=0,i=0;i<n._sounds.length;i++)n._sounds[i]._paused&&!n._sounds[i]._ended&&(r++,o=n._sounds[i]._id);1===r?e=null:o=null}}var s=o?n._soundById(o):n._inactiveSound();if(!s)return null;if(o&&!e&&(e=s._sprite||"__default"),"loaded"!==n._state){s._sprite=e,s._ended=!1;var u=s._id;return n._queue.push({event:"play",action:function(){n.play(u)}}),u}if(o&&!s._paused)return t||n._loadQueue("play"),s._id;n._webAudio&&a._autoResume();var l=Math.max(0,s._seek>0?s._seek:n._sprite[e][0]/1e3),c=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-l),d=1e3*c/Math.abs(s._rate),p=n._sprite[e][0]/1e3,f=(n._sprite[e][0]+n._sprite[e][1])/1e3;s._sprite=e,s._ended=!1;var _=function(){s._paused=!1,s._seek=l,s._start=p,s._stop=f,s._loop=!(!s._loop&&!n._sprite[e][2])};if(!(l>=f)){var h=s._node;if(n._webAudio){var v=function(){n._playLock=!1,_(),n._refreshBuffer(s);var e=s._muted||n._muted?0:s._volume;h.gain.setValueAtTime(e,a.ctx.currentTime),s._playStart=a.ctx.currentTime,"undefined"===typeof h.bufferSource.start?s._loop?h.bufferSource.noteGrainOn(0,l,86400):h.bufferSource.noteGrainOn(0,l,c):s._loop?h.bufferSource.start(0,l,86400):h.bufferSource.start(0,l,c),d!==1/0&&(n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),d)),t||setTimeout((function(){n._emit("play",s._id),n._loadQueue()}),0)};"running"===a.state&&"interrupted"!==a.ctx.state?v():(n._playLock=!0,n.once("resume",v),n._clearTimer(s._id))}else{var y=function(){h.currentTime=l,h.muted=s._muted||n._muted||a._muted||h.muted,h.volume=s._volume*a.volume(),h.playbackRate=s._rate;try{var o=h.play();if(o&&"undefined"!==typeof Promise&&(o instanceof Promise||"function"===typeof o.then)?(n._playLock=!0,_(),o.then((function(){n._playLock=!1,h._unlocked=!0,t||(n._emit("play",s._id),n._loadQueue())})).catch((function(){n._playLock=!1,n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),s._ended=!0,s._paused=!0}))):t||(n._playLock=!1,_(),n._emit("play",s._id),n._loadQueue()),h.playbackRate=s._rate,h.paused)return void n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||s._loop?n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),d):(n._endTimers[s._id]=function(){n._ended(s),h.removeEventListener("ended",n._endTimers[s._id],!1)},h.addEventListener("ended",n._endTimers[s._id],!1))}catch(r){n._emit("playerror",s._id,r)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===h.src&&(h.src=n._src,h.load());var m=window&&window.ejecta||!h.readyState&&a._navigator.isCocoonJS;if(h.readyState>=3||m)y();else{n._playLock=!0;h.addEventListener(a._canPlayEvent,(function e(){y(),h.removeEventListener(a._canPlayEvent,e,!1)}),!1),n._clearTimer(s._id)}}return s._id}n._ended(s)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),o=0;o<n.length;o++){t._clearTimer(n[o]);var r=t._soundById(n[o]);if(r&&!r._paused&&(r._seek=t.seek(n[o]),r._rateSeek=0,r._paused=!0,t._stopFade(n[o]),r._node))if(t._webAudio){if(!r._node.bufferSource)continue;"undefined"===typeof r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),t._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||t._emit("pause",r?r._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var o=n._getSoundIds(e),r=0;r<o.length;r++){n._clearTimer(o[r]);var a=n._soundById(o[r]);a&&(a._seek=a._start||0,a._rateSeek=0,a._paused=!0,a._ended=!0,n._stopFade(o[r]),a._node&&(n._webAudio?a._node.bufferSource&&("undefined"===typeof a._node.bufferSource.stop?a._node.bufferSource.noteOff(0):a._node.bufferSource.stop(0),n._cleanBuffer(a._node)):isNaN(a._node.duration)&&a._node.duration!==1/0||(a._node.currentTime=a._start||0,a._node.pause(),a._node.duration===1/0&&n._clearSound(a._node))),t||n._emit("stop",a._id))}return n},mute:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(e,t)}}),n;if("undefined"===typeof t){if("boolean"!==typeof e)return n._muted;n._muted=e}for(var o=n._getSoundIds(t),r=0;r<o.length;r++){var i=n._soundById(o[r]);i&&(i._muted=e,i._interval&&n._stopFade(i._id),n._webAudio&&i._node?i._node.gain.setValueAtTime(e?0:i._volume,a.ctx.currentTime):i._node&&(i._node.muted=!!a._muted||e),n._emit("mute",i._id))}return n},volume:function(){var e,t,n,o=this,r=arguments;if(0===r.length)return o._volume;if(1===r.length||2===r.length&&"undefined"===typeof r[1]){var i=o._getSoundIds(),s=i.indexOf(r[0]);s>=0?t=parseInt(r[0],10):e=parseFloat(r[0])}else r.length>=2&&(e=parseFloat(r[0]),t=parseInt(r[1],10));if(!("undefined"!==typeof e&&e>=0&&e<=1))return(n=t?o._soundById(t):o._sounds[0])?n._volume:0;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"volume",action:function(){o.volume.apply(o,r)}}),o;"undefined"===typeof t&&(o._volume=e),t=o._getSoundIds(t);for(var u=0;u<t.length;u++)(n=o._soundById(t[u]))&&(n._volume=e,r[2]||o._stopFade(t[u]),o._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(e,a.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=e*a.volume()),o._emit("volume",n._id));return o},fade:function(e,t,n,o){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"fade",action:function(){r.fade(e,t,n,o)}}),r;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),n=parseFloat(n),r.volume(e,o);for(var i=r._getSoundIds(o),s=0;s<i.length;s++){var u=r._soundById(i[s]);if(u){if(o||r._stopFade(i[s]),r._webAudio&&!u._muted){var l=a.ctx.currentTime,c=l+n/1e3;u._volume=e,u._node.gain.setValueAtTime(e,l),u._node.gain.linearRampToValueAtTime(t,c)}r._startFadeInterval(u,e,t,n,i[s],"undefined"===typeof o)}}return r},_startFadeInterval:function(e,t,n,o,r,a){var i=this,s=t,u=n-t,l=Math.abs(u/.01),c=Math.max(4,l>0?o/l:o),d=Date.now();e._fadeTo=n,e._interval=setInterval((function(){var r=(Date.now()-d)/o;d=Date.now(),s+=u*r,s=Math.round(100*s)/100,s=u<0?Math.max(n,s):Math.min(n,s),i._webAudio?e._volume=s:i.volume(s,e._id,!0),a&&(i._volume=s),(n<t&&s<=n||n>t&&s>=n)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,i.volume(n,e._id),i._emit("fade",e._id))}),c)},_stopFade:function(e){var t=this,n=t._soundById(e);return n&&n._interval&&(t._webAudio&&n._node.gain.cancelScheduledValues(a.ctx.currentTime),clearInterval(n._interval),n._interval=null,t.volume(n._fadeTo,e),n._fadeTo=null,t._emit("fade",e)),t},loop:function(){var e,t,n,o=this,r=arguments;if(0===r.length)return o._loop;if(1===r.length){if("boolean"!==typeof r[0])return!!(n=o._soundById(parseInt(r[0],10)))&&n._loop;e=r[0],o._loop=e}else 2===r.length&&(e=r[0],t=parseInt(r[1],10));for(var a=o._getSoundIds(t),i=0;i<a.length;i++)(n=o._soundById(a[i]))&&(n._loop=e,o._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop)));return o},rate:function(){var e,t,n,o=this,r=arguments;if(0===r.length)t=o._sounds[0]._id;else if(1===r.length){var i=o._getSoundIds(),s=i.indexOf(r[0]);s>=0?t=parseInt(r[0],10):e=parseFloat(r[0])}else 2===r.length&&(e=parseFloat(r[0]),t=parseInt(r[1],10));if("number"!==typeof e)return(n=o._soundById(t))?n._rate:o._rate;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"rate",action:function(){o.rate.apply(o,r)}}),o;"undefined"===typeof t&&(o._rate=e),t=o._getSoundIds(t);for(var u=0;u<t.length;u++)if(n=o._soundById(t[u])){o.playing(t[u])&&(n._rateSeek=o.seek(t[u]),n._playStart=o._webAudio?a.ctx.currentTime:n._playStart),n._rate=e,o._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(e,a.ctx.currentTime):n._node&&(n._node.playbackRate=e);var l=o.seek(t[u]),c=(o._sprite[n._sprite][0]+o._sprite[n._sprite][1])/1e3-l,d=1e3*c/Math.abs(n._rate);!o._endTimers[t[u]]&&n._paused||(o._clearTimer(t[u]),o._endTimers[t[u]]=setTimeout(o._ended.bind(o,n),d)),o._emit("rate",n._id)}return o},seek:function(){var e,t,n=this,o=arguments;if(0===o.length)t=n._sounds[0]._id;else if(1===o.length){var r=n._getSoundIds(),i=r.indexOf(o[0]);i>=0?t=parseInt(o[0],10):n._sounds.length&&(t=n._sounds[0]._id,e=parseFloat(o[0]))}else 2===o.length&&(e=parseFloat(o[0]),t=parseInt(o[1],10));if("undefined"===typeof t)return n;if("number"===typeof e&&("loaded"!==n._state||n._playLock))return n._queue.push({event:"seek",action:function(){n.seek.apply(n,o)}}),n;var s=n._soundById(t);if(s){if(!("number"===typeof e&&e>=0)){if(n._webAudio){var u=n.playing(t)?a.ctx.currentTime-s._playStart:0,l=s._rateSeek?s._rateSeek-s._seek:0;return s._seek+(l+u*Math.abs(s._rate))}return s._node.currentTime}var c=n.playing(t);c&&n.pause(t,!0),s._seek=e,s._ended=!1,n._clearTimer(t),n._webAudio||!s._node||isNaN(s._node.duration)||(s._node.currentTime=e);var d=function(){n._emit("seek",t),c&&n.play(t,!0)};if(c&&!n._webAudio){var p=function e(){n._playLock?setTimeout(e,0):d()};setTimeout(p,0)}else d()}return n},playing:function(e){var t=this;if("number"===typeof e){var n=t._soundById(e);return!!n&&!n._paused}for(var o=0;o<t._sounds.length;o++)if(!t._sounds[o]._paused)return!0;return!1},duration:function(e){var t=this,n=t._duration,o=t._soundById(e);return o&&(n=t._sprite[o._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,n=0;n<t.length;n++)t[n]._paused||e.stop(t[n]._id),e._webAudio||(e._clearSound(t[n]._node),t[n]._node.removeEventListener("error",t[n]._errorFn,!1),t[n]._node.removeEventListener(a._canPlayEvent,t[n]._loadFn,!1),t[n]._node.removeEventListener("ended",t[n]._endFn,!1),a._releaseHtml5Audio(t[n]._node)),delete t[n]._node,e._clearTimer(t[n]._id);var o=a._howls.indexOf(e);o>=0&&a._howls.splice(o,1);var r=!0;for(n=0;n<a._howls.length;n++)if(a._howls[n]._src===e._src||e._src.indexOf(a._howls[n]._src)>=0){r=!1;break}return u&&r&&delete u[e._src],a.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,o){var r=this["_on"+e];return"function"===typeof t&&r.push(o?{id:n,fn:t,once:o}:{id:n,fn:t}),this},off:function(e,t,n){var o=this,r=o["_on"+e],a=0;if("number"===typeof t&&(n=t,t=null),t||n)for(a=0;a<r.length;a++){var i=n===r[a].id;if(t===r[a].fn&&i||!t&&i){r.splice(a,1);break}}else if(e)o["_on"+e]=[];else{var s=Object.keys(o);for(a=0;a<s.length;a++)0===s[a].indexOf("_on")&&Array.isArray(o[s[a]])&&(o[s[a]]=[])}return o},once:function(e,t,n){return this.on(e,t,n,1),this},_emit:function(e,t,n){for(var o=this,r=o["_on"+e],a=r.length-1;a>=0;a--)r[a].id&&r[a].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(o,r[a].fn),0),r[a].once&&o.off(e,r[a].fn,r[a].id));return o._loadQueue(e),o},_loadQueue:function(e){var t=this;if(t._queue.length>0){var n=t._queue[0];n.event===e&&(t._queue.shift(),t._loadQueue()),e||n.action()}return t},_ended:function(e){var t=this,n=e._sprite;if(!t._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(t._ended.bind(t,e),100),t;var o=!(!e._loop&&!t._sprite[n][2]);if(t._emit("end",e._id),!t._webAudio&&o&&t.stop(e._id,!0).play(e._id),t._webAudio&&o){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=a.ctx.currentTime;var r=1e3*(e._stop-e._start)/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),r)}return t._webAudio&&!o&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),a._autoSuspend()),t._webAudio||o||t.stop(e._id,!0),t},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if("function"!==typeof t._endTimers[e])clearTimeout(t._endTimers[e]);else{var n=t._soundById(e);n&&n._node&&n._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){for(var t=this,n=0;n<t._sounds.length;n++)if(e===t._sounds[n]._id)return t._sounds[n];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new s(e)},_drain:function(){var e=this,t=e._pool,n=0,o=0;if(!(e._sounds.length<t)){for(o=0;o<e._sounds.length;o++)e._sounds[o]._ended&&n++;for(o=e._sounds.length-1;o>=0;o--){if(n<=t)return;e._sounds[o]._ended&&(e._webAudio&&e._sounds[o]._node&&e._sounds[o]._node.disconnect(0),e._sounds.splice(o,1),n--)}}},_getSoundIds:function(e){if("undefined"===typeof e){for(var t=[],n=0;n<this._sounds.length;n++)t.push(this._sounds[n]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=a.ctx.createBufferSource(),e._node.bufferSource.buffer=u[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,a.ctx.currentTime),this},_cleanBuffer:function(e){var t=a._navigator&&a._navigator.vendor.indexOf("Apple")>=0;if(a._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=a._scratchBuffer}catch(n){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(a._navigator&&a._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var s=function(e){this._parent=e,this.init()};s.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++a._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,n=a._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node="undefined"===typeof a.ctx.createGain?a.ctx.createGainNode():a.ctx.createGain(),e._node.gain.setValueAtTime(n,a.ctx.currentTime),e._node.paused=!0,e._node.connect(a.masterGain)):a.noAudio||(e._node=a._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(a._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=t._src,e._node.preload=!0===t._preload?"auto":t._preload,e._node.volume=n*a.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++a._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),e._node.removeEventListener(a._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,t=e._parent;t._duration===1/0&&(t._duration=Math.ceil(10*e._node.duration)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=1e3*t._duration),t._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var u={},l=function(e){var t=e._src;if(u[t])return e._duration=u[t].duration,void p(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),o=new Uint8Array(n.length),r=0;r<n.length;++r)o[r]=n.charCodeAt(r);d(o.buffer,e)}else{var a=new XMLHttpRequest;a.open(e._xhr.method,t,!0),a.withCredentials=e._xhr.withCredentials,a.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach((function(t){a.setRequestHeader(t,e._xhr.headers[t])})),a.onload=function(){var t=(a.status+"")[0];"0"===t||"2"===t||"3"===t?d(a.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+a.status+".")},a.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete u[t],e.load())},c(a)}},c=function(e){try{e.send()}catch(t){e.onerror()}},d=function(e,t){var n=function(){t._emit("loaderror",null,"Decoding audio data failed.")},o=function(e){e&&t._sounds.length>0?(u[t._src]=e,p(t,e)):n()};"undefined"!==typeof Promise&&1===a.ctx.decodeAudioData.length?a.ctx.decodeAudioData(e).then(o).catch(n):a.ctx.decodeAudioData(e,o,n)},p=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},f=function(){if(a.usingWebAudio){try{"undefined"!==typeof AudioContext?a.ctx=new AudioContext:"undefined"!==typeof webkitAudioContext?a.ctx=new webkitAudioContext:a.usingWebAudio=!1}catch(r){a.usingWebAudio=!1}a.ctx||(a.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(a._navigator&&a._navigator.platform),t=a._navigator&&a._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=t?parseInt(t[1],10):null;if(e&&n&&n<9){var o=/safari/.test(a._navigator&&a._navigator.userAgent.toLowerCase());a._navigator&&!o&&(a.usingWebAudio=!1)}a.usingWebAudio&&(a.masterGain="undefined"===typeof a.ctx.createGain?a.ctx.createGainNode():a.ctx.createGain(),a.masterGain.gain.setValueAtTime(a._muted?0:a._volume,a.ctx.currentTime),a.masterGain.connect(a.ctx.destination)),a._setup()}};void 0===(o=function(){return{Howler:a,Howl:i}}.apply(t,[]))||(e.exports=o),t.Howler=a,t.Howl=i,"undefined"!==typeof n?(n.HowlerGlobal=r,n.Howler=a,n.Howl=i,n.Sound=s):"undefined"!==typeof window&&(window.HowlerGlobal=r,window.Howler=a,window.Howl=i,window.Sound=s)}(),function(){"use strict";var e;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;for(var n=t._howls.length-1;n>=0;n--)t._howls[n].stereo(e);return t},HowlerGlobal.prototype.pos=function(e,t,n){var o=this;return o.ctx&&o.ctx.listener?(t="number"!==typeof t?o._pos[1]:t,n="number"!==typeof n?o._pos[2]:n,"number"!==typeof e?o._pos:(o._pos=[e,t,n],"undefined"!==typeof o.ctx.listener.positionX?(o.ctx.listener.positionX.setTargetAtTime(o._pos[0],Howler.ctx.currentTime,.1),o.ctx.listener.positionY.setTargetAtTime(o._pos[1],Howler.ctx.currentTime,.1),o.ctx.listener.positionZ.setTargetAtTime(o._pos[2],Howler.ctx.currentTime,.1)):o.ctx.listener.setPosition(o._pos[0],o._pos[1],o._pos[2]),o)):o},HowlerGlobal.prototype.orientation=function(e,t,n,o,r,a){var i=this;if(!i.ctx||!i.ctx.listener)return i;var s=i._orientation;return t="number"!==typeof t?s[1]:t,n="number"!==typeof n?s[2]:n,o="number"!==typeof o?s[3]:o,r="number"!==typeof r?s[4]:r,a="number"!==typeof a?s[5]:a,"number"!==typeof e?s:(i._orientation=[e,t,n,o,r,a],"undefined"!==typeof i.ctx.listener.forwardX?(i.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),i.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),i.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),i.ctx.listener.upX.setTargetAtTime(o,Howler.ctx.currentTime,.1),i.ctx.listener.upY.setTargetAtTime(r,Howler.ctx.currentTime,.1),i.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):i.ctx.listener.setOrientation(e,t,n,o,r,a),i)},Howl.prototype.init=(e=Howl.prototype.init,function(t){var n=this;return n._orientation=t.orientation||[1,0,0],n._stereo=t.stereo||null,n._pos=t.pos||null,n._pannerAttr={coneInnerAngle:"undefined"!==typeof t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:"undefined"!==typeof t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:"undefined"!==typeof t.coneOuterGain?t.coneOuterGain:0,distanceModel:"undefined"!==typeof t.distanceModel?t.distanceModel:"inverse",maxDistance:"undefined"!==typeof t.maxDistance?t.maxDistance:1e4,panningModel:"undefined"!==typeof t.panningModel?t.panningModel:"HRTF",refDistance:"undefined"!==typeof t.refDistance?t.refDistance:1,rolloffFactor:"undefined"!==typeof t.rolloffFactor?t.rolloffFactor:1},n._onstereo=t.onstereo?[{fn:t.onstereo}]:[],n._onpos=t.onpos?[{fn:t.onpos}]:[],n._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}),Howl.prototype.stereo=function(e,n){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"stereo",action:function(){o.stereo(e,n)}}),o;var r="undefined"===typeof Howler.ctx.createStereoPanner?"spatial":"stereo";if("undefined"===typeof n){if("number"!==typeof e)return o._stereo;o._stereo=e,o._pos=[e,0,0]}for(var a=o._getSoundIds(n),i=0;i<a.length;i++){var s=o._soundById(a[i]);if(s){if("number"!==typeof e)return s._stereo;s._stereo=e,s._pos=[e,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||t(s,r),"spatial"===r?"undefined"!==typeof s._panner.positionX?(s._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(e,0,0):s._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),o._emit("stereo",s._id)}}return o},Howl.prototype.pos=function(e,n,o,r){var a=this;if(!a._webAudio)return a;if("loaded"!==a._state)return a._queue.push({event:"pos",action:function(){a.pos(e,n,o,r)}}),a;if(n="number"!==typeof n?0:n,o="number"!==typeof o?-.5:o,"undefined"===typeof r){if("number"!==typeof e)return a._pos;a._pos=[e,n,o]}for(var i=a._getSoundIds(r),s=0;s<i.length;s++){var u=a._soundById(i[s]);if(u){if("number"!==typeof e)return u._pos;u._pos=[e,n,o],u._node&&(u._panner&&!u._panner.pan||t(u,"spatial"),"undefined"!==typeof u._panner.positionX?(u._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(o,Howler.ctx.currentTime)):u._panner.setPosition(e,n,o)),a._emit("pos",u._id)}}return a},Howl.prototype.orientation=function(e,n,o,r){var a=this;if(!a._webAudio)return a;if("loaded"!==a._state)return a._queue.push({event:"orientation",action:function(){a.orientation(e,n,o,r)}}),a;if(n="number"!==typeof n?a._orientation[1]:n,o="number"!==typeof o?a._orientation[2]:o,"undefined"===typeof r){if("number"!==typeof e)return a._orientation;a._orientation=[e,n,o]}for(var i=a._getSoundIds(r),s=0;s<i.length;s++){var u=a._soundById(i[s]);if(u){if("number"!==typeof e)return u._orientation;u._orientation=[e,n,o],u._node&&(u._panner||(u._pos||(u._pos=a._pos||[0,0,-.5]),t(u,"spatial")),"undefined"!==typeof u._panner.orientationX?(u._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime),u._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.orientationZ.setValueAtTime(o,Howler.ctx.currentTime)):u._panner.setOrientation(e,n,o)),a._emit("orientation",u._id)}}return a},Howl.prototype.pannerAttr=function(){var e,n,o,r=this,a=arguments;if(!r._webAudio)return r;if(0===a.length)return r._pannerAttr;if(1===a.length){if("object"!==typeof a[0])return(o=r._soundById(parseInt(a[0],10)))?o._pannerAttr:r._pannerAttr;e=a[0],"undefined"===typeof n&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),r._pannerAttr={coneInnerAngle:"undefined"!==typeof e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:"undefined"!==typeof e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:"undefined"!==typeof e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:"undefined"!==typeof e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:r._distanceModel,maxDistance:"undefined"!==typeof e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:r._maxDistance,refDistance:"undefined"!==typeof e.pannerAttr.refDistance?e.pannerAttr.refDistance:r._refDistance,rolloffFactor:"undefined"!==typeof e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:"undefined"!==typeof e.pannerAttr.panningModel?e.pannerAttr.panningModel:r._panningModel})}else 2===a.length&&(e=a[0],n=parseInt(a[1],10));for(var i=r._getSoundIds(n),s=0;s<i.length;s++)if(o=r._soundById(i[s])){var u=o._pannerAttr;u={coneInnerAngle:"undefined"!==typeof e.coneInnerAngle?e.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:"undefined"!==typeof e.coneOuterAngle?e.coneOuterAngle:u.coneOuterAngle,coneOuterGain:"undefined"!==typeof e.coneOuterGain?e.coneOuterGain:u.coneOuterGain,distanceModel:"undefined"!==typeof e.distanceModel?e.distanceModel:u.distanceModel,maxDistance:"undefined"!==typeof e.maxDistance?e.maxDistance:u.maxDistance,refDistance:"undefined"!==typeof e.refDistance?e.refDistance:u.refDistance,rolloffFactor:"undefined"!==typeof e.rolloffFactor?e.rolloffFactor:u.rolloffFactor,panningModel:"undefined"!==typeof e.panningModel?e.panningModel:u.panningModel};var l=o._panner;l?(l.coneInnerAngle=u.coneInnerAngle,l.coneOuterAngle=u.coneOuterAngle,l.coneOuterGain=u.coneOuterGain,l.distanceModel=u.distanceModel,l.maxDistance=u.maxDistance,l.refDistance=u.refDistance,l.rolloffFactor=u.rolloffFactor,l.panningModel=u.panningModel):(o._pos||(o._pos=r._pos||[0,0,-.5]),t(o,"spatial"))}return r},Sound.prototype.init=function(e){return function(){var t=this,n=t._parent;t._orientation=n._orientation,t._stereo=n._stereo,t._pos=n._pos,t._pannerAttr=n._pannerAttr,e.call(this),t._stereo?n.stereo(t._stereo):t._pos&&n.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this,n=t._parent;return t._orientation=n._orientation,t._stereo=n._stereo,t._pos=n._pos,t._pannerAttr=n._pannerAttr,t._stereo?n.stereo(t._stereo):t._pos?n.pos(t._pos[0],t._pos[1],t._pos[2],t._id):t._panner&&(t._panner.disconnect(0),t._panner=void 0,n._refreshBuffer(t)),e.call(this)}}(Sound.prototype.reset);var t=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,"undefined"!==typeof e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),"undefined"!==typeof e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}()}).call(this,n(28))},26:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var o=n(1),r=n(0),a=n.n(r),i=n(9),s=n.n(i),u=(n(26),n(8)),l=n(3),c=n(4),d=n(15),p=n(7),f=n(6),_=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(l.a)(this,n);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).onFileChange=function(t){e.props.loadProjectFile(t.target.files[0])},e}return Object(c.a)(n,[{key:"render",value:function(){return Object(o.jsx)(a.a.Fragment,{children:Object(o.jsx)("input",{type:"file",id:"projectFilePicker",name:"projectFile",accept:".zip",onChange:this.onFileChange})})}}]),n}(r.Component),h=n(5),v=n.n(h),y=n(2),m=n(10),g=function(){function e(t,n,o,r,a){var i=this;Object(l.a)(this,e),this.keyLED=void 0,this.id=void 0,this.id_str=void 0,this.repeat=1,this.end=!1,this.activeThread=-1,this.nextID=0,this.canvas=void 0,this.currentOn=[],this.lastEventTime=void 0,this.activeList=void 0,this.play=Object(m.a)(v.a.mark((function e(){var t,n,o,r,a,s,l,c,d,p,f,_,h,y;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0===i.activeList[i.id_str]&&(i.activeList[i.id_str]=i.id),t=i.getID(),i.activeThread=t,i.currentOn=[],n=0,i.end=!1,i.lastEventTime=Date.now();case 7:if(!(0===i.repeat||n++<i.repeat)){e.next=54;break}o=Object(u.a)(i.keyLED),e.prev=9,o.s();case 11:if((r=o.n()).done){e.next=41;break}if(a=(a=r.value).trim(),i.activeThread==t){e.next=16;break}return e.abrupt("return");case 16:if(""!=a){e.next=18;break}return e.abrupt("continue",39);case 18:s=a.split(" "),e.t0=s[0],e.next="o"===e.t0||"on"===e.t0?22:"f"===e.t0||"off"===e.t0?29:"d"===e.t0||"delay"===e.t0?36:39;break;case 22:return"*"===s[1]&&(s[1]="mc"),"mc"===s[1]||"l"===s[1]?(l=[s[1],parseInt(s[2]-1)],f=l[0],_=l[1]):NaN!==parseInt(s[1])&&(c=[parseInt(s[2]-1),parseInt(s[1]-1)],f=c[0],_=c[1]),d="a"===s[s.length-2]||"auto"===s[s.length-2]?parseInt(s[s.length-1]):"#"+s[s.length-1],i.canvas.setColor(f,_,d),p=f+"-"+_,void 0===i.currentOn[p]?i.currentOn[p]=[f,_]:0===d&&delete i.currentOn[p],e.abrupt("break",39);case 29:return f=void 0,_=void 0,"*"===s[1]&&(s[1]="mc"),"mc"===s[1]||"l"===s[1]?(h=[s[1],parseInt(s[2]-1)],f=h[0],_=h[1]):NaN!==parseInt(s[1])&&(y=[parseInt(s[2]-1),parseInt(s[1]-1)],f=y[0],_=y[1]),i.canvas.setColor(f,_,0),p=f+"-"+_,delete i.currentOn[p],e.abrupt("break",39);case 36:return e.next=38,i.wait(parseInt(s[1]));case 38:return e.abrupt("break",39);case 39:e.next=11;break;case 41:e.next=46;break;case 43:e.prev=43,e.t1=e.catch(9),o.e(e.t1);case 46:return e.prev=46,o.f(),e.finish(46);case 49:if(!i.end){e.next=52;break}return i.stop(),e.abrupt("break",54);case 52:e.next=7;break;case 54:i.activeThread==t&&(i.activeThread=-1,i.removeFromActiveList());case 55:case"end":return e.stop()}}),e,null,[[9,43,46,49]])}))),this.keyLED=t,this.repeat=n,this.canvas=o,this.id=r,this.id_str="".concat(r[0]," ").concat(r[1]," ").concat(r[2]," ").concat(r[3]),this.activeList=a}return Object(c.a)(e,[{key:"wait",value:function(e){var t=this.lastEventTime+e-Date.now();return this.lastEventTime+=e,t>5?new Promise((function(e){return setTimeout(e,t)})):void 0}},{key:"getID",value:function(){return this.nextID++}},{key:"stop",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(-1!==this.activeThread){if(this.activeThread=-1,e)for(var t in this.currentOn){var n=Object(y.a)(this.currentOn[t],2),o=n[0],r=n[1];this.canvas.setColor(o,r,0)}this.currentOn=[],this.removeFromActiveList()}}},{key:"endLoop",value:function(){this.end=!0}},{key:"removeFromActiveList",value:function(){delete this.activeList[this.id_str]}}]),e}(),b=function(){function e(t,n){var o=this;Object(l.a)(this,e),this.autoplay=void 0,this.status="STOPPED",this.progress=0,this.total=0,this.led=!0,this.currentChain=0,this.canvas=void 0,this.lastEventTime=void 0,this.play=function(){var e=Object(m.a)(v.a.mark((function e(t){var n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0===o.progress&&o.canvas.initlalizeCanvas(),o.status="PLAYING",o.lastEventTime=Date.now(),n=v.a.mark((function e(){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("STOPPED"!==o.status&&"PAUSED"!==o.status){e.next=2;break}return e.abrupt("return",{v:void 0});case 2:if(console.log(o.autoplay[o.progress]),n=o.autoplay[o.progress].split(" "),void 0!==t&&t([o.progress,o.autoplay.length]),!(n.length<2)){e.next=7;break}return e.abrupt("return","continue");case 7:o.canvas.currentChain!=o.currentChain&&o.canvas.chainChange(o.currentChain),e.t0=n[0],e.next="o"===e.t0||"on"===e.t0?11:"f"===e.t0||"off"===e.t0?13:"t"===e.t0||"touch"===e.t0?15:"d"===e.t0||"delay"===e.t0?17:"c"===e.t0||"chain"===e.t0?23:26;break;case 11:return o.led?o.canvas.keyOn(parseInt(n[2])-1,parseInt(n[1])-1,void 0,!0):(o.canvas.keyOn(parseInt(n[2])-1,parseInt(n[1])-1,void 0,!0,!0,!1),o.canvas.setColor(parseInt(n[2])-1,parseInt(n[1])-1,127)),e.abrupt("break",26);case 13:return o.led?o.canvas.keyOff(parseInt(n[2])-1,parseInt(n[1])-1,void 0,!0):(o.canvas.keyOff(parseInt(n[2])-1,parseInt(n[1])-1,void 0,!0),o.canvas.setColor(parseInt(n[2])-1,parseInt(n[1])-1,0)),e.abrupt("break",26);case 15:return o.led?(o.canvas.keyOn(parseInt(n[2])-1,parseInt(n[1])-1,void 0,!0),o.canvas.keyOff(parseInt(n[2])-1,parseInt(n[1])-1,void 0,!0)):(o.canvas.keyOn(parseInt(n[2])-1,parseInt(n[1])-1,void 0,!0,!0,!1),o.canvas.keyOff(parseInt(n[2])-1,parseInt(n[1])-1,void 0,!0),o.canvas.setColor(parseInt(n[2])-1,parseInt(n[1])-1,3),setTimeout((function(){o.canvas.setColor(parseInt(n[2])-1,parseInt(n[1])-1,0)}),200)),e.abrupt("break",26);case 17:if(!(parseInt(n[1])<10)){e.next=20;break}return e.abrupt("break",26);case 20:return e.next=22,o.wait(parseInt(n[1]));case 22:return e.abrupt("break",26);case 23:return o.canvas.chainChange(parseInt(n[1])-1),o.currentChain=parseInt(n[1])-1,e.abrupt("break",26);case 26:case"end":return e.stop()}}),e)})),o.progress;case 5:if(!(o.progress<o.autoplay.length)){e.next=15;break}return e.delegateYield(n(),"t0",7);case 7:if("continue"!==(r=e.t0)){e.next=10;break}return e.abrupt("continue",12);case 10:if("object"!==typeof r){e.next=12;break}return e.abrupt("return",r.v);case 12:o.progress++,e.next=5;break;case 15:o.status="STOPPED",o.progress=0;case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.autoplay=t,this.total=void 0===t?0:t.length,this.canvas=n}return Object(c.a)(e,[{key:"pause",value:function(){this.status="PAUSED"}},{key:"stop",value:function(){this.status="STOPPED",this.progress=0}},{key:"wait",value:function(e){var t=this.lastEventTime+e-Date.now();return this.lastEventTime+=e,t>5?new Promise((function(e){return setTimeout(e,t)})):void 0}}]),e}(),F=n(13),k=function(){function e(t,n){Object(l.a)(this,e),this.file=void 0,this.howl=void 0,this.format=void 0,this.loopTarget={},this.loopCounter={},this.file=window.URL.createObjectURL(new File([t],n)),this.format=n.toLowerCase().split(".").pop(),this.howl=new F.Howl({src:[this.file],format:[this.format],html5:!F.Howler.usingWebAudio,onend:this.onEnd.bind(this),onloaderror:function(e,t){console.error("Howler Load Error ".concat(e," ").concat(t))},onplayerror:function(e,t){console.error("Howler Play Error ".concat(e," ").concat(t))}})}return Object(c.a)(e,[{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;1!==e&&(this.howl._loop=!0);var t=this.howl.play();this.loopCounter[t]=0,this.loopTarget[t]=e}},{key:"stop",value:function(){void 0!==this.howl&&this.howl.stop()}},{key:"onEnd",value:function(e){0!==this.loopTarget[e]&&++this.loopCounter[e]>=this.loopTarget[e]&&(this.howl._loop=!1,this.howl.stop(e))}},{key:"endLoop",value:function(){for(var e in this.howl._loop=!1,this.loopTarget)this.loopTarget[e]=1}}]),e}(),x=function(){function e(t,n){return Object(l.a)(this,e),this.info={},this.soundFiles={},this.keySound=void 0,this.autoplay=void 0,this.keyLED=void 0,this.canvas=void 0,this.activeKeyLED={},this.canvas=n.current,this.unpack(t)}return Object(c.a)(e,[{key:"unpack",value:function(e){var t=this;return new Promise(function(){var o=Object(m.a)(v.a.mark((function o(r,a){var i,s,l,c,d,p,f,_,h,m,F,x,w,A,C,T,j,S,O,I,D,L,E,P,M,B,H,N,G,X,K;return v.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,console.log(t.info),i=n(29),o.next=5,i.loadAsync(e).then((function(e){return Object.values(e.files)}),(function(e){a("Failed to extract selected file"),console.log(e)}));case 5:s=o.sent,l=void 0,c=void 0,d=void 0,p={},f=Object(u.a)(s),o.prev=11,h=v.a.mark((function e(){var n,o,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=_.value,(o=n.name.toLowerCase()).endsWith("/")){e.next=37;break}if(!o.includes("sounds/")){e.next=10;break}return console.log("Sound file: "+o),e.next=7,n.async("blob").then((function(e){return new k(e,o.split("/").pop())}));case 7:t.soundFiles[o.split("/").pop()]=e.sent,e.next=37;break;case 10:return e.next=12,n.async("text").then((function(e){return e.split(/\r?\n/)}));case 12:if(r=e.sent,!o.endsWith("info")){e.next=36;break}if(console.log("Info file: "+o),l=o.slice(0,-4),console.log(" project root: "+l),r.forEach((function(e){return t.info[e.split("=")[0]]=e.split("=")[1]})),t.info.buttonX=parseInt(t.info.buttonX),t.info.buttonY=parseInt(t.info.buttonY),t.info.chain=parseInt(t.info.chain),t.info.squareButton="true"===t.info.squareButton,t.info.landscape="true"===t.info.landscape,console.log(" title: "+t.info.title),console.log(" producerName: "+t.info.producerName),console.log(" buttonX: "+t.info.buttonX),console.log(" buttonY: "+t.info.buttonY),console.log(" chain: "+t.info.chain),console.log(" squareButton: "+t.info.squareButton),console.log(" landscape: "+t.info.landscape),8===t.info.buttonX&&8===t.info.buttonY){e.next=33;break}return a("Only 8x8 Unipad project are supported"),e.abrupt("return",{v:void 0});case 33:t.info.chain,e.next=37;break;case 36:o.endsWith("keysound")?(console.log("KeySound file: "+o),c=r):o.endsWith("autoplay")?(console.log("AutoPlay file: "+o),d=r):o.includes("keyled/")?(console.log("KeyLED file: "+o),p[o]=r):console.log("Unknown file: "+o);case 37:case"end":return e.stop()}}),e)})),f.s();case 14:if((_=f.n()).done){o.next=21;break}return o.delegateYield(h(),"t0",16);case 16:if("object"!==typeof(m=o.t0)){o.next=19;break}return o.abrupt("return",m.v);case 19:o.next=14;break;case 21:o.next=26;break;case 23:o.prev=23,o.t1=o.catch(11),f.e(o.t1);case 26:return o.prev=26,f.f(),o.finish(26);case 29:for(t.keySound=new Array(t.info.chain).fill(null).map((function(){return new Array(t.info.buttonX).fill(null).map((function(){return new Array(t.info.buttonY).fill(null).map((function(){return new Array}))}))})),t.keyLED=new Array(t.info.chain).fill(null).map((function(){return new Array(t.info.buttonX).fill(null).map((function(){return new Array(t.info.buttonY).fill(null).map((function(){return new Array}))}))})),F=0,x=Object.entries(p);F<x.length;F++)w=Object(y.a)(x[F],2),A=w[0],C=w[1],T=A.split("/").pop().split(" "),j=void 0!==T[4]?T[4].charCodeAt(0)-97:0,S=[parseInt(T[0])-1,parseInt(T[2])-1,parseInt(T[1])-1,parseInt(T[3])],O=S[0],I=S[1],D=S[2],L=S[3],t.keyLED[O][I][D][j]=new g(C,L,t.canvas,[O,I,D,j],t.activeKeyLED);E=Object(u.a)(c),o.prev=33,E.s();case 35:if((P=E.n()).done){o.next=45;break}if(""!=(M=(M=P.value).trim())){o.next=40;break}return o.abrupt("continue",43);case 40:B=M.split(" "),H=[parseInt(B[0])-1,parseInt(B[2])-1,parseInt(B[1])-1,B[3].toLowerCase()],N=H[0],G=H[1],X=H[2],K=H[3],t.keySound[N][G][X].push([t.soundFiles[K],B.slice(4)]);case 43:o.next=35;break;case 45:o.next=50;break;case 47:o.prev=47,o.t2=o.catch(33),E.e(o.t2);case 50:return o.prev=50,E.f(),o.finish(50);case 53:void 0!==d&&(t.autoplay=new b(d,t.canvas)),r(t),o.next=60;break;case 57:o.prev=57,o.t3=o.catch(0),a(o.t3);case 60:case"end":return o.stop()}}),o,null,[[0,57],[11,23,26,29],[33,47,50,53]])})));return function(e,t){return o.apply(this,arguments)}}())}},{key:"stopKeySound",value:function(){F.Howler.stop()}},{key:"stopKeyLED",value:function(){for(var e in this.activeKeyLED){var t=Object(y.a)(this.activeKeyLED[e],4),n=t[0],o=t[1],r=t[2],a=t[3];this.keyLED[n][o][r][a].stop(!1),delete this.activeKeyLED[e]}setTimeout(this.canvas.clearCanvas(),200)}},{key:"stopAll",value:function(){this.stopKeyLED(),this.stopKeySound()}}]),e}(),w=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={keyState:!1},e.on=function(){e.keyState||(e.keyState=!0,e.props.on(e.props.x,e.props.y))},e.off=function(){e.keyState&&(e.keyState=!1,e.props.off(e.props.x,e.props.y))},e.shouldUpdate=function(t){return e.props.color!==t.color},e.render=function(){return Object(o.jsxs)("div",{style:{position:"relative",display:"grid"},children:[e.isTouchDevice()?Object(o.jsx)("button",{className:e.props.class,style:{backgroundColor:e.props.color},onTouchStart:e.on,onTouchEnd:e.off,onTouchCancel:e.off}):Object(o.jsx)("button",{className:e.props.class,style:{backgroundColor:e.props.color},onMouseDown:e.on,onMouseUp:e.off,onMouseLeave:e.off}),Object(o.jsx)("div",{className:e.props.overlayClass})]})},e}return Object(c.a)(n,[{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}}]),n}(r.Component),A=["#808080","#dadfe4","#e6e9ed","#fafafa","#f8bbd0","#ef5350","#e57373","#ef9a9a","#fff3e0","#ffa726","#ffb960","#ffcc80","#ffe0b2","#ffee58","#fff59d","#fff9c4","#dcedc8","#8bc34a","#aed581","#bfdf9f","#5ee2b0","#00ce3c","#00ba43","#119c3f","#57ecc1","#00e864","#00e05c","#00d545","#7afddd","#00e4c5","#00e0b2","#01eec6","#49efef","#00e7d8","#00e5d1","#01efde","#6addff","#00dafe","#01d6ff","#08acdc","#73cefe","#0d9bf7","#148de4","#2a77c9","#8693ff","#2196f3","#4668f6","#4153dc","#b095ff","#8453fd","#634acd","#5749c5","#ffb7ff","#e863fb","#d655ed","#d14fe9","#fc99e3","#e736c2","#e52fbe","#e334b6","#ed353e","#ffa726","#f4df0b","#66bb6a","#5cd100","#00d29e","#2388ff","#3669fd","#00b4d0","#475cdc","#f2f3f5","#eef0f2","#f72737","#d2ea7b","#c8df10","#7fe422","#00c931","#00d7a6","#00d8fc","#0b9bfc","#585cf5","#ac59f0","#d980dc","#b8814a","#ff9800","#abdf22","#9ee154","#66bb6a","#3bda47","#6fdeb9","#27dbda","#9cc8fd","#79b8f7","#afafef","#d580eb","#f74fca","#ea8a1f","#dbdb08","#9cd60d","#f3d335","#c8af41","#00ca69","#24d2b0","#757ebe","#5388db","#e5c5a6","#e93b3b","#f9a2a1","#ed9c65","#e1ca72","#b8da78","#98d52c","#626cbd","#cac8a0","#90d4c2","#ceddfe","#beccf7","#d2d7de","#dadfe4","#e6e9ed","#fe1624","#cd2724","#9ccc65","#009c1b","#ffff00","#beb212","#f5d01d","#e37829"],C=["#000000","#3F3F3F","#7F7F7F","#FFFFFF","#FF3F3F","#FF0000","#7F0000","#3F0000","#FFBF6F","#FF3F00","#7F1F00","#3F0F00","#FFAF2F","#FFFF00","#7F7F00","#3F3F00","#7FFF2F","#4FFF00","#2F7F00","#173F00","#4FFF3F","#00FF00","#007F00","#003F00","#4FFF4F","#00FF1F","#007F0F","#003F07","#4FFF5F","#00FF5F","#007F2F","#003F17","#4FFFBF","#00FF9F","#007F4F","#003F27","#4FBFFF","#00AFFF","#00577F","#002F3F","#4F7FFF","#0057FF","#002F7F","#00173F","#2F1FFF","#0000FF","#00007F","#00003F","#5F3FFF","#2F00FF","#17007F","#0F003F","#FF3FFF","#FF00FF","#7F007F","#3F003F","#FF3F6F","#FF004F","#7F002F","#3F001F","#FF0F00","#9F3F00","#7F4F00","#2F2F00","#003F00","#003F1F","#001F6F","#0000FF","#003F3F","#1F00BF","#5F3F4F","#1F0F17","#FF0000","#BFFF2F","#AFEF00","#5FFF00","#0F7F00","#00FF5F","#009FFF","#002FFF","#1F00FF","#5F00EF","#AF1F7F","#2F0F00","#FF2F00","#7FDF00","#6FFF1F","#00FF00","#3FFF2F","#5FEF6F","#3FFFCF","#5F8FFF","#2F4FCF","#6F4FDF","#DF1FFF","#FF005F","#FF4F00","#BFAF00","#8FFF00","#7F5F00","#3F2F00","#00470F","#0F4F1F","#17172F","#171F5F","#5F3717","#7F0000","#DF3F2F","#DF470F","#FFBF1F","#9FDF2F","#6FAF0F","#17172F","#DFDF6F","#7FEF8F","#9F9FFF","#8F6FFF","#3F3F3F","#6F6F6F","#DFFFFF","#9F0000","#370000","#17CF00","#003F00","#BFAF00","#3F2F00","#AF4F00","#4F0F00"],T={"\u25fb":{class:"LEDButtonSquare"},"\u25fc\ufe0f":{class:"LEDButtonSquare",overlayClass:"LEDButtonSquareOverlay"},"\u25ef":{class:"LEDButtonCircle75",overlayClass:"LEDButtonCircle75Overlay"},"\u2b24":{class:"LEDButtonCircle75",overlayClass:"LEDButtonCircle75Overlay"},"\u25f8":{class:"LEDButtonSquare"},"\u25f9":{class:"LEDButtonSquare"},"\u25fa":{class:"LEDButtonSquare"},"\u22bf":{class:"LEDButtonSquare"},"\u25e4":{class:"LEDButtonSquare",overlayClass:"LEDButtonSquareOverlay"},"\u25e5":{class:"LEDButtonSquare",overlayClass:"LEDButtonSquareOverlay"},"\u25e3":{class:"LEDButtonSquare",overlayClass:"LEDButtonSquareOverlay"},"\u25e2":{class:"LEDButtonSquare",overlayClass:"LEDButtonSquareOverlay"},"\u25ac":{class:"LEDButtonRectangle",overlayClass:"LEDButtonRectangleOverlay"},"\u29bf":{class:"LEDButtonCircleLarge",overlayClass:"LEDButtonCircleLargeOverlay"}},j=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(e){var o;return Object(l.a)(this,n),(o=t.call(this,e)).state={colormap:new Array(o.props.layoutConfig.width).fill(null).map((function(){return new Array(o.props.layoutConfig.height).fill(A[0])}))},o.keypressHistory=new Array(o.props.layoutConfig.width).fill(null).map((function(){return new Array(o.props.layoutConfig.height).fill(0)})),o.currentChain=0,o.midiInputHandler=function(e){console.log(e.data);var t=Object(y.a)(e.data,3),n=t[0],r=t[1],a=t[2],i=void 0,s=void 0;if(void 0!==o.props.inputConfig.noteToXY){var u=o.props.inputConfig.noteToXY(r);if(void 0==u)return;var l=Object(y.a)(u,2);i=l[0],s=l[1]}else{var c=o.indexOf2dArray(r,o.props.inputConfig.keymap),d=Object(y.a)(c,2);i=d[0],s=d[1]}if(console.log([i,s]),void 0!==i&&void 0!==s)switch(n>>4){case 9:case 11:if(0!=a){o.keyOn(i,s,o.props.inputConfig);break}case 8:o.keyOff(i,s,o.props.inputConfig)}},o.keyOn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.props.layoutConfig,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=1,u=e,l=t;if(r){var c=o.arrayCalculation([e,t],n.canvas_origin,"+"),d=Object(y.a)(c,2);e=d[0],t=d[1]}else{var p=o.arrayCalculation([e,t],n.canvas_origin,"-"),f=Object(y.a)(p,2);u=f[0],l=f[1]}if(console.log("Note On - "+e.toString()+" "+t.toString()),void 0!==o.props.projectFile&&u>=0&&u<8&&l>=0&&l<8){if(i&&void 0!==o.props.projectFile.keyLED&&void 0!==o.props.projectFile.keyLED[o.currentChain]&&void 0!==o.props.projectFile.keyLED[o.currentChain][u]&&void 0!==o.props.projectFile.keyLED[o.currentChain][u][l]&&o.props.projectFile.keyLED[o.currentChain][u][l].length>0){var _=o.keypressHistory[u][l]%o.props.projectFile.keyLED[o.currentChain][u][l].length;o.props.projectFile.keyLED[o.currentChain][u][l][_].stop(),o.props.projectFile.keyLED[o.currentChain][u][l][_].play()}if(a&&void 0!==o.props.projectFile.keySound&&void 0!==o.props.projectFile.keySound[o.currentChain]&&void 0!==o.props.projectFile.keySound[o.currentChain][u]&&void 0!==o.props.projectFile.keySound[o.currentChain][u][l]&&o.props.projectFile.keySound[o.currentChain][u][l].length>0){var h=o.keypressHistory[u][l]%o.props.projectFile.keySound[o.currentChain][u][l].length;void 0!==o.props.projectFile.keySound[o.currentChain][u][l][h][1]&&void 0!==o.props.projectFile.keySound[o.currentChain][u][l][h][1][0]&&(s=parseInt(o.props.projectFile.keySound[o.currentChain][u][l][h][1][0])),o.props.projectFile.keySound[o.currentChain][u][l][h][0].stop(),o.props.projectFile.keySound[o.currentChain][u][l][h][0].play(s)}}},o.checkChain=function(e,t,n){if(void 0!==n.chainKey)for(var r=0;r<Math.min(n.chainKey.length,o.props.projectFile.info.chain);r++)n.chainKey[r][0]===e&&n.chainKey[r][1]===t&&o.chainChange(r)},o.keyOff=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.props.layoutConfig,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=e,u=t;if(r){var l=o.arrayCalculation([e,t],n.canvas_origin,"+"),c=Object(y.a)(l,2);e=c[0],t=c[1]}else{var d=o.arrayCalculation([e,t],n.canvas_origin,"-"),p=Object(y.a)(d,2);s=p[0],u=p[1]}if(console.log("Note Off - "+e.toString()+" "+t.toString()),void 0!==o.props.projectFile)if(s>=0&&s<8&&u>=0&&u<8){if(i&&void 0!==o.props.projectFile.keyLED&&void 0!==o.props.projectFile.keyLED[o.currentChain]&&void 0!==o.props.projectFile.keyLED[o.currentChain][s]&&void 0!==o.props.projectFile.keyLED[o.currentChain][s][u]&&o.props.projectFile.keyLED[o.currentChain][s][u].length>0){var f=o.keypressHistory[s][u]%o.props.projectFile.keyLED[o.currentChain][s][u].length;void 0!==o.props.projectFile.keyLED[o.currentChain][s][u][f]&&0===o.props.projectFile.keyLED[o.currentChain][s][u][f].repeat&&o.props.projectFile.keyLED[o.currentChain][s][u][f].endLoop()}if(a&&void 0!==o.props.projectFile.keySound&&void 0!==o.props.projectFile.keySound[o.currentChain]&&void 0!==o.props.projectFile.keySound[o.currentChain][s]&&void 0!==o.props.projectFile.keySound[o.currentChain][s][u]&&o.props.projectFile.keySound[o.currentChain][s][u].length>0){var _=o.keypressHistory[s][u]%o.props.projectFile.keySound[o.currentChain][s][u].length;if(void 0!==o.props.projectFile.keySound[o.currentChain][s][u][_][1]&&("0"==o.props.projectFile.keySound[o.currentChain][s][u][_][1][0]&&o.props.projectFile.keySound[o.currentChain][s][u][_][0].endLoop(),void 0!==o.props.projectFile.keySound[o.currentChain][s][u][_][1][1])){var h=parseInt(o.props.projectFile.keySound[o.currentChain][s][u][_][1][1])-1;console.log("Wormhole to Chain ".concat(h+1)),o.chainChange(h)}}void 0!=o.keypressHistory[s]&&void 0!=o.keypressHistory[s][u]&&o.keypressHistory[s][u]++}else o.checkChain(e,t,n)},o.chainChange=function(e){console.log("Chain Changed to "+(e+1)),e!==o.currentChain&&o.clearKeypressHistory(),o.currentChain=e},o.setColor=function(e,t,n){o.setColorCanvas(e,t,n),o.setColorOutput(e,t,n)},o.arrayCalculation=function(e,t,n){var o=[];if(e.length===t.length)switch(n){case"+":for(var r=0;r<e.length;r++)o.push(e[r]+t[r]);return o;case"-":for(r=0;r<e.length;r++)o.push(e[r]-t[r]);return o}},setInterval((function(){o.setState({colormap:o.state.colormap})}),1e3/60),o}return Object(c.a)(n,[{key:"shouldComponentUpdate",value:function(e){return e.projectFile!==this.props.projectFile&&(console.log("Project File Loaded"),this.initlalizeCanvas()),e.layoutConfig!==this.props.layoutConfig&&this.initlalizeCanvas(e.layoutConfig),e.inputDevice!==this.props.inputDevice&&this.setupMidiInput(e.inputDevice,this.props.inputDevice),!0}},{key:"initlalizeCanvas",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.layoutConfig;this.clearCanvas(e),this.clearKeypressHistory(),this.currentChain=0}},{key:"clearCanvas",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.layoutConfig;this.state.colormap=new Array(e.width).fill(null).map((function(){return new Array(e.height).fill(A[0])}))}},{key:"clearKeypressHistory",value:function(){this.keypressHistory=new Array(8).fill(null).map((function(){return new Array(8).fill(0)}))}},{key:"setupMidiInput",value:function(e,t){void 0!==t&&t.removeListener(),void 0!==e&&e.addListener("midimessage","all",this.midiInputHandler.bind(this))}},{key:"setColorCanvas",value:function(e,t,n){var o=void 0,r=void 0;if("l"===e){if(void 0==this.props.LayoutConfig)return;var a=Object(y.a)(this.props.layoutConfig.lKey,2);o=a[0],r=a[1]}else if("mc"===e){if(void 0===this.props.layoutConfig.mcTable||null==this.props.layoutConfig.mcTable[t])return;var i=Object(y.a)(this.props.layoutConfig.mcTable[t],2);o=i[0],r=i[1]}else{var s=this.arrayCalculation([e,t],this.props.layoutConfig.canvas_origin,"+"),u=Object(y.a)(s,2);o=u[0],r=u[1]}try{/^#[0-9A-F]{6}$/i.test(n)?this.state.colormap[o][r]=n:this.state.colormap[o][r]=A[n]}catch(l){console.error(l),console.error([e,t,n,o,r])}}},{key:"setColorOutput",value:function(e,t,n){if(void 0!==this.props.outputDevice&&void 0!==this.props.outputConfig){var o=void 0,r=void 0;if("l"===e){if(void 0==this.props.outputConfig.lKey)return;var a=Object(y.a)(this.props.outputConfig.lKey,2);o=a[0],r=a[1]}else if("mc"===e){if(void 0===this.props.outputConfig.mcTable||null==this.props.outputConfig.mcTable[t])return;var i=Object(y.a)(this.props.outputConfig.mcTable[t],2);o=i[0],r=i[1]}else{var s=this.arrayCalculation([e,t],this.props.outputConfig.canvas_origin,"+"),u=Object(y.a)(s,2);o=u[0],r=u[1]}try{/^#[0-9A-F]{6}$/i.test(n)?this.sendSysex(this.props.outputConfig.hexSysexGen(r,o,n)):this.sendMidi("NoteOn",this.props.outputConfig.channel,this.props.outputConfig.keymap[r][o],n)}catch(l){console.error(l),console.error([e,t,n,o,r])}}}},{key:"sendMidi",value:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if("string"===typeof n){var r=n.charAt(0);switch(n=parseInt(n.substr(1)),r){case"C":e="CC";break;case"X":e="HEX";break;default:return}}switch(e){case"NoteOn":this.props.outputDevice.send(144+t-1,[n,o]);break;case"NoteOff":this.props.outputDevice.send(128+t-1,[n,o]);break;case"CC":this.props.outputDevice.send(176+t-1,[n,o]);break;case"HEX":this.sendSysex(this.props.outputConfig.hexSysexGen(n,C[o]))}}},{key:"sendSysex",value:function(e){this.props.outputDevice.sendSysex([],e)}},{key:"indexOf2dArray",value:function(e,t){for(var n=0,o=t.length;n<o;n++)for(var r=0,a=t[n].length;r<a;r++)if(t[n][r]===e)return[r,n];return[void 0,void 0]}},{key:"render",value:function(){var e=this;return Object(o.jsx)("div",{className:"canvas",style:{padding:this.props.layoutConfig.padding,borderRadius:this.props.layoutConfig.radius},children:this.props.layoutConfig.layout.map((function(t,n){return Object(o.jsx)("div",{className:"button-row",children:e.props.layoutConfig.layout[n].map((function(t,r){return Object.keys(T).includes(t)?Object(o.jsx)(w,{x:r,y:n,class:T[t].class,overlayClass:T[t].overlayClass,color:e.state.colormap[r][n],on:e.keyOn,off:e.keyOff}):Object(o.jsx)("div",{style:{width:"96px"}},"Spacer "+r.toString()+"-"+n.toString())}))})}))})}}]),n}(r.Component),S={defaultLayout:"Launchpad Pro"},O={"Launchpad Pro":{channel:1,midiNameRegex:"Launchpad Pro",initializationSysex:[[0,32,41,2,16,33,0],[0,32,41,2,16,14,0],[0,32,41,2,16,10,99,0]],layout:[["\u3000","\u2b24","\u2b24","\u2b24","\u2b24","\u2b24","\u2b24","\u2b24","\u2b24","\u3000"],["\u2b24","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u2b24"],["\u2b24","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u2b24"],["\u2b24","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u2b24"],["\u2b24","\u25fb","\u25fb","\u25fb","\u25f8","\u25f9","\u25fb","\u25fb","\u25fb","\u2b24"],["\u2b24","\u25fb","\u25fb","\u25fb","\u25fa","\u22bf","\u25fb","\u25fb","\u25fb","\u2b24"],["\u2b24","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u2b24"],["\u2b24","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u2b24"],["\u2b24","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u2b24"],["\u3000","\u2b24","\u2b24","\u2b24","\u2b24","\u2b24","\u2b24","\u2b24","\u2b24"," "]],keymap:[[null,91,92,93,94,95,96,97,98,null],[80,81,82,83,84,85,86,87,88,89],[70,71,72,73,74,75,76,77,78,79],[60,61,62,63,64,65,66,67,68,69],[50,51,52,53,54,55,56,57,58,59],[40,41,42,43,44,45,46,47,48,49],[30,31,32,33,34,35,36,37,38,39],[20,21,22,23,24,25,26,27,28,29],[10,11,12,13,14,15,16,17,18,19],[null,1,2,3,4,5,6,7,8,"X99"]],width:10,height:10,padding:25,radius:15,canvas_origin:[1,1],chainKey:[[9,1],[9,2],[9,3],[9,4],[9,5],[9,6],[9,7],[9,8],[8,9],[7,9],[6,9],[5,9],[4,9],[3,9],[2,9],[1,9],[0,8],[0,7],[0,6],[0,5],[0,4],[0,3],[0,2],[0,1]],mcTable:[[1,0],[2,0],[3,0],[4,0],[5,0],[6,0],[7,0],[8,0],[9,1],[9,2],[9,3],[9,4],[9,5],[9,6],[9,7],[9,8],[8,9],[7,9],[6,9],[5,9],[4,9],[3,9],[2,9],[1,9],[0,8],[0,7],[0,6],[0,5],[0,4],[0,3],[0,2],[0,1]],lKey:[9,9],noteToXY:function(e){if(e>=1&&e<=99)return[e%10,9-Math.floor(e/10)]},hexSysexGen:function(){if(2!=arguments.length&&3!=arguments.length)return[];switch(arguments.length){case 2:var e=arguments[0],t=arguments[1];break;case 3:var n=arguments[0]+1,o=arguments[1]+1;e=10*n+o,t=arguments[2];break;default:return[]}if("string"!==typeof t||"#"!==t.charAt(0))return[];var r=(t=parseInt(t.substr(1),16))>>16>>2,a=(255&t)>>2,i=(255&t)>>2;return[0,32,41,2,16,11,e,r,a,i]}},"Launchpad Pro (Phantom)":{layout:[["\u3000","\u2b24","\u2b24","\u2b24","\u2b24","\u2b24","\u2b24","\u2b24","\u2b24","\u3000"],["\u2b24","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u2b24"],["\u2b24","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u2b24"],["\u2b24","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u2b24"],["\u2b24","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25e4","\u25e5","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u2b24"],["\u2b24","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25e3","\u25e2","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u2b24"],["\u2b24","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u2b24"],["\u2b24","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u2b24"],["\u2b24","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u2b24"],["\u3000","\u2b24","\u2b24","\u2b24","\u2b24","\u2b24","\u2b24","\u2b24","\u2b24"," "]],width:10,height:10,padding:25,radius:15,canvas_origin:[1,1],chainKey:[[9,1],[9,2],[9,3],[9,4],[9,5],[9,6],[9,7],[9,8],[8,9],[7,9],[6,9],[5,9],[4,9],[3,9],[2,9],[1,9],[0,8],[0,7],[0,6],[0,5],[0,4],[0,3],[0,2],[0,1]],mcTable:[[1,0],[2,0],[3,0],[4,0],[5,0],[6,0],[7,0],[8,0],[9,1],[9,2],[9,3],[9,4],[9,5],[9,6],[9,7],[9,8],[8,9],[7,9],[6,9],[5,9],[4,9],[3,9],[2,9],[1,9],[0,8],[0,7],[0,6],[0,5],[0,4],[0,3],[0,2],[0,1]],lKey:[9,9]},"Launchpad Pro (CFW)":{channel:16,midiNameRegex:"Launchpad Open",initializationSysex:[[0,32,41,2,16,33,1],[0,32,41,2,16,14,0]],keymap:[[null,28,29,30,31,32,33,34,35,null],[108,64,65,66,67,96,97,98,99,100],[109,60,61,62,63,92,93,94,95,101],[110,56,57,58,59,88,89,90,91,102],[111,52,53,54,55,84,85,86,87,103],[112,48,49,50,51,80,81,82,83,104],[113,44,45,46,47,76,77,78,79,105],[114,40,41,42,43,72,73,74,75,106],[115,36,37,38,39,68,69,70,71,107],[null,116,117,118,119,120,121,122,123,27]],width:10,height:10,padding:30,radius:15,canvas_origin:[1,1],chainKey:[[9,1],[9,2],[9,3],[9,4],[9,5],[9,6],[9,7],[9,8],[8,9],[7,9],[6,9],[5,9],[4,9],[3,9],[2,9],[1,9],[0,8],[0,7],[0,6],[0,5],[0,4],[0,3],[0,2],[0,1]],mcTable:[[1,0],[2,0],[3,0],[4,0],[5,0],[6,0],[7,0],[8,0],[9,1],[9,2],[9,3],[9,4],[9,5],[9,6],[9,7],[9,8],[8,9],[7,9],[6,9],[5,9],[4,9],[3,9],[2,9],[1,9],[0,8],[0,7],[0,6],[0,5],[0,4],[0,3],[0,2],[0,1]],lKey:[9,9],noteToXY:function(e){if(e>=36&&e<=99){return[[1,8],[2,8],[3,8],[4,8],[1,7],[2,7],[3,7],[4,7],[1,6],[2,6],[3,6],[4,6],[1,5],[2,5],[3,5],[4,5],[1,4],[2,4],[3,4],[4,4],[1,3],[2,3],[3,3],[4,3],[1,2],[2,2],[3,2],[4,2],[1,1],[2,1],[3,1],[4,1],[5,8],[6,8],[7,8],[8,8],[5,7],[6,7],[7,7],[8,7],[5,6],[6,6],[7,6],[8,6],[5,5],[6,5],[7,5],[8,5],[5,4],[6,4],[7,4],[8,4],[5,3],[6,3],[7,3],[8,3],[5,2],[6,2],[7,2],[8,2],[5,1],[6,1],[7,1],[8,1]][e-36]}return e>=100&&e<=107?this.mcTable[e-100]:e>=116&&e<123?this.mcTable[8-(e-116)+8]:e>=108&&e<115?this.mcTable[e-108+16]:e>=28&&e<35?this.mcTable[e-28+24]:27==e?this.lKey:void 0},hexSysexGen:function(){if(2!=arguments.length&&3!=arguments.length)return[];switch(arguments.length){case 2:var e=arguments[0],t=arguments[1];break;case 3:var n=arguments[0]+1,o=arguments[1]+1;e=10*n+o,t=arguments[2];break;default:return[]}if("string"!==typeof t||"#"!==t.charAt(0))return[];var r=(t=parseInt(t.substr(1),16))>>16>>2,a=(255&t)>>2,i=(255&t)>>2;return[0,32,41,2,16,11,e,r,a,i]}},"Launchpad MK2":{channel:1,midiNameRegex:"^Launchpad MK2",layout:[["\u2b24","\u2b24","\u2b24","\u2b24","\u2b24","\u2b24","\u2b24","\u2b24","\u3000"],["\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u2b24"],["\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u2b24"],["\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u2b24"],["\u25fb","\u25fb","\u25fb","\u25f8","\u25f9","\u25fb","\u25fb","\u25fb","\u2b24"],["\u25fb","\u25fb","\u25fb","\u25fa","\u22bf","\u25fb","\u25fb","\u25fb","\u2b24"],["\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u2b24"],["\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u2b24"],["\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u2b24"]],keymap:[["C104","C105","C106","C107","C108","C109","C110","C111",null],[81,82,83,84,85,86,87,88,89],[71,72,73,74,75,76,77,78,79],[61,62,63,64,65,66,67,68,69],[51,52,53,54,55,56,57,58,59],[41,42,43,44,45,46,47,48,49],[31,32,33,34,35,36,37,38,39],[21,22,23,24,25,26,27,28,29],[11,12,13,14,15,16,17,18,19]],width:9,height:9,padding:30,radius:15,canvas_origin:[0,1],chainKey:[[8,1],[8,2],[8,3],[8,4],[8,5],[8,6],[8,7],[8,8]],mcTable:[[0,0],[1,0],[2,0],[3,0],[4,0],[5,0],[6,0],[7,0],[8,1],[8,2],[8,3],[8,4],[8,5],[8,6],[8,7],[8,8],null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],noteToXY:function(e){return e>=11&&e<=89?[Math.floor(e/10),e%10]:e>=104&&e<=111?this.mcTable[e-104+24]:void 0},hexSysexGen:function(){if(2!=arguments.length&&3!=arguments.length)return[];switch(arguments.length){case 2:var e=arguments[0],t=arguments[1];break;case 3:var n=arguments[0]+1,o=arguments[1]+1;e=10*n+o,t=arguments[2];break;default:return[]}if("string"!==typeof t||"#"!==t.charAt(0))return[];var r=(t=parseInt(t.substr(1),16))>>16>>2,a=(255&t)>>2,i=(255&t)>>2;return[0,32,41,2,24,11,e,r,a,i]}},"Launchpad X":{channel:1,midiNameRegex:"^Launchpad X|LPX MIDI",initializationSysex:[[0,32,41,2,12,14,1]],layout:[["\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","n"],["\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fc\ufe0f"],["\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fc\ufe0f"],["\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fc\ufe0f"],["\u25fb","\u25fb","\u25fb","\u25f8","\u25f9","\u25fb","\u25fb","\u25fb","\u25fc\ufe0f"],["\u25fb","\u25fb","\u25fb","\u25fa","\u22bf","\u25fb","\u25fb","\u25fb","\u25fc\ufe0f"],["\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fc\ufe0f"],["\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fc\ufe0f"],["\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fc\ufe0f"]],keymap:[[91,92,93,94,95,96,97,98,99],[81,82,83,84,85,86,87,88,89],[71,72,73,74,75,76,77,78,79],[61,62,63,64,65,66,67,68,69],[51,52,53,54,55,56,57,58,59],[41,42,43,44,45,46,47,48,49],[31,32,33,34,35,36,37,38,39],[21,22,23,24,25,26,27,28,29],[11,12,13,14,15,16,17,18,19]],width:9,height:9,padding:30,radius:5,canvas_origin:[0,1],chainKey:[[8,1],[8,2],[8,3],[8,4],[8,5],[8,6],[8,7],[8,8]],mcTable:[[0,0],[1,0],[2,0],[3,0],[4,0],[5,0],[6,0],[7,0],[8,1],[8,2],[8,3],[8,4],[8,5],[8,6],[8,7],[8,8],null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],lKey:[0,9],noteToXY:function(e){if(e>=11&&e<=99)return[e%10-1,9-Math.floor(e/10)]},hexSysexGen:function(){if(2!=arguments.length&&3!=arguments.length)return[];switch(arguments.length){case 2:var e=arguments[0];if(null==this.mcTable[e])return[];var t=this.mcTable[e],n=arguments[1];break;case 3:var o=arguments[0]+1;t=arguments[1]+1,n=arguments[2];break;default:return[]}var r=10*o+t,a=n>>16>>1,i=(255&n)>>1,s=(255&n)>>1;return[0,32,41,2,12,3,3,r,a,i,s]}},"Launchpad Pro MK3":{channel:1,midiNameRegex:"^Launchpad Pro MK3",initializationSysex:[[0,32,41,2,12,14,0,17,0]],layout:[["\u3000","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","n"],["\u25fc\ufe0f","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fc\ufe0f"],["\u25fc\ufe0f","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fc\ufe0f"],["\u25fc\ufe0f","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fc\ufe0f"],["\u25fc\ufe0f","\u25fb","\u25fb","\u25fb","\u25f8","\u25f9","\u25fb","\u25fb","\u25fb","\u25fc\ufe0f"],["\u25fc\ufe0f","\u25fb","\u25fb","\u25fb","\u25fa","\u22bf","\u25fb","\u25fb","\u25fb","\u25fc\ufe0f"],["\u25fc\ufe0f","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fc\ufe0f"],["\u25fc\ufe0f","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fc\ufe0f"],["\u25fc\ufe0f","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fc\ufe0f"],["\u3000","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f","\u25fc\ufe0f"," "]],keymap:[[null,91,92,93,94,95,96,97,98,99],[80,81,82,83,84,85,86,87,88,89],[70,71,72,73,74,75,76,77,78,79],[60,61,62,63,64,65,66,67,68,69],[50,51,52,53,54,55,56,57,58,59],[40,41,42,43,44,45,46,47,48,49],[30,31,32,33,34,35,36,37,38,39],[20,21,22,23,24,25,26,27,28,29],[10,11,12,13,14,15,16,17,18,19],[null,1,2,3,4,5,6,7,8,null]],width:10,height:10,padding:25,radius:5,canvas_origin:[1,1],chainKey:[[9,1],[9,2],[9,3],[9,4],[9,5],[9,6],[9,7],[9,8]],mcTable:[[1,0],[2,0],[3,0],[4,0],[5,0],[6,0],[7,0],[8,0],[9,1],[9,2],[9,3],[9,4],[9,5],[9,6],[9,7],[9,8],[8,9],[7,9],[6,9],[5,9],[4,9],[3,9],[2,9],[1,9],[0,8],[0,7],[0,6],[0,5],[0,4],[0,3],[0,2],[0,1]],lKey:[0,9],noteToXY:function(e){return e>=1&&e<=99?[e%10,9-Math.floor(e/10)]:e>=101&&e<=108?[e-100,9]:void 0},hexSysexGen:function(){if(2!=arguments.length&&3!=arguments.length)return[];switch(arguments.length){case 2:var e=arguments[0],t=this.mcTable[e],n=arguments[1];break;case 3:var o=arguments[0]+1;t=arguments[1]+1,n=arguments[2];break;default:return[]}var r=10*o+t,a=n>>16>>1,i=(255&n)>>1,s=(255&n)>>1;return[0,32,41,2,14,3,3,r,a,i,s]}},Matrix:{channel:2,midiNameRegex:"^Matrix",layout:[["\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb"],["\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb"],["\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb"],["\u25fb","\u25fb","\u25fb","\u25f8","\u25f9","\u25fb","\u25fb","\u25fb"],["\u25fb","\u25fb","\u25fb","\u25fa","\u22bf","\u25fb","\u25fb","\u25fb"],["\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb"],["\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb"],["\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb","\u25fb"]],keymap:[[64,65,66,67,96,97,98,99],[60,61,62,63,92,93,94,95],[56,57,58,59,88,89,90,91],[52,53,54,55,84,85,86,87],[48,49,50,51,80,81,82,83],[44,45,46,47,76,77,78,79],[40,41,42,43,72,73,74,75],[36,37,38,39,68,69,70,71],[100,101,102,103,104,105,106,107]],width:8,height:8,padding:20,radius:15,canvas_origin:[0,0],chainKey:[[0,8],[1,8],[2,8],[3,8],[4,8],[5,8],[6,8],[7,8]],noteToXY:function(e){if(e>35&&e<100){return[[0,7],[1,7],[2,7],[3,7],[0,6],[1,6],[2,6],[3,6],[0,5],[1,5],[2,5],[3,5],[0,4],[1,4],[2,4],[3,4],[0,3],[1,3],[2,3],[3,3],[0,2],[1,2],[2,2],[3,2],[0,1],[1,1],[2,1],[3,1],[0,0],[1,0],[2,0],[3,0],[4,7],[5,7],[6,7],[7,7],[4,6],[5,6],[6,6],[7,6],[4,5],[5,5],[6,5],[7,5],[4,4],[5,4],[6,4],[7,4],[4,3],[5,3],[6,3],[7,3],[4,2],[5,2],[6,2],[7,2],[4,1],[5,1],[6,1],[7,1],[4,0],[5,0],[6,0],[7,0]][e-36]}if(e>99&&e<108)return this.chainKey[e-100]},hexSysexGen:function(){if(3!=arguments.length)return[];switch(arguments.length){case 3:var e=arguments[2];break;default:return}var t=e>>16>>1,n=(255&e)>>1,o=(255&e)>>1;return[240,0,2,3,1,0,18,32,0,3,t,n,o,247]}},"Midi Fighter 64":{channel:1,midiNameRegex:"^Midi Fighter 64",layout:[["\u29bf","\u29bf","\u29bf","\u29bf","\u29bf","\u29bf","\u29bf","\u29bf"],["\u29bf","\u29bf","\u29bf","\u29bf","\u29bf","\u29bf","\u29bf","\u29bf"],["\u29bf","\u29bf","\u29bf","\u29bf","\u29bf","\u29bf","\u29bf","\u29bf"],["\u29bf","\u29bf","\u29bf","\u29bf","\u29bf","\u29bf","\u29bf","\u29bf"],["\u29bf","\u29bf","\u29bf","\u29bf","\u29bf","\u29bf","\u29bf","\u29bf"],["\u29bf","\u29bf","\u29bf","\u29bf","\u29bf","\u29bf","\u29bf","\u29bf"],["\u29bf","\u29bf","\u29bf","\u29bf","\u29bf","\u29bf","\u29bf","\u29bf"],["\u29bf","\u29bf","\u29bf","\u29bf","\u29bf","\u29bf","\u29bf","\u29bf"]],keymap:[[64,65,66,67,96,97,98,99],[60,61,62,63,92,93,94,95],[56,57,58,59,88,89,90,91],[52,53,54,55,84,85,86,87],[48,49,50,51,80,81,82,83],[44,45,46,47,76,77,78,79],[40,41,42,43,72,73,74,75],[36,37,38,39,68,69,70,71]],width:8,height:8,padding:20,radius:50,canvas_origin:[0,0],noteToXY:function(e){if(e>35&&e<100){return[[0,7],[1,7],[2,7],[3,7],[0,6],[1,6],[2,6],[3,6],[0,5],[1,5],[2,5],[3,5],[0,4],[1,4],[2,4],[3,4],[0,3],[1,3],[2,3],[3,3],[0,2],[1,2],[2,2],[3,2],[0,1],[1,1],[2,1],[3,1],[0,0],[1,0],[2,0],[3,0],[4,7],[5,7],[6,7],[7,7],[4,6],[5,6],[6,6],[7,6],[4,5],[5,5],[6,5],[7,5],[4,4],[5,4],[6,4],[7,4],[4,3],[5,3],[6,3],[7,3],[4,2],[5,2],[6,2],[7,2],[4,1],[5,1],[6,1],[7,1],[4,0],[5,0],[6,0],[7,0]][e-36]}},hexSysexGen:function(){if(3!=arguments.length)return[];switch(arguments.length){case 3:var e=arguments[2];break;default:return}var t=e>>16>>1,n=(255&e)>>1,o=(255&e)>>1;return[240,0,2,3,1,0,18,32,0,3,t,n,o,247]}}},I=n(12),D=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(e){var o;return Object(l.a)(this,n),(o=t.call(this,e)).playAutoplay=function(){void 0!==o.props.project.autoplay?o.props.project.autoplay.play():alert("No project loaded!")},o.stopAutoplay=function(){void 0!==o.props.project.autoplay?(o.props.project.autoplay.stop(),o.props.canvas.current.initlalizeCanvas()):alert("No project loaded!")},o.pauseAutoplay=function(){void 0!==o.props.project.autoplay?(o.props.project.autoplay.pause(),o.props.project.stopAll()):alert("No project loaded!")},setInterval((function(){void 0!==o.props.project&&void 0!==o.props.project.autoplay&&o.forceUpdate()}),1e3/60),o}return Object(c.a)(n,[{key:"render",value:function(){var e=Object(o.jsx)("button",{style:{width:"50px",marginRight:"10px"},onClick:this.playAutoplay,children:"Play"}),t=Object(o.jsx)("button",{style:{width:"50px",marginRight:"10px"},onClick:this.pauseAutoplay,children:"Pause"}),n=Object(o.jsx)("button",{style:{width:"50px",marginRight:"10px"},onClick:this.stopAutoplay,children:"Stop"}),r=[],a="";if(void 0==this.props.project||void 0==this.props.project.autoplay||0===this.props.project.autoplay.total)return null;switch(this.props.project.autoplay.status){case"PLAYING":a=" - ".concat((this.props.project.autoplay.progress/this.props.project.autoplay.total*100).toFixed(2),"% completed (").concat(this.props.project.autoplay.progress,"/").concat(this.props.project.autoplay.total,")"),r.push(t);break;case"PAUSED":a=" - ".concat((this.props.project.autoplay.progress/this.props.project.autoplay.total*100).toFixed(2),"% completed (").concat(this.props.project.autoplay.progress,"/").concat(this.props.project.autoplay.total,") - Paused"),r.push(e,n);break;case"STOPPED":r.push(e)}return Object(o.jsxs)("div",{children:[Object(o.jsx)("text",{children:"Autoplay"+a}),Object(o.jsx)("div",{}),r]})}}]),n}(r.Component),L=n(11),E=n.n(L),P=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(e){var o;return Object(l.a)(this,n),(o=t.call(this,e)).state={projectFile:void 0,statusMessage:"No project loaded",midiInput:{},midiOutput:{},layoutConfigName:S.defaultLayout,layoutConfig:O[S.defaultLayout],inputDevice:void 0,inputConfigName:void 0,inputConfig:void 0,outputDevice:void 0,outputConfigName:void 0,outputConfig:void 0},o.canvas=a.a.createRef(),o.downloadProjectFile=function(e){alert("Download Unipack from "+e),fetch("https://cors-anywhere.herokuapp.com/"+e).then(function(e){var t=e.blob();console.log(t),o.loadProjectFile(t)}.bind(Object(d.a)(o)))},o.loadProjectFile=function(e){null!=e&&(o.setState({statusMessage:"Loading Unipack"}),new x(e,o.canvas).then((function(e){o.setState({projectFile:e}),console.log(e),o.setState({statusMessage:"Current Project: ".concat(o.state.projectFile.info.title," by ").concat(o.state.projectFile.info.producerName)})})).catch((function(t){o.setState({statusMessage:"Error Loading Unipack"}),alert("Error Loading Unipack: "+e.name),console.error("Error Loading Unipack"),console.error(t)})))},o}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.loadUserConfigPerfences(),setTimeout(this.initlization.bind(this),0)}},{key:"initlization",value:function(){var e=this;E.a.enable((function(t){t?e.onMIDIFailure():e.onMIDISuccess()}),!0);var t=new URLSearchParams(window.location.search);if(t.get("unipack")){var n=t.get("unipack");this.downloadProjectFile(n)}}},{key:"onMIDISuccess",value:function(){console.log("Got access your MIDI devices."),this.updateMidiList(),E.a.addListener("connected",this.onMidiStateChange.bind(this)),E.a.addListener("disconnected",this.onMidiStateChange.bind(this)),this.loadUserDevicePerfences()}},{key:"onMidiStateChange",value:function(e){console.log(e),console.log(e.port.name,e.port.type,e.port.state),"disconnected"===e.port.state&&("input"===e.port.type?void 0!==this.state.inputDevice&&this.state.inputDevice.name===e.port.name&&(this.setState({inputDevice:void 0}),this.setState({inputDeviceConfig:void 0}),this.setState({inputDeviceName:void 0})):"output"===e.port.type&&void 0!==this.state.outputDevice&&this.state.outputDevice.name===e.port.name&&(this.setState({outputDevice:void 0}),this.setState({outputDeviceConfig:void 0}),this.setState({outputDeviceName:void 0}))),this.updateMidiList()}},{key:"updateMidiList",value:function(){var e={};console.log("Input");var t,n=Object(u.a)(E.a.inputs);try{for(n.s();!(t=n.n()).done;){var o=t.value;console.log(o.name),e[o.name]=o}}catch(l){n.e(l)}finally{n.f()}this.setState({midiInput:e});var r={};console.log(),console.log("Output");var a,i=Object(u.a)(E.a.outputs);try{for(i.s();!(a=i.n()).done;){var s=a.value;console.log(s.name),r[s.name]=s}}catch(l){i.e(l)}finally{i.f()}this.setState({midiOutput:r})}},{key:"onMIDIFailure",value:function(){console.log("Could not access your MIDI devices."),alert("Could not access your MIDI devices. Try use another web browser or hardware platform.")}},{key:"autoConfigPicker",value:function(e,t){if(void 0!==e)for(var n in O)if(void 0!==O[n].midiNameRegex&&null!==e.match(O[n].midiNameRegex)){var o=O[n];switch(console.log("".concat(t?"Output":"input"," config has been auto assigned to ").concat(n)),t){case"Input":return this.setInputConfig({label:n,value:o}),!0;case"Output":return this.setOutputConfig({label:n,value:o}),!0}}return alert("Unable to find matching ".concat(t?"output":"input"," config for device ").concat(e)),!1}},{key:"render",value:function(){return Object(o.jsx)(a.a.Fragment,{children:Object(o.jsxs)("div",{className:"main",children:[Object(o.jsxs)("div",{className:"sidebar",children:[Object(o.jsx)("text",{children:"203 | Prismatic (Tech Preview Demo)"}),Object(o.jsx)("div",{className:"sidebarItem"}),Object(o.jsx)("text",{className:"sidebarItem",children:this.state.statusMessage}),Object(o.jsx)(_,{loadProjectFile:this.loadProjectFile}),Object(o.jsx)("div",{className:"sidebarItem"}),Object(o.jsx)("text",{children:"UI Layout"}),Object(o.jsx)(I.a,{className:"sidebarItem",options:this.prepSelectConfig(O,"layout"),autosize:!0,value:void 0!==this.state.layoutConfigName?{label:this.state.layoutConfigName,value:this.state.layoutConfig}:{label:"Layout Config",value:void 0},onChange:this.setLayoutConfig.bind(this)}),Object(o.jsx)("text",{children:"Midi Input Device"}),Object(o.jsx)(I.a,{className:"sidebarItem",options:this.prepSelectConfig(this.state.midiInput),autosize:!0,value:void 0!==this.state.inputDevice?{label:this.state.inputDevice.name,value:this.state.inputDevice}:{label:"Input Device",value:void 0},onChange:this.setInputDevice.bind(this)}),Object(o.jsx)("text",{children:"Midi Input Device Config"}),Object(o.jsx)(I.a,{className:"sidebarItem",options:this.prepSelectConfig(O,"keymap"),autosize:!0,value:void 0!==this.state.inputConfigName?{label:this.state.inputConfigName,value:this.state.inputConfig}:{label:"Input Device Config",value:void 0},onChange:this.setInputConfig.bind(this)}),Object(o.jsx)("text",{children:"Midi Output Device"}),Object(o.jsx)(I.a,{className:"sidebarItem",options:this.prepSelectConfig(this.state.midiOutput),autosize:!0,value:void 0!==this.state.outputDevice?{label:this.state.outputDevice.name,value:this.state.outputDevice}:{label:"Output Device",value:void 0},onChange:this.setOutputDevice.bind(this)}),Object(o.jsx)("text",{children:"Midi Output Device Config"}),Object(o.jsx)(I.a,{className:"sidebarItem",options:this.prepSelectConfig(O,"keymap"),autosize:!0,value:void 0!==this.state.outputConfigName?{label:this.state.outputConfigName,value:this.state.outputConfig}:{label:"Output Device Config",value:void 0},onChange:this.setOutputConfig.bind(this)}),Object(o.jsx)("div",{}),Object(o.jsx)(D,{project:this.state.projectFile,canvas:this.canvas,layoutConfig:this.state.layoutConfig})]}),Object(o.jsx)(j,{ref:this.canvas,projectFile:this.state.projectFile,layoutConfig:this.state.layoutConfig,inputDevice:this.state.inputDevice,inputConfig:this.state.inputConfig,outputDevice:this.state.outputDevice,outputConfig:this.state.outputConfig})]})})}},{key:"setLayoutConfig",value:function(e){this.setState({layoutConfigName:e.label}),this.setState({layoutConfig:e.value}),localStorage.setItem("perferedLayoutConfig",e.label)}},{key:"setInputConfig",value:function(e){this.setState({inputConfigName:e.label}),this.setState({inputConfig:e.value},this.initlizateInputDevice.bind(this)),localStorage.setItem("perferedInputConfig",e.label)}},{key:"setOutputConfig",value:function(e){this.setState({outputConfigName:e.label}),this.setState({outputConfig:e.value},this.initlizateOutputDevice.bind(this)),localStorage.setItem("perferedOutputConfig",e.label)}},{key:"setInputDevice",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setState({inputDevice:e.value}),t&&this.autoConfigPicker(e.value.name,"Input"),localStorage.setItem("perferedInputDevice",e.value.name)}},{key:"setOutputDevice",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setState({outputDevice:e.value}),t&&this.autoConfigPicker(e.value.name,"Output"),localStorage.setItem("perferedOutputDevice",e.value.name)}},{key:"initlizateInputDevice",value:function(){if(void 0!==this.state.inputConfig&&void 0!==this.state.inputDevice&&void 0!==this.state.inputConfig.inputInfoMessage)for(var e in this.state.inputConfig.infoMessage)alert(this.state.inputConfig.inputInfoMessage[e])}},{key:"initlizateOutputDevice",value:function(){if(void 0!==this.state.outputConfig&&void 0!==this.state.outputDevice){if(void 0!==this.state.outputConfig.initializationSysex)for(var e in this.state.outputConfig.initializationSysex)this.state.outputDevice.sendSysex([],this.state.outputConfig.initializationSysex[e]);if(void 0!==this.state.outputConfig.outputInfoMessage)for(var e in this.state.outputConfig.infoMessage)alert(this.state.outputConfig.outputInfoMessage[e])}}},{key:"prepSelectConfig",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=[];for(var o in e)void 0!==t&&void 0===e[o][t]||n.push({label:o,value:e[o]});return n}},{key:"loadUserConfigPerfences",value:function(){var e=localStorage.getItem("perferedLayoutConfig");null!==e&&void 0!==O[e]&&this.setLayoutConfig({label:e,value:O[e]});var t=localStorage.getItem("perferedInputConfig");null!==t&&void 0!==O[t]&&this.setInputConfig({label:t,value:O[t]});var n=localStorage.getItem("perferedOutputConfig");null!==n&&void 0!==O[n]&&this.setOutputConfig({label:n,value:O[n]})}},{key:"loadUserDevicePerfences",value:function(){var e=localStorage.getItem("perferedInputDevice");null!==e&&void 0!==this.state.midiInput[e]&&this.setInputDevice({label:e,value:this.state.midiInput[e]},!1);var t=localStorage.getItem("perferedOutputDevice");null!==t&&void 0!==this.state.midiOutput[t]&&this.setOutputDevice({label:t,value:this.state.midiOutput[t]},!1)}}]),n}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(o.jsx)(P,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[56,1,2]]]);
//# sourceMappingURL=main.ed00eb54.chunk.js.map