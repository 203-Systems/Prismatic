{"version":3,"sources":["Components/ProjectFileReader.jsx","Engine/keyLED.js","Engine/autoPlay.js","Engine/keySound.js","Engine/projectFile.js","Components/Button.jsx","palette.js","buttonConfigs.js","Components/Canvas.jsx","config.js","deviceConfigs.js","Components/AutoplayControl.jsx","Components/App.jsx","serviceWorker.js","index.js"],"names":["ProjectFileReader","onFileChange","event","props","loadProjectFile","target","files","Fragment","type","id","name","accept","onChange","this","Component","KeyLED","text","repeat","canvas","activeList","keyLED","undefined","id_str","end","activeThread","nextID","currentOn","lastEventTime","play","a","threadID","getID","currentLoop","Date","now","line","trim","command","split","parseInt","x","y","NaN","color","length","setColor","wait","stop","removeFromActiveList","ms","adjusted_ms","Promise","resolve","setTimeout","clearLight","AutoPlay","autoplay","status","progress","total","led","currentChain","callback","initlalizeCanvas","console","log","chainChange","keyOn","keyOff","keySound","file","howl","format","loopTarget","loopCounter","window","URL","createObjectURL","File","toLowerCase","pop","Howl","src","html5","Howler","usingWebAudio","onend","onEnd","bind","onloaderror","message","error","onplayerror","loop","_loop","i","ProjectFile","info","soundFiles","activeKeyLED","current","unpack","projectFile","reject","JSZip","require","loadAsync","then","zip","Object","values","e","projectRoot","keySoundFile","autoplayFile","keyLEDFiles","filename","endsWith","includes","async","blob","slice","forEach","Array","chain","fill","map","buttonX","buttonY","entries","fileInfo","index","charCodeAt","warn","push","clearCanvas","stopKeyLED","stopKeySound","Button","state","keyState","on","off","shouldUpdate","nextProps","render","style","position","display","isTouchDevice","className","class","backgroundColor","onTouchStart","onTouchEnd","onTouchCancel","onMouseDown","onMouseUp","onMouseLeave","overlayClass","navigator","maxTouchPoints","msMaxTouchPoints","palette","rawPalette","buttonConfigs","Canvas","colormap","layoutConfig","width","height","keypressHistory","midiInputHandler","midiEvent","data","note","velocity","inputConfig","noteToXY","xy","indexOf2dArray","keymap","config","reverseOffset","sound","soundLoop","canvas_x","canvas_y","arrayCalculation","canvas_origin","toString","ledIndex","soundIndex","checkChain","chainKey","Math","min","endLoop","targetChain","clearKeypressHistory","setColorCanvas","setColorOutput","array1","array2","operation","newArray","setInterval","setState","inputDevice","setupMidiInput","newInput","oldInput","removeListener","addListener","lKey","mcTable","test","outputDevice","outputConfig","output_x","output_y","sendSysex","hexSysexGen","sendMidi","channel","mode","value","modeKey","charAt","substr","send","matrix","len","len2","padding","borderRadius","radius","layout","keys","defaultLayout","deviceConfigs","midiNameRegex","initializationSysex","floor","arguments","hex","r","g","b","mc","AutoplayControl","playAutoplay","project","alert","stopAutoplay","pauseAutoplay","pause","stopAll","forceUpdate","playButton","marginRight","onClick","pauseButton","stopButton","buttons","statusText","toFixed","App","statusMessage","midiInput","midiOutput","layoutConfigName","inputConfigName","outputConfigName","React","createRef","downloadProjectFile","url","fetch","projectPack","catch","loadUserConfigPerfences","initlization","WebMidi","enable","err","onMIDIFailure","onMIDISuccess","urlParams","URLSearchParams","location","search","get","unipack_url","updateMidiList","onMidiStateChange","loadUserDevicePerfences","port","inputDeviceConfig","inputDeviceName","outputDeviceConfig","outputDeviceName","inputs","input","outputs","output","deviceName","key","match","setInputConfig","label","setOutputConfig","options","prepSelectConfig","autosize","setLayoutConfig","setInputDevice","setOutputDevice","ref","localStorage","setItem","initlizateInputDevice","initlizateOutputDevice","device","autoPickConfig","autoConfigPicker","inputInfoMessage","infoMessage","outputInfoMessage","requiredKey","result","perferedLayoutConfig","getItem","perferedInputConfig","perferedOutputConfig","perferedInputDevice","perferedOutputDevice","Boolean","hostname","ReactDOM","document","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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AAK3I,MAAMqC,EAAG,EAAKrC,MAAMsC,K,EAKhDsG,aAAe,SAACC,GAAD,OAAe,EAAK7I,MAAMwC,QAAUqG,EAAUrG,O,EAE7DsG,OAAS,kBACL,sBAAKC,MAAO,CAACC,SAAU,WAAYC,QAAS,QAA5C,UACE,EAAKC,gBACN,wBAAQC,UAAW,EAAKnJ,MAAMoJ,MAAOL,MAAO,CAACM,gBAAiB,EAAKrJ,MAAMwC,OAAQ8G,aAAc,EAAKZ,GAAIa,WAAY,EAAKZ,IAAKa,cAAe,EAAKb,MAClJ,wBAAQQ,UAAW,EAAKnJ,MAAMoJ,MAAOL,MAAO,CAACM,gBAAiB,EAAKrJ,MAAMwC,OAAQiH,YAAa,EAAKf,GAAIgB,UAAW,EAAKf,IAAKgB,aAAc,EAAKhB,MAChJ,qBAAKQ,UAAW,EAAKnJ,MAAM4J,mB,8DAK3B,MAAS,iBAAkBpF,QAC1BqF,UAAUC,eAAiB,GAC3BD,UAAUE,iBAAmB,M,GArCjBpJ,aCFRqJ,EAAU,CAErB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAGWC,EAAa,CAExB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WC1LaC,EA3EO,CACpB,SACA,CACEd,MAAO,mBAET,eACA,CACEA,MAAO,kBACPQ,aAAc,0BAEhB,SACA,CACER,MAAO,oBACPQ,aAAc,4BAEhB,SACA,CACER,MAAO,oBACPQ,aAAc,4BAEhB,SACA,CACER,MAAO,mBAET,SACA,CACEA,MAAO,mBAET,SACA,CACEA,MAAO,mBAET,SACA,CACEA,MAAO,mBAET,SACA,CACEA,MAAO,kBACPQ,aAAc,0BAEhB,SACA,CACER,MAAO,kBACPQ,aAAc,0BAEhB,SACA,CACER,MAAO,kBACPQ,aAAc,0BAEhB,SACA,CACER,MAAO,kBACPQ,aAAc,0BAGhB,SACA,CACER,MAAO,qBACPQ,aAAc,6BAGhB,SACA,CACER,MAAO,uBACPQ,aAAc,+BAGhB,SACA,CACER,MAAO,kBCqTIe,E,kDArXb,WAAYnK,GAAQ,IAAD,8BACjB,cAAMA,IAMRwI,MAAQ,CACN4B,SAAU,IAAI5C,MAAM,EAAKxH,MAAMqK,aAAaC,OAAO5C,KAAK,MAA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","file":"static/js/main.2b8d3c2e.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nclass ProjectFileReader extends Component {\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <input type=\"file\" id=\"projectFilePicker\" name=\"projectFile\" accept=\".zip\" onChange={this.onFileChange}/>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  onFileChange = event => { \r\n    this.props.loadProjectFile(event.target.files[0]);\r\n  };\r\n}\r\n\r\nexport default ProjectFileReader;","class KeyLED\r\n{\r\n  keyLED = undefined\r\n  id = undefined\r\n  id_str = undefined\r\n  repeat = 1;\r\n  end = false;\r\n  activeThread = -1\r\n  nextID = 0\r\n  canvas = undefined\r\n  currentOn=[]\r\n  lastEventTime = undefined;\r\n  activeList = undefined //Global, refence to the activeKeyLED object in the projectFile\r\n\r\n  constructor(text, repeat, canvas, id, activeList)\r\n  {\r\n    this.keyLED = text;\r\n    this.repeat = repeat;\r\n    this.canvas = canvas;\r\n    this.id = id;\r\n    this.id_str = `${id[0]} ${id[1]} ${id[2]} ${id[3]}` \r\n    this.activeList = activeList\r\n  }\r\n\r\n  play = async() =>\r\n  {\r\n    if(this.activeList[this.id_str] === undefined)\r\n    {\r\n      this.activeList[this.id_str] = this.id\r\n      // console.log(\"Active List added\")\r\n      // console.log(this.activeList)\r\n    }\r\n    var threadID = this.getID()\r\n    this.activeThread = threadID\r\n    this.currentOn = []\r\n    var currentLoop = 0\r\n    this.end = false;\r\n    this.lastEventTime = Date.now()\r\n    // console.log(\"KeyLED\")\r\n    // console.timeLog(\"KeyOn\")\r\n    while(this.repeat === 0 || currentLoop++ < this.repeat)\r\n    {\r\n      for(var line of this.keyLED)\r\n      {\r\n        line = line.trim()\r\n        if(this.activeThread != threadID)\r\n          return\r\n\r\n        if(line == \"\")\r\n          continue;\r\n        \r\n        let command = line.split(\" \");\r\n        // console.log(line)\r\n\r\n        switch(command[0])\r\n        {\r\n          case 'o': //set color\r\n          case 'on': //set color\r\n              if(command[1] === \"*\")\r\n              {\r\n                command[1] = \"mc\"\r\n              }\r\n              if(command[1] === \"mc\" || command[1] === \"l\") //For \"l\", the y is garbage but it won't be read for the setColor functions so just gonna let it be\r\n              {\r\n                [x, y] = [command[1], parseInt(command[2] - 1)]\r\n              }\r\n              else if(parseInt(command[1]) !== NaN)\r\n              {\r\n                [x, y] = [parseInt(command[2] - 1), parseInt(command[1] - 1)]\r\n              }\r\n\r\n              var color\r\n              if(command[command.length - 2] === \"a\" || command[command.length - 2] === \"auto\")\r\n              {\r\n                color = parseInt(command[command.length - 1])\r\n              }\r\n              else\r\n              {\r\n                color = \"#\" + command[command.length - 1]\r\n              }\r\n\r\n              this.canvas.setColor(x, y, color)\r\n\r\n              var id = x + \"-\" + y\r\n              if(this.currentOn[id] === undefined) \r\n              {\r\n                this.currentOn[id] = [x, y]\r\n              }\r\n              else if(color === 0)\r\n              {\r\n                delete this.currentOn[id]\r\n              }\r\n              break;\r\n          case 'f': //color off\r\n          case 'off': //color off\r\n            var [x, y] = [undefined, undefined]\r\n            if(command[1] === \"*\")\r\n            {\r\n              command[1] = \"mc\"\r\n            }\r\n            if(command[1] === \"mc\" || command[1] === \"l\")\r\n            {\r\n              [x, y] = [command[1], parseInt(command[2] - 1)]\r\n            }\r\n            else if(parseInt(command[1]) !== NaN)\r\n            {\r\n              [x, y] = [parseInt(command[2] - 1), parseInt(command[1] - 1)]\r\n            }\r\n\r\n            this.canvas.setColor(x, y, 0)\r\n            var id = x + \"-\" + y\r\n            delete this.currentOn[id]\r\n            break;\r\n          case 'd': //wait\r\n          case 'delay': \r\n          await this.wait(parseInt(command[1]));\r\n            break;\r\n          default:\r\n        }\r\n      }\r\n      if(this.end)\r\n      {\r\n        this.stop()\r\n        break;\r\n      }\r\n    }\r\n    if(this.activeThread == threadID) //Added due to current thread on the last wait then the next thread started. This will result in the next thread to be stuck\r\n    {\r\n      this.activeThread = -1\r\n      this.removeFromActiveList()\r\n    }\r\n  }\r\n\r\n  wait(ms)\r\n  {\r\n    var adjusted_ms = this.lastEventTime + ms - Date.now()\r\n    this.lastEventTime += ms\r\n    if(adjusted_ms > 5)\r\n    {\r\n      return new Promise(resolve => setTimeout(resolve, adjusted_ms))\r\n    }\r\n    else\r\n    {\r\n      return \r\n    }\r\n  }\r\n\r\n  getID()\r\n  {\r\n    return this.nextID++;\r\n  }\r\n\r\n  stop(clearLight = true)\r\n  { \r\n    //Threading System (Light 1 in delay then we set it to stop and create a Light 2 so it can start right away, set )\r\n    if(this.activeThread === -1)\r\n      return\r\n    this.activeThread = -1\r\n    if(clearLight)\r\n    {\r\n      for(var id in this.currentOn)\r\n      {\r\n        var [x,y] = this.currentOn[id]\r\n        this.canvas.setColor(x, y, 0)\r\n      }\r\n    }\r\n    this.currentOn = []\r\n    this.removeFromActiveList()\r\n  }\r\n\r\n  endLoop()\r\n  {\r\n    this.end = true\r\n  }\r\n\r\n  removeFromActiveList()\r\n  {\r\n    // console.log(\"Try to delete \" + this.id_str)\r\n    // console.log(this.activeList)\r\n    delete this.activeList[this.id_str]\r\n    // console.log(this.activeList)\r\n  }\r\n}\r\n\r\nexport default KeyLED;","class AutoPlay {\r\n  autoplay = undefined;\r\n  status = \"STOPPED\"\r\n  progress = 0\r\n  total = 0\r\n  led = true;\r\n  currentChain = 0\r\n  canvas = undefined;\r\n  lastEventTime = undefined;\r\n\r\n  constructor(text, canvas) {\r\n    this.autoplay = text;\r\n    this.total = text === undefined ? 0 : text.length;\r\n    this.canvas = canvas;\r\n  }\r\n\r\n  play = async (callback) => {\r\n    // console.time(\"Autoplay\")\r\n    if (this.progress === 0) {\r\n      this.canvas.initlalizeCanvas();\r\n      // this.currentChain = parseInt(0);\r\n    }\r\n    this.status = \"PLAYING\"\r\n    this.lastEventTime = Date.now()\r\n    for (this.progress; this.progress < this.autoplay.length; this.progress++) {\r\n      // console.timeEnd(\"Autoplay\");\r\n      // console.time(\"Autoplay\")\r\n\r\n      if (this.status === \"STOPPED\" || this.status === \"PAUSED\") {\r\n        return;\r\n      }\r\n\r\n      console.log(this.autoplay[this.progress])\r\n      let command = this.autoplay[this.progress].split(\" \");\r\n\r\n      if(callback !== undefined)\r\n        callback([this.progress, this.autoplay.length])\r\n\r\n      if (command.length < 2)\r\n        continue;\r\n\r\n      if (this.canvas.currentChain != this.currentChain) {\r\n        this.canvas.chainChange(this.currentChain);\r\n      }\r\n\r\n      switch (command[0]) {\r\n        case 'o':\r\n        case 'on':\r\n          if(this.led)\r\n          {\r\n            this.canvas.keyOn(parseInt(command[2]) - 1, parseInt(command[1]) - 1, undefined, true);\r\n          }\r\n          else\r\n          {\r\n            this.canvas.keyOn(parseInt(command[2]) - 1, parseInt(command[1]) - 1, undefined, true, true, false);\r\n            this.canvas.setColor(parseInt(command[2]) - 1, parseInt(command[1]) - 1, 127)\r\n          }\r\n          break;\r\n        case 'f':\r\n        case 'off':\r\n          if(this.led)\r\n          {\r\n            this.canvas.keyOff(parseInt(command[2]) - 1, parseInt(command[1]) - 1, undefined, true);\r\n          }\r\n          else\r\n          {\r\n            this.canvas.keyOff(parseInt(command[2]) - 1, parseInt(command[1]) - 1, undefined, true);\r\n            this.canvas.setColor(parseInt(command[2]) - 1, parseInt(command[1]) - 1, 0)\r\n          }\r\n          break;\r\n        case 't':\r\n        case 'touch':\r\n            if(this.led)\r\n            {\r\n              this.canvas.keyOn(parseInt(command[2]) - 1, parseInt(command[1]) - 1, undefined, true);\r\n              this.canvas.keyOff(parseInt(command[2]) - 1, parseInt(command[1]) - 1, undefined, true);\r\n            }\r\n            else\r\n            {\r\n              this.canvas.keyOn(parseInt(command[2]) - 1, parseInt(command[1]) - 1, undefined, true, true, false);\r\n              this.canvas.keyOff(parseInt(command[2]) - 1, parseInt(command[1]) - 1, undefined, true);\r\n              this.canvas.setColor(parseInt(command[2]) - 1, parseInt(command[1]) - 1, 3)\r\n              setTimeout(() => {this.canvas.setColor(parseInt(command[2]) - 1, parseInt(command[1]) - 1, 0)}, 200)\r\n            }\r\n            break;\r\n        case 'd':\r\n        case 'delay':\r\n          var ms = parseInt(command[1])\r\n          if(ms < 10)\r\n            break;\r\n          await this.wait(parseInt(command[1]));\r\n          break;\r\n        case 'c':\r\n        case 'chain':\r\n          this.canvas.chainChange(parseInt(command[1]) - 1);\r\n          this.currentChain = parseInt(command[1]) - 1;\r\n          break;\r\n        default:\r\n      }\r\n    }\r\n    this.status = \"STOPPED\"\r\n    this.progress = 0\r\n  }\r\n\r\n  pause() {\r\n    this.status = \"PAUSED\"\r\n  }\r\n\r\n  stop() {\r\n    this.status = \"STOPPED\"\r\n    this.progress = 0\r\n  }\r\n\r\n  wait(ms) {\r\n    var adjusted_ms = this.lastEventTime + ms - Date.now()\r\n    this.lastEventTime += ms\r\n    if(adjusted_ms > 5)\r\n    {\r\n      return new Promise(resolve => setTimeout(resolve, adjusted_ms))\r\n    }\r\n    else\r\n    {\r\n      return \r\n    }\r\n  }\r\n}\r\n\r\nexport default AutoPlay;","// import {Howler, Howl} from \"../../howler/howler.core\";\r\nimport {Howler, Howl} from \"howler\";\r\nclass keySound {\r\n  file = undefined;\r\n  howl = undefined;\r\n  format = undefined\r\n  loopTarget = {};\r\n  loopCounter = {};\r\n\r\n  constructor(file, name) {\r\n    // console.log(Howler.usingWebAudio)\r\n    // console.log(file)\r\n    this.file = window.URL.createObjectURL(new File([file], name))\r\n    this.format = name.toLowerCase().split(\".\").pop()\r\n    // console.log(this.format)\r\n    // console.log(Howler.codecs(this.format))\r\n    this.howl = new Howl({\r\n      src: [this.file],\r\n      format: [this.format],\r\n      html5: !Howler.usingWebAudio,\r\n      onend: this.onEnd.bind(this),\r\n      onloaderror:function (id, message) {\r\n        console.error(`Howler Load Error ${id} ${message}`)\r\n      },\r\n      onplayerror:function (id, message) {\r\n        console.error(`Howler Play Error ${id} ${message}`)\r\n      }\r\n    });\r\n  }\r\n\r\n  play(loop = 1) {\r\n    if(loop !== 1)\r\n    {\r\n      this.howl._loop = true;\r\n    }\r\n\r\n    var id = this.howl.play()\r\n    // console.log(\"KeySound\")\r\n    // console.timeLog(\"KeyOn\")\r\n\r\n    this.loopCounter[id] = 0\r\n    this.loopTarget[id] = loop;\r\n  }\r\n\r\n  stop() {\r\n    if(this.howl !== undefined)\r\n    {\r\n      this.howl.stop()\r\n    }\r\n  }\r\n\r\n  onEnd(id) {\r\n    // console.log(`ID ${id} Loop #${this.loopCounter[id]} ended`)\r\n    if (this.loopTarget[id] !== 0 && ++this.loopCounter[id] >= this.loopTarget[id]) { // So if loopTarget is 0 then it will keep going\r\n      this.howl._loop = false\r\n      this.howl.stop(id)\r\n    }\r\n  }\r\n\r\n  endLoop()\r\n  {\r\n    this.howl._loop = false;\r\n    for(var i in this.loopTarget)\r\n    {\r\n      this.loopTarget[i] = 1\r\n    }\r\n  }\r\n}\r\n\r\nexport default keySound;","import KeyLED from \"./keyLED\"\r\nimport AutoPlay from \"./autoPlay\"\r\nimport keySound from './keySound';\r\nimport { Howler } from \"howler\";\r\n\r\nclass ProjectFile {\r\n  info = {};\r\n  soundFiles = {};\r\n  keySound = undefined;\r\n  autoplay = undefined;\r\n  keyLED = undefined;\r\n  canvas = undefined\r\n  activeKeyLED = {}\r\n\r\n  constructor(file, canvas) {\r\n    this.canvas = canvas.current;\r\n    return this.unpack(file);\r\n  }\r\n\r\n  unpack(projectFile) {\r\n    return new Promise(async (resolve, reject) => {\r\n      try{\r\n      console.log(this.info)\r\n      let JSZip = require(\"jszip\");\r\n      let files = await JSZip.loadAsync(projectFile).then(function (zip) {\r\n        return Object.values(zip.files)\r\n      }, function (e) {\r\n        reject(\"Failed to extract selected file\");\r\n        console.log(e);\r\n        return;\r\n      });\r\n      let projectRoot = undefined;\r\n      let keySoundFile = undefined;\r\n      let autoplayFile = undefined;\r\n      let keyLEDFiles = {};\r\n\r\n      //Load info and categorize files\r\n      for (let file of files) {\r\n        let filename = file.name.toLowerCase()\r\n        if (!filename.endsWith(\"/\")) //Ignore folder\r\n        {\r\n          if (filename.includes(\"sounds/\")) //Audio\r\n          {\r\n            console.log(\"Sound file: \" + filename);\r\n            this.soundFiles[filename.split(\"/\").pop()] = await file.async(\"blob\").then(function (blob) {\r\n              return new keySound(blob, filename.split(\"/\").pop())\r\n            });\r\n          }\r\n          else {\r\n            let text = await file.async(\"text\").then((text) => { return text = text.split(/\\r?\\n/); });\r\n            if (filename.endsWith(\"info\")) //Text\r\n            {\r\n              console.log(\"Info file: \" + filename);\r\n              projectRoot = filename.slice(0, -4);\r\n              console.log(\" project root: \" + projectRoot);\r\n              text.forEach(info => this.info[info.split('=')[0]] = info.split('=')[1]);\r\n              this.info[\"buttonX\"] = parseInt(this.info[\"buttonX\"]);\r\n              this.info[\"buttonY\"] = parseInt(this.info[\"buttonY\"]);\r\n              this.info[\"chain\"] = parseInt(this.info[\"chain\"]);\r\n              this.info[\"squareButton\"] = this.info[\"squareButton\"] === \"true\";\r\n              this.info[\"landscape\"] = this.info[\"landscape\"] === \"true\";\r\n              console.log(\" title: \" + this.info[\"title\"])\r\n              console.log(\" producerName: \" + this.info[\"producerName\"])\r\n              console.log(\" buttonX: \" + this.info[\"buttonX\"])\r\n              console.log(\" buttonY: \" + this.info[\"buttonY\"])\r\n              console.log(\" chain: \" + this.info[\"chain\"])\r\n              console.log(\" squareButton: \" + this.info[\"squareButton\"])\r\n              console.log(\" landscape: \" + this.info[\"landscape\"])\r\n              if (this.info[\"buttonX\"] !== 8 || this.info[\"buttonY\"] !== 8) {\r\n                reject(\"Only 8x8 Unipad project are supported\");\r\n                return;\r\n              }\r\n              if (this.info[\"chain\"] > 8) {\r\n                // reject(\"Only Unipad project that has within 8 chains are supported\");\r\n                // alert(`This Unipad Project has ${this.info[\"chain\"]} chains. Projects that has more than 8 chains are limited supported`)\r\n                // return;\r\n              }\r\n            }\r\n            else if (filename.endsWith(\"keysound\")) {\r\n              console.log(\"KeySound file: \" + filename);\r\n              keySoundFile = text;\r\n            }\r\n            else if (filename.endsWith(\"autoplay\")) {\r\n              console.log(\"AutoPlay file: \" + filename);\r\n              autoplayFile = text;\r\n            }\r\n            else if (filename.includes(\"keyled/\")) {\r\n              console.log(\"KeyLED file: \" + filename);\r\n              keyLEDFiles[filename] = text;\r\n            }\r\n            else {\r\n              console.log(\"Unknown file: \" + filename);\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      //Initialize 4D arraies\r\n      this.keySound = new Array(this.info.chain).fill(null).map(\r\n        () => new Array(this.info.buttonX).fill(null).map(\r\n          () => new Array(this.info.buttonY).fill(null).map(\r\n            () => new Array())));\r\n\r\n      this.keyLED = new Array(this.info.chain).fill(null).map(\r\n        () => new Array(this.info.buttonX).fill(null).map(\r\n          () => new Array(this.info.buttonY).fill(null).map(\r\n            () => new Array())));\r\n\r\n      // Load KeyLED\r\n      for (var [name, text] of Object.entries(keyLEDFiles)) {\r\n        let fileInfo = name.split(\"/\").pop().split(\" \");\r\n        try\r\n        {\r\n        // if (fileInfo.length === 5) {\r\n        //   this.keyLED[parseInt(fileInfo[0]) - 1][parseInt(fileInfo[2]) - 1][parseInt(fileInfo[1]) - 1][fileInfo[4].charCodeAt(0) - 97] = new KeyLED(text, parseInt(fileInfo[3]), this.canvas)\r\n        //   // console.log(name)\r\n        //   // console.log([parseInt(fileInfo[0]) - 1, parseInt(fileInfo[2]) - 1, parseInt(fileInfo[1]) - 1, fileInfo[4].charCodeAt(0) - 97])\r\n        //   // console.log(this.keyLED[parseInt(fileInfo[0]) - 1][parseInt(fileInfo[2]) - 1][parseInt(fileInfo[1]) - 1][fileInfo[4].charCodeAt(0) - 97])\r\n        // }\r\n        // else if (fileInfo.length === 4) {\r\n          let index = fileInfo[4] !== undefined ? fileInfo[4].charCodeAt(0) - 97 : 0 //97 is 'a' \r\n          // console.log([parseInt(fileInfo[0]) - 1, parseInt(fileInfo[2]) - 1, parseInt(fileInfo[1]) - 1, index])\r\n          let [chain, x, y, repeat] = [parseInt(fileInfo[0]) - 1, parseInt(fileInfo[2]) - 1, parseInt(fileInfo[1]) - 1, parseInt(fileInfo[3])]\r\n          this.keyLED[chain][x][y][index] = new KeyLED(text, repeat, this.canvas, [chain, x, y, index], this.activeKeyLED)\r\n        // }\r\n        // else {\r\n        //   console.warn(\"Unknown keyLED file name: \" + name);\r\n        // }\r\n        }\r\n        catch\r\n        {\r\n          console.warn(\"Unable to parse file name - \" + name.split(\"/\").pop())\r\n        }\r\n      }\r\n\r\n      //Load KeySound\r\n      for (var line of keySoundFile) {\r\n        line = line.trim()\r\n        try\r\n        {\r\n          if (line == \"\") //For empty lines\r\n          continue;\r\n\r\n          let command = line.split(\" \");\r\n\r\n          // console.log(command);\r\n          let [chain, x, y, filename] = [parseInt(command[0]) - 1, parseInt(command[2]) - 1, parseInt(command[1]) - 1, command[3].toLowerCase()]\r\n          console.log([chain, x, y, filename])\r\n          this.keySound[chain][x][y].push([this.soundFiles[filename], command.slice(4)]);\r\n        }\r\n        catch\r\n        {\r\n          console.warn(\"Unable to parse line - \" + line)\r\n        }\r\n      }\r\n\r\n      //Load AutoPlay\r\n      if(autoplayFile !== undefined)\r\n        this.autoplay = new AutoPlay(autoplayFile, this.canvas);\r\n\r\n      resolve(this)\r\n    }\r\n    catch(e)\r\n    {\r\n      reject(e)\r\n    }\r\n    });\r\n  }\r\n\r\n  stopKeySound() {\r\n    Howler.stop()\r\n  }\r\n\r\n  stopKeyLED() {\r\n    // console.log(this.activeKeyLED)\r\n    for(var id_str in this.activeKeyLED)\r\n    {\r\n      var[chain, x, y, index] = this.activeKeyLED[id_str]\r\n      this.keyLED[chain][x][y][index].stop(false)\r\n      delete this.activeKeyLED[id_str]\r\n    }\r\n    setTimeout(this.canvas.clearCanvas(), 200)\r\n    // new KeyLED().stopAll()\r\n    // for (var chain = 0; chain < this.info.chain; chain++) {\r\n    //   for (\r\n    //     var x = 0;\r\n    //     chain < this.keyLED[chain].length;\r\n    //     x++\r\n    //   ) {\r\n    //     for (\r\n    //       var y = 0;\r\n    //       chain < this.keyLED[chain][x].length;\r\n    //       y++\r\n    //     ) {\r\n    //       for (\r\n    //         var index = 0;\r\n    //         chain < this.keyLED[chain][x][y].length;\r\n    //         index++\r\n    //       ) {\r\n    //         if (\r\n    //           this.keyLED[chain][x][y][index] !== undefined\r\n    //         ) {\r\n    //           this.keyLED[chain][x][y][index].stop();\r\n    //         }\r\n    //       }\r\n    //     }\r\n    //   }\r\n    // }\r\n  }\r\n\r\n  stopAll() {\r\n    this.stopKeyLED()\r\n    this.stopKeySound()\r\n  }\r\n}\r\n\r\nexport default ProjectFile;","import React, { Component } from 'react'\r\n\r\nclass Button extends Component {\r\n    state = {\r\n        keyState: false,\r\n    }\r\n\r\n    // Turns stuff on\r\n    on = () => \r\n    {   \r\n        if (!this.keyState) {\r\n            this.keyState = true;\r\n            this.props.on(this.props.x, this.props.y)\r\n        }\r\n    }\r\n    \r\n    // Turns stuff off\r\n    off = () => {\r\n        if (this.keyState) {\r\n            this.keyState = false;\r\n            this.props.off(this.props.x, this.props.y)\r\n        }\r\n    }\r\n\r\n    // Updates\r\n    shouldUpdate = (nextProps) => this.props.color !== nextProps.color\r\n\r\n    render = () => (\r\n        <div style={{position: 'relative', display: 'grid'}}>\r\n        {(this.isTouchDevice()) ? \r\n        (<button className={this.props.class} style={{backgroundColor: this.props.color}} onTouchStart={this.on} onTouchEnd={this.off} onTouchCancel={this.off}/>) : \r\n        (<button className={this.props.class} style={{backgroundColor: this.props.color}} onMouseDown={this.on} onMouseUp={this.off} onMouseLeave={this.off}/>)}\r\n        <div className={this.props.overlayClass}/>\r\n        </div>\r\n    )\r\n\r\n    isTouchDevice() {\r\n        return (('ontouchstart' in window) ||\r\n        (navigator.maxTouchPoints > 0) ||\r\n        (navigator.msMaxTouchPoints > 0));\r\n    }\r\n}\r\n\r\nexport default Button;","export const palette = [\r\n  //New optimized palette\r\n  \"#808080\",\t//0\r\n  \"#dadfe4\",\t//1\r\n  \"#e6e9ed\",\t//2\r\n  \"#fafafa\",\t//3\r\n  \"#f8bbd0\",\t//4\r\n  \"#ef5350\",\t//5\r\n  \"#e57373\",\t//6\r\n  \"#ef9a9a\",\t//7\r\n  \"#fff3e0\",\t//8\r\n  \"#ffa726\",\t//9\r\n  \"#ffb960\",\t//10\r\n  \"#ffcc80\",\t//11\r\n  \"#ffe0b2\",\t//12\r\n  \"#ffee58\",\t//13\r\n  \"#fff59d\",\t//14\r\n  \"#fff9c4\",\t//15\r\n  \"#dcedc8\",\t//16\r\n  \"#8bc34a\",\t//17\r\n  \"#aed581\",\t//18\r\n  \"#bfdf9f\",\t//19\r\n  \"#5ee2b0\",\t//20\r\n  \"#00ce3c\",  //21\r\n  \"#00ba43\",  //22\r\n  \"#119c3f\",\t//23\r\n  \"#57ecc1\",\t//24\r\n  \"#00e864\",  //25\r\n  \"#00e05c\",  //26\r\n  \"#00d545\",  //27\r\n  \"#7afddd\",\t//28\r\n  \"#00e4c5\",  //29\r\n  \"#00e0b2\",  //30\r\n  \"#01eec6\",  //31\r\n  \"#49efef\",\t//32\r\n  \"#00e7d8\",  //33\r\n  \"#00e5d1\",  //34\r\n  \"#01efde\",  //35\r\n  \"#6addff\",\t//36\r\n  \"#00dafe\",  //37\r\n  \"#01d6ff\",  //38\r\n  \"#08acdc\",  //39\r\n  \"#73cefe\",\t//40\r\n  \"#0d9bf7\",  //41\r\n  \"#148de4\",\t//42\r\n  \"#2a77c9\",\t//43\r\n  \"#8693ff\",\t//44\r\n  \"#2196f3\",\t//45\r\n  \"#4668f6\",\t//46\r\n  \"#4153dc\",\t//47\r\n  \"#b095ff\",\t//48\r\n  \"#8453fd\",\t//49\r\n  \"#634acd\",\t//50\r\n  \"#5749c5\",\t//51\r\n  \"#ffb7ff\",\t//52\r\n  \"#e863fb\",\t//53\r\n  \"#d655ed\",\t//54\r\n  \"#d14fe9\",\t//55\r\n  \"#fc99e3\",\t//56\r\n  \"#e736c2\",\t//57\r\n  \"#e52fbe\",\t//58\r\n  \"#e334b6\",\t//59\r\n  \"#ed353e\",\t//60\r\n  \"#ffa726\",\t//61\r\n  \"#f4df0b\",  //62\r\n  \"#66bb6a\",\t//63\r\n  \"#5cd100\",  //64\r\n  \"#00d29e\",  //65\r\n  \"#2388ff\",\t//66\r\n  \"#3669fd\",\t//67\r\n  \"#00b4d0\",  //68\r\n  \"#475cdc\",\t//69\r\n  \"#f2f3f5\",\t//70\r\n  \"#eef0f2\",\t//71\r\n  \"#f72737\",\t//72\r\n  \"#d2ea7b\",\t//73\r\n  \"#c8df10\",\t//74\r\n  \"#7fe422\",\t//75\r\n  \"#00c931\",  //76\r\n  \"#00d7a6\",\t//77\r\n  \"#00d8fc\",  //78\r\n  \"#0b9bfc\",  //79\r\n  \"#585cf5\",\t//80\r\n  \"#ac59f0\",\t//81\r\n  \"#d980dc\",\t//82\r\n  \"#b8814a\",\t//83\r\n  \"#ff9800\",  //84\r\n  \"#abdf22\",\t//85\r\n  \"#9ee154\",\t//86\r\n  \"#66bb6a\",\t//87\r\n  \"#3bda47\",\t//88\r\n  \"#6fdeb9\",\t//89\r\n  \"#27dbda\",\t//90\r\n  \"#9cc8fd\",\t//91\r\n  \"#79b8f7\",\t//92\r\n  \"#afafef\",\t//93\r\n  \"#d580eb\",\t//94\r\n  \"#f74fca\",\t//95\r\n  \"#ea8a1f\",\t//96\r\n  \"#dbdb08\",  //97\r\n  \"#9cd60d\",  //98\r\n  \"#f3d335\",\t//99\r\n  \"#c8af41\",\t//100\r\n  \"#00ca69\",  //101\r\n  \"#24d2b0\",\t//102\r\n  \"#757ebe\",\t//103\r\n  \"#5388db\",\t//104\r\n  \"#e5c5a6\",\t//105\r\n  \"#e93b3b\",\t//106\r\n  \"#f9a2a1\",\t//107\r\n  \"#ed9c65\",\t//108\r\n  \"#e1ca72\",\t//109\r\n  \"#b8da78\",\t//110\r\n  \"#98d52c\",\t//111\r\n  \"#626cbd\",\t//112\r\n  \"#cac8a0\",\t//113\r\n  \"#90d4c2\",\t//114\r\n  \"#ceddfe\",\t//115\r\n  \"#beccf7\",\t//116\r\n  \"#d2d7de\",\t//117\r\n  \"#dadfe4\",\t//118\r\n  \"#e6e9ed\",\t//119\r\n  \"#fe1624\",\t//120\r\n  \"#cd2724\",\t//121\r\n  \"#9ccc65\",\t//122\r\n  \"#009c1b\",  //123\r\n  \"#ffff00\",  //124\r\n  \"#beb212\",\t//125\r\n  \"#f5d01d\",\t//126\r\n  \"#e37829\",\t//127\r\n];\r\n\r\nexport const rawPalette = [\r\n  //LaunchpadXcolorPalette\r\n  \"#000000\", //0\r\n  \"#3F3F3F\", //1\r\n  \"#7F7F7F\", //2\r\n  \"#FFFFFF\", //3\r\n  \"#FF3F3F\", //4\r\n  \"#FF0000\", //5\r\n  \"#7F0000\", //6\r\n  \"#3F0000\", //7\r\n  \"#FFBF6F\", //8\r\n  \"#FF3F00\", //9\r\n  \"#7F1F00\", //10\r\n  \"#3F0F00\", //11\r\n  \"#FFAF2F\", //12\r\n  \"#FFFF00\", //13\r\n  \"#7F7F00\", //14\r\n  \"#3F3F00\", //15\r\n  \"#7FFF2F\", //16\r\n  \"#4FFF00\", //17\r\n  \"#2F7F00\", //18\r\n  \"#173F00\", //19\r\n  \"#4FFF3F\", //20\r\n  \"#00FF00\", //21\r\n  \"#007F00\", //22\r\n  \"#003F00\", //23\r\n  \"#4FFF4F\", //24\r\n  \"#00FF1F\", //25\r\n  \"#007F0F\", //26\r\n  \"#003F07\", //27\r\n  \"#4FFF5F\", //28\r\n  \"#00FF5F\", //29\r\n  \"#007F2F\", //30\r\n  \"#003F17\", //31\r\n  \"#4FFFBF\", //32\r\n  \"#00FF9F\", //33\r\n  \"#007F4F\", //34\r\n  \"#003F27\", //35\r\n  \"#4FBFFF\", //36\r\n  \"#00AFFF\", //37\r\n  \"#00577F\", //38\r\n  \"#002F3F\", //39\r\n  \"#4F7FFF\", //40\r\n  \"#0057FF\", //41\r\n  \"#002F7F\", //42\r\n  \"#00173F\", //43\r\n  \"#2F1FFF\", //44\r\n  \"#0000FF\", //45\r\n  \"#00007F\", //46\r\n  \"#00003F\", //47\r\n  \"#5F3FFF\", //48\r\n  \"#2F00FF\", //49\r\n  \"#17007F\", //50\r\n  \"#0F003F\", //51\r\n  \"#FF3FFF\", //52\r\n  \"#FF00FF\", //53\r\n  \"#7F007F\", //54\r\n  \"#3F003F\", //55\r\n  \"#FF3F6F\", //56\r\n  \"#FF004F\", //57\r\n  \"#7F002F\", //58\r\n  \"#3F001F\", //59\r\n  \"#FF0F00\", //60\r\n  \"#9F3F00\", //61\r\n  \"#7F4F00\", //62\r\n  \"#2F2F00\", //63\r\n  \"#003F00\", //64\r\n  \"#003F1F\", //65\r\n  \"#001F6F\", //66\r\n  \"#0000FF\", //67\r\n  \"#003F3F\", //68\r\n  \"#1F00BF\", //69\r\n  \"#5F3F4F\", //70\r\n  \"#1F0F17\", //71\r\n  \"#FF0000\", //72\r\n  \"#BFFF2F\", //73\r\n  \"#AFEF00\", //74\r\n  \"#5FFF00\", //75\r\n  \"#0F7F00\", //76\r\n  \"#00FF5F\", //77\r\n  \"#009FFF\", //78\r\n  \"#002FFF\", //79\r\n  \"#1F00FF\", //80\r\n  \"#5F00EF\", //81\r\n  \"#AF1F7F\", //82\r\n  \"#2F0F00\", //83\r\n  \"#FF2F00\", //84\r\n  \"#7FDF00\", //85\r\n  \"#6FFF1F\", //86\r\n  \"#00FF00\", //87\r\n  \"#3FFF2F\", //88\r\n  \"#5FEF6F\", //89\r\n  \"#3FFFCF\", //90\r\n  \"#5F8FFF\", //91\r\n  \"#2F4FCF\", //92\r\n  \"#6F4FDF\", //93\r\n  \"#DF1FFF\", //94\r\n  \"#FF005F\", //95\r\n  \"#FF4F00\", //96\r\n  \"#BFAF00\", //97\r\n  \"#8FFF00\", //98\r\n  \"#7F5F00\", //99\r\n  \"#3F2F00\", //100\r\n  \"#00470F\", //101\r\n  \"#0F4F1F\", //102\r\n  \"#17172F\", //103\r\n  \"#171F5F\", //104\r\n  \"#5F3717\", //105\r\n  \"#7F0000\", //106\r\n  \"#DF3F2F\", //107\r\n  \"#DF470F\", //108\r\n  \"#FFBF1F\", //109\r\n  \"#9FDF2F\", //110\r\n  \"#6FAF0F\", //111\r\n  \"#17172F\", //112\r\n  \"#DFDF6F\", //113\r\n  \"#7FEF8F\", //114\r\n  \"#9F9FFF\", //115\r\n  \"#8F6FFF\", //116\r\n  \"#3F3F3F\", //117\r\n  \"#6F6F6F\", //118\r\n  \"#DFFFFF\", //119\r\n  \"#9F0000\", //120\r\n  \"#370000\", //121\r\n  \"#17CF00\", //122\r\n  \"#003F00\", //123\r\n  \"#BFAF00\", //124\r\n  \"#3F2F00\", //125\r\n  \"#AF4F00\", //126\r\n  \"#4F0F00\"  //127\r\n];\r\n\r\nexport default palette","const buttonConfigs = {\r\n  \"◻\":\r\n  {\r\n    class: \"LEDButtonSquare\",\r\n  },\r\n  \"◼️\":\r\n  {\r\n    class: \"LEDButtonSquare\",\r\n    overlayClass: \"LEDButtonSquareOverlay\"\r\n  },\r\n  \"◯\":\r\n  {\r\n    class: \"LEDButtonCircle75\",\r\n    overlayClass: \"LEDButtonCircle75Overlay\"\r\n  },\r\n  \"⬤\":\r\n  {\r\n    class: \"LEDButtonCircle75\",\r\n    overlayClass: \"LEDButtonCircle75Overlay\"\r\n  },\r\n  \"◸\":\r\n  {\r\n    class: \"LEDButtonSquare\",\r\n  },\r\n  \"◹\":\r\n  {\r\n    class: \"LEDButtonSquare\",\r\n  },\r\n  \"◺\":\r\n  {\r\n    class: \"LEDButtonSquare\",\r\n  },\r\n  \"⊿\":\r\n  {\r\n    class: \"LEDButtonSquare\",\r\n  },\r\n  \"◤\":\r\n  {\r\n    class: \"LEDButtonSquare\",\r\n    overlayClass: \"LEDButtonSquareOverlay\"\r\n  },\r\n  \"◥\":\r\n  {\r\n    class: \"LEDButtonSquare\",\r\n    overlayClass: \"LEDButtonSquareOverlay\"\r\n  },\r\n  \"◣\":\r\n  {\r\n    class: \"LEDButtonSquare\",\r\n    overlayClass: \"LEDButtonSquareOverlay\"\r\n  },\r\n  \"◢\":\r\n  {\r\n    class: \"LEDButtonSquare\",\r\n    overlayClass: \"LEDButtonSquareOverlay\"\r\n  },\r\n  //Launchpad Pro MK3\r\n  \"▬\":\r\n  {\r\n    class: \"LEDButtonRectangle\",\r\n    overlayClass: \"LEDButtonRectangleOverlay\"\r\n  },\r\n  //Midi Fighter 64\r\n  \"⦿\":\r\n  {\r\n    class: \"LEDButtonCircleLarge\",\r\n    overlayClass: \"LEDButtonCircleLargeOverlay\"\r\n  },\r\n  //Debug or Theme Base\r\n  \"⌗\":\r\n  {\r\n    class: \"LEDButtonFull\"\r\n  },\r\n}\r\n\r\nexport default buttonConfigs;","import React, { Component } from \"react\";\r\n// import ProjectFileReader from './Components/projectFileReader';\r\nimport Button from \"./Button\";\r\nimport { palette, rawPalette } from \"../palette\";\r\nimport buttonConfigs from \"../buttonConfigs.js\";\r\n\r\nclass Canvas extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    setInterval(() => {\r\n      this.setState({ colormap: this.state.colormap });\r\n    }, 1000 / 60);\r\n  }\r\n\r\n  state = {\r\n    colormap: new Array(this.props.layoutConfig.width).fill(null).map(() => new Array(this.props.layoutConfig.height).fill(palette[0])),\r\n  };\r\n\r\n  keypressHistory = new Array(this.props.layoutConfig.width).fill(null).map(() => new Array(this.props.layoutConfig.height).fill(0));\r\n  currentChain = 0;\r\n  // overlay = \"#808080\";\r\n\r\n  // shouldUpdate = (nextProps) => !Object.is(this.props.layoutConfig, nextProps.layoutConfig);\r\n\r\n  shouldComponentUpdate(nextProps) {\r\n    if (nextProps.projectFile !== this.props.projectFile) {\r\n      console.log(\"Project File Loaded\");\r\n      this.initlalizeCanvas();\r\n    }\r\n\r\n    if (nextProps.layoutConfig !== this.props.layoutConfig) {\r\n      this.initlalizeCanvas(nextProps.layoutConfig);\r\n    }\r\n\r\n    if (nextProps.inputDevice !== this.props.inputDevice /* || prevProps.inputConfig !== this.props.inputConfig */) {\r\n      this.setupMidiInput(nextProps.inputDevice, this.props.inputDevice);\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  initlalizeCanvas(config = this.props.layoutConfig) {\r\n    this.clearCanvas(config);\r\n    this.clearKeypressHistory();\r\n    this.currentChain = 0;\r\n  }\r\n\r\n  clearCanvas(config = this.props.layoutConfig) {\r\n    this.state.colormap = new Array(config.width).fill(null).map(() => new Array(config.height).fill(palette[0])); //I write directly into state because that takes so long it will be complete by the time render is over and throw an error already. Since shouldComponentUpdate will enforce update I will give it a pass\r\n  }\r\n\r\n  clearKeypressHistory() {\r\n    this.keypressHistory = new Array(8).fill(null).map(() => new Array(8).fill(0));\r\n  }\r\n\r\n  setupMidiInput(newInput, oldInput) {\r\n    // console.log([newInput, oldInput])\r\n    if (oldInput !== undefined) oldInput.removeListener();\r\n    if (newInput !== undefined) newInput.addListener(\"midimessage\", \"all\", this.midiInputHandler.bind(this));\r\n  }\r\n\r\n  midiInputHandler = (midiEvent) => {\r\n    console.log(midiEvent.data)\r\n    var [event, note, velocity] = midiEvent.data\r\n    var [x, y] = [undefined, undefined]\r\n    if(this.props.inputConfig.noteToXY !== undefined)\r\n    { \r\n      var xy = this.props.inputConfig.noteToXY(note)\r\n      if(xy == undefined) return\r\n      [x, y] = xy\r\n    }\r\n    else\r\n    {\r\n      [x, y] = this.indexOf2dArray(note, this.props.inputConfig.keymap); \r\n    }\r\n    console.log([x, y]);\r\n    if (x !== undefined && y !== undefined) {\r\n      // let [canvas_x, canvas_y] = this.arrayCalculation([x, y], this.props.inputConfig.canvas_origin, \"-\");\r\n      switch (event >> 4) {\r\n        case 9: //Note On\r\n        case 11: //Control Change\r\n          if (velocity != 0) {\r\n            //Fall back to Note Off\r\n            this.keyOn(x, y, this.props.inputConfig);\r\n            break;\r\n          }\r\n        case 8: //Note Off\r\n          this.keyOff(x, y, this.props.inputConfig);\r\n          break;\r\n      }\r\n    }\r\n  };\r\n\r\n  keyOn = (x, y, config = this.props.layoutConfig, reverseOffset = false, sound = true, led = true) => {\r\n    let soundLoop = 1;\r\n    let [canvas_x, canvas_y] = [x, y]; //canvas_XY means the grid scope XY (Square), Raw XY will be the source XY (Including the chain keys)\r\n    if (!reverseOffset) {\r\n      [canvas_x, canvas_y] = this.arrayCalculation([x, y], config.canvas_origin, \"-\");\r\n    } else {\r\n      [x, y] = this.arrayCalculation([x, y], config.canvas_origin, \"+\");\r\n    }\r\n    console.log(\"Note On - \" + x.toString() + \" \" + y.toString());\r\n    // console.log([x, y, canvas_x, canvas_y])\r\n\r\n    if (this.props.projectFile !== undefined) {\r\n      if (canvas_x >= 0 && canvas_x < 8 && canvas_y >= 0 && canvas_y < 8) {\r\n        //LED\r\n        if (led && this.props.projectFile.keyLED !== undefined && this.props.projectFile.keyLED[this.currentChain] !== undefined && this.props.projectFile.keyLED[this.currentChain][canvas_x] !== undefined && this.props.projectFile.keyLED[this.currentChain][canvas_x][canvas_y] !== undefined && this.props.projectFile.keyLED[this.currentChain][canvas_x][canvas_y].length > 0) {\r\n          let ledIndex = this.keypressHistory[canvas_x][canvas_y] % this.props.projectFile.keyLED[this.currentChain][canvas_x][canvas_y].length;\r\n          this.props.projectFile.keyLED[this.currentChain][canvas_x][canvas_y][ledIndex].stop();\r\n          this.props.projectFile.keyLED[this.currentChain][canvas_x][canvas_y][ledIndex].play();\r\n        }\r\n\r\n        if (sound && this.props.projectFile.keySound !== undefined && this.props.projectFile.keySound[this.currentChain] !== undefined && this.props.projectFile.keySound[this.currentChain][canvas_x] !== undefined && this.props.projectFile.keySound[this.currentChain][canvas_x][canvas_y] !== undefined && this.props.projectFile.keySound[this.currentChain][canvas_x][canvas_y].length > 0) {\r\n          //Sound\r\n          let soundIndex = this.keypressHistory[canvas_x][canvas_y] % this.props.projectFile.keySound[this.currentChain][canvas_x][canvas_y].length;\r\n          // console.log('Play sound ${this.currentChain} ${canvas_x}')\r\n          if (this.props.projectFile.keySound[this.currentChain][canvas_x][canvas_y][soundIndex][1] !== undefined) {\r\n            //Has special data\r\n            if (\r\n              this.props.projectFile.keySound[this.currentChain][canvas_x][canvas_y][soundIndex][1][0] !== undefined // Loop\r\n            ) {\r\n              soundLoop = parseInt(this.props.projectFile.keySound[this.currentChain][canvas_x][canvas_y][soundIndex][1][0]);\r\n            }\r\n          }\r\n          this.props.projectFile.keySound[this.currentChain][canvas_x][canvas_y][soundIndex][0].stop();\r\n          this.props.projectFile.keySound[this.currentChain][canvas_x][canvas_y][soundIndex][0].play(soundLoop);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  checkChain = (x, y, config) => {\r\n    if(config.chainKey !== undefined)\r\n    {\r\n      for (var i = 0; i < Math.min(config.chainKey.length, this.props.projectFile.info.chain); i++) {\r\n        if (config.chainKey[i][0] === x && config.chainKey[i][1] === y) this.chainChange(i);\r\n      }\r\n    }\r\n  };\r\n\r\n  keyOff = (x, y, config = this.props.layoutConfig, reverseOffset = false, sound = true, led = true) => {\r\n    let [canvas_x, canvas_y] = [x, y]; //canvas_XY means the grid scope XY (Square), Raw XY will be the source XY (Including the chain keys)\r\n    if (!reverseOffset) {\r\n      [canvas_x, canvas_y] = this.arrayCalculation([x, y], config.canvas_origin, \"-\");\r\n    } else {\r\n      [x, y] = this.arrayCalculation([x, y], config.canvas_origin, \"+\");\r\n    }\r\n    console.log(\"Note Off - \" + x.toString() + \" \" + y.toString());\r\n\r\n    if (this.props.projectFile !== undefined) {\r\n      if (canvas_x >= 0 && canvas_x < 8 && canvas_y >= 0 && canvas_y < 8) {\r\n        //LED\r\n        if (led && this.props.projectFile.keyLED !== undefined && this.props.projectFile.keyLED[this.currentChain] !== undefined && this.props.projectFile.keyLED[this.currentChain][canvas_x] !== undefined && this.props.projectFile.keyLED[this.currentChain][canvas_x][canvas_y] !== undefined && this.props.projectFile.keyLED[this.currentChain][canvas_x][canvas_y].length > 0) {\r\n          let ledIndex = this.keypressHistory[canvas_x][canvas_y] % this.props.projectFile.keyLED[this.currentChain][canvas_x][canvas_y].length;\r\n          if (this.props.projectFile.keyLED[this.currentChain][canvas_x][canvas_y][ledIndex] !== undefined && this.props.projectFile.keyLED[this.currentChain][canvas_x][canvas_y][ledIndex].repeat === 0) {\r\n            //Page might have changed\r\n            this.props.projectFile.keyLED[this.currentChain][canvas_x][canvas_y][ledIndex].endLoop();\r\n          }\r\n        }\r\n\r\n        if (sound && this.props.projectFile.keySound !== undefined && this.props.projectFile.keySound[this.currentChain] !== undefined && this.props.projectFile.keySound[this.currentChain][canvas_x] !== undefined && this.props.projectFile.keySound[this.currentChain][canvas_x][canvas_y] !== undefined && this.props.projectFile.keySound[this.currentChain][canvas_x][canvas_y].length > 0) {\r\n          //Sound\r\n          let soundIndex = this.keypressHistory[canvas_x][canvas_y] % this.props.projectFile.keySound[this.currentChain][canvas_x][canvas_y].length;\r\n          // console.log('Play sound ${this.currentChain} ${canvas_x}')\r\n          if (this.props.projectFile.keySound[this.currentChain][canvas_x][canvas_y][soundIndex][1] !== undefined) {\r\n            if (\r\n              this.props.projectFile.keySound[this.currentChain][canvas_x][canvas_y][soundIndex][1][0] == \"0\" // Inf Loop\r\n            ) {\r\n              this.props.projectFile.keySound[this.currentChain][canvas_x][canvas_y][soundIndex][0].endLoop();\r\n            }\r\n\r\n            if (this.props.projectFile.keySound[this.currentChain][canvas_x][canvas_y][soundIndex][1][1] !== undefined) {\r\n              //Wormhole\r\n              let targetChain = parseInt(this.props.projectFile.keySound[this.currentChain][canvas_x][canvas_y][soundIndex][1][1]) - 1;\r\n              console.log(`Wormhole to Chain ${targetChain + 1}`);\r\n              this.chainChange(targetChain);\r\n            }\r\n          }\r\n        }\r\n\r\n        //Update History\r\n        if (this.keypressHistory[canvas_x] != undefined && this.keypressHistory[canvas_x][canvas_y] != undefined) \r\n          this.keypressHistory[canvas_x][canvas_y]++;\r\n      }\r\n      else\r\n      {\r\n        //Chain Change\r\n        this.checkChain(x, y, config);\r\n      }\r\n    }\r\n  };\r\n\r\n  chainChange = (chain) => {\r\n    console.log(\"Chain Changed to \" + (chain + 1));\r\n    if (chain !== this.currentChain) this.clearKeypressHistory();\r\n    this.currentChain = chain;\r\n  };\r\n\r\n  setColor = (x, y, color) => {\r\n    // console.log(`Set Color ${x} ${y} ${color}`)\r\n    this.setColorCanvas(x, y, color);\r\n    this.setColorOutput(x, y, color);\r\n  };\r\n\r\n  setColorCanvas(x, y, color) {\r\n    var [canvas_x, canvas_y] = [undefined, undefined];\r\n    if (x === \"l\") {\r\n      if (this.props.layoutConfig.lKey == undefined) return;\r\n      [canvas_x, canvas_y] = this.props.layoutConfig.lKey;\r\n    } else if (x === \"mc\") {\r\n      if (this.props.layoutConfig.mcTable === undefined || this.props.layoutConfig.mcTable[y] == null) return;\r\n      [canvas_x, canvas_y] = this.props.layoutConfig.mcTable[y];\r\n    } else {\r\n      [canvas_x, canvas_y] = this.arrayCalculation([x, y], this.props.layoutConfig.canvas_origin, \"+\");\r\n    }\r\n\r\n    try {\r\n      if (/^#[0-9A-F]{6}$/i.test(color)) {\r\n        //Check if it is a Hex String\r\n        this.state.colormap[canvas_x][canvas_y] = color;\r\n      } else {\r\n        this.state.colormap[canvas_x][canvas_y] = palette[color];\r\n      }\r\n    } catch (e) {\r\n      console.error(e);\r\n      console.error([x, y, color, canvas_x, canvas_y]);\r\n    }\r\n  }\r\n\r\n  setColorOutput(x, y, color) {\r\n    if (this.props.outputDevice !== undefined && this.props.outputConfig !== undefined) {\r\n      var [output_x, output_y] = [undefined, undefined];\r\n      if (x === \"l\") {\r\n        if (this.props.outputConfig.lKey == undefined) return;\r\n        [output_x, output_y] = this.props.outputConfig.lKey;\r\n      } else if (x === \"mc\") {\r\n        if (this.props.outputConfig.mcTable === undefined || this.props.outputConfig.mcTable[y] == null) return\r\n        [output_x, output_y] = this.props.outputConfig.mcTable[y];\r\n      } else {\r\n        [output_x, output_y] = this.arrayCalculation([x, y], this.props.outputConfig.canvas_origin, \"+\");\r\n      }\r\n      try {\r\n        if (/^#[0-9A-F]{6}$/i.test(color)) {\r\n          //Check if it is a Hex String\r\n          this.sendSysex(this.props.outputConfig.hexSysexGen(output_y, output_x, color));\r\n        } else {\r\n          this.sendMidi(\"NoteOn\", this.props.outputConfig.channel, this.props.outputConfig.keymap[output_y][output_x], color);\r\n        }\r\n      } catch (e) {\r\n        console.error(e);\r\n        console.error([x, y, color, output_x, output_y]);\r\n      }\r\n    }\r\n  }\r\n\r\n  sendMidi(mode, channel, note, value = 0) {\r\n    if (typeof note === \"string\") {\r\n      let modeKey = note.charAt(0);\r\n      note = parseInt(note.substr(1));\r\n      switch (modeKey) {\r\n        case \"C\":\r\n          mode = \"CC\";\r\n          break;\r\n        case \"X\":\r\n          mode = \"HEX\";\r\n          break;\r\n        default:\r\n          return;\r\n      }\r\n    }\r\n    switch (mode) {\r\n      case \"NoteOn\":\r\n        this.props.outputDevice.send(0x90 + channel - 1, [note, value]);\r\n        break;\r\n      case \"NoteOff\":\r\n        this.props.outputDevice.send(0x80 + channel - 1, [note, value]);\r\n        break;\r\n      case \"CC\":\r\n        this.props.outputDevice.send(0xb0 + channel - 1, [note, value]);\r\n        break;\r\n      case \"HEX\":\r\n        this.sendSysex(this.props.outputConfig.hexSysexGen(note, rawPalette[value]));\r\n        break;\r\n    }\r\n  }\r\n\r\n  sendSysex(message) {\r\n    // console.log(message)\r\n    this.props.outputDevice.sendSysex([], message);\r\n  }\r\n\r\n  // // Overlays a color\r\n  // colorOverlay = (hex, overlay) => {\r\n  //   let [r, g, b] = this.toRGB(hex)\r\n  //   let [r0, g0, b0] = this.toRGB(overlay)\r\n  //   r = Math.round(r * (255 - r0) / 255 + r0);\r\n  //   g = Math.round(g * (255 - g0) / 255 + g0);\r\n  //   b = Math.round(b * (255 - b0) / 255 + b0);\r\n  //   return this.toHEX(r, g, b)\r\n  // }\r\n\r\n  // // Converts a CHAD HEX color to a beta RGB color\r\n  // toRGB = (hex) => {\r\n  //   const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex)\r\n  //   return [parseInt(result[1], 16),\r\n  //           parseInt(result[2], 16),\r\n  //           parseInt(result[3], 16)]\r\n  // }\r\n\r\n  // // Converts a beta RGB color to a CHAD HEX color\r\n  // toHEX = (r, g, b) => '#' + this.componentToHex(r) + this.componentToHex(g) + this.componentToHex(b)\r\n\r\n  // // Converts the value of a given component to CHAD HEX\r\n  // componentToHex = (component) => {\r\n  //   const hex = component.toString(16)\r\n  //   return hex.length === 1 ? '0' + hex : hex\r\n  // }\r\n\r\n  arrayCalculation = (array1, array2, operation) => {\r\n    let newArray = [];\r\n    if (array1.length === array2.length) {\r\n      switch (operation) {\r\n        case \"+\":\r\n          for (var i = 0; i < array1.length; i++) {\r\n            newArray.push(array1[i] + array2[i]);\r\n          }\r\n          return newArray;\r\n        case \"-\":\r\n          for (var i = 0; i < array1.length; i++) {\r\n            newArray.push(array1[i] - array2[i]);\r\n          }\r\n          return newArray;\r\n      }\r\n    }\r\n  };\r\n\r\n  indexOf2dArray(id, matrix) {\r\n    for (var y = 0, len = matrix.length; y < len; y++) {\r\n      for (var x = 0, len2 = matrix[y].length; x < len2; x++) {\r\n        if (matrix[y][x] === id) {\r\n          return [x, y];\r\n        }\r\n      }\r\n    }\r\n    return [undefined, undefined];\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className=\"canvas\"\r\n        style={{\r\n          padding: this.props.layoutConfig.padding,\r\n          borderRadius: this.props.layoutConfig.radius,\r\n        }}\r\n      >\r\n        {this.props.layoutConfig.layout.map((value, y) => {\r\n          return (\r\n            <div className=\"button-row\">\r\n              {this.props.layoutConfig.layout[y].map((value, x) => {\r\n                if(Object.keys(buttonConfigs).includes(value))\r\n                  {\r\n                    return <Button x={x} y={y} class={buttonConfigs[value].class} overlayClass={buttonConfigs[value].overlayClass} color={this.state.colormap[x][y]} on={this.keyOn} off={this.keyOff} />;\r\n                  }\r\n                  else\r\n                  {\r\n                    return <div key={\"Spacer \" + x.toString() + \"-\" + y.toString()} style={{width: \"96px\"}}/>\r\n                  }\r\n                }\r\n              )}\r\n            </div>\r\n          );\r\n        })}\r\n        {/* <button onClick={this.playAutoplay}>Auto Play</button> */}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Canvas;\r\n","const config = {\r\n  defaultLayout: \"Launchpad Pro\",\r\n}\r\n\r\nexport default config;","const deviceConfigs = {\r\n  \"Launchpad Pro\":\r\n  {\r\n    channel: 1,\r\n    midiNameRegex: \"Launchpad Pro\", //For some reason mine shows up as \"3- Launchpad Pro\"\r\n\r\n    initializationSysex:[\r\n      [0, 32, 41, 2, 16, 33, 0], //Enter Live Mode\r\n      [0, 32, 41, 2, 16, 14, 0], //Clear canvas\r\n      [0, 32, 41, 2, 16, 10, 99, 0], //Turn off Mode light\r\n    ],\r\n\r\n    // inputInfoMessage:[\r\n    //   \"Hello\",\r\n    //   \"World\",\r\n    // ],\r\n\r\n    // outputInfoMessage:[\r\n    //   \"Hello\",\r\n    //   \"World\",\r\n    // ],\r\n\r\n    layout: [\r\n      [\"　\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"　\"],\r\n      [\"⬤\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"⬤\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"⬤\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"⬤\", \"◻\", \"◻\", \"◻\", \"◸\", \"◹\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"⬤\", \"◻\", \"◻\", \"◻\", \"◺\", \"⊿\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"⬤\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"⬤\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"⬤\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"　\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \" \"]],\r\n\r\n    keymap: [\r\n      [null, 91, 92, 93, 94, 95, 96, 97, 98, null],\r\n      [80, 81, 82, 83, 84, 85, 86, 87, 88, 89],\r\n      [70, 71, 72, 73, 74, 75, 76, 77, 78, 79],\r\n      [60, 61, 62, 63, 64, 65, 66, 67, 68, 69],\r\n      [50, 51, 52, 53, 54, 55, 56, 57, 58, 59],\r\n      [40, 41, 42, 43, 44, 45, 46, 47, 48, 49],\r\n      [30, 31, 32, 33, 34, 35, 36, 37, 38, 39],\r\n      [20, 21, 22, 23, 24, 25, 26, 27, 28, 29],\r\n      [10, 11, 12, 13, 14, 15, 16, 17, 18, 19],\r\n      [null, 1, 2, 3, 4, 5, 6, 7, 8, \"X99\"]],\r\n\r\n    //Size of LED since sometimes Key can come without LED. We don't really need them since we can load the size of layout array\r\n    width: 10,\r\n    height: 10,\r\n\r\n    //UI related\r\n    padding: 25,\r\n    radius: 15,\r\n\r\n    canvas_origin: [1, 1],\r\n\r\n    chainKey: [[9, 1], [9, 2], [9, 3], [9, 4], [9, 5], [9, 6], [9, 7], [9, 8],\r\n    [8, 9], [7, 9], [6, 9], [5, 9], [4, 9], [3, 9], [2, 9], [1, 9],\r\n    [0, 8], [0, 7], [0, 6], [0, 5], [0, 4], [0, 3], [0, 2], [0, 1]],\r\n\r\n    mcTable: [\r\n      [1, 0], [2, 0], [3, 0], [4, 0], [5, 0], [6, 0], [7, 0], [8, 0],\r\n      [9, 1], [9, 2], [9, 3], [9, 4], [9, 5], [9, 6], [9, 7], [9, 8],\r\n      [8, 9], [7, 9], [6, 9], [5, 9], [4, 9], [3, 9], [2, 9], [1, 9],\r\n      [0, 8], [0, 7], [0, 6], [0, 5], [0, 4], [0, 3], [0, 2], [0, 1]],\r\n\r\n    lKey: [9, 9],\r\n\r\n    noteToXY(note)\r\n    {\r\n      if(note >= 1 && note <= 99 /* && note != 9 && note != 90 */)\r\n        return [note % 10, 9 - Math.floor(note / 10)]\r\n    },\r\n\r\n    hexSysexGen: function () {\r\n      if (arguments.length != 2 && arguments.length != 3)\r\n        return [] //Error\r\n      switch (arguments.length) {\r\n        case 2: //ID\r\n          var id = arguments[0]\r\n          var hex = arguments[1]\r\n          break;\r\n        case 3: //XY\r\n          var x = arguments[0] + 1\r\n          var y = arguments[1] + 1\r\n          var id = x * 10 + y\r\n          var hex = arguments[2]\r\n          break;\r\n        default:\r\n          return []\r\n      }\r\n      if (typeof (hex) === \"string\" && hex.charAt(0) === '#') {\r\n        hex = parseInt(hex.substr(1), 16)\r\n      }\r\n      else {\r\n        return []\r\n      }\r\n      var r = (hex >> 16) >> 2 //6 bit color\r\n      var g = (hex & 0xFF00 >> 8) >> 2\r\n      var b = (hex & 0xFF) >> 2\r\n      return [0, 32, 41, 2, 16, 11, id, r, g, b]\r\n    }\r\n  },\r\n  \"Launchpad Pro (Phantom)\":\r\n  {\r\n    layout: [\r\n      [\"　\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"　\"],\r\n      [\"⬤\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"⬤\"],\r\n      [\"⬤\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"⬤\"],\r\n      [\"⬤\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"⬤\"],\r\n      [\"⬤\", \"◼️\", \"◼️\", \"◼️\", \"◤\", \"◥\", \"◼️\", \"◼️\", \"◼️\", \"⬤\"],\r\n      [\"⬤\", \"◼️\", \"◼️\", \"◼️\", \"◣\", \"◢\", \"◼️\", \"◼️\", \"◼️\", \"⬤\"],\r\n      [\"⬤\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"⬤\"],\r\n      [\"⬤\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"⬤\"],\r\n      [\"⬤\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"⬤\"],\r\n      [\"　\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \" \"]],\r\n\r\n    //Size of LED since sometimes Key can come without LED. We don't really need them since we can load the size of layout array\r\n    width: 10,\r\n    height: 10,\r\n\r\n    //UI related\r\n    padding: 25,\r\n    radius: 15,\r\n\r\n    canvas_origin: [1, 1],\r\n\r\n    chainKey: [[9, 1], [9, 2], [9, 3], [9, 4], [9, 5], [9, 6], [9, 7], [9, 8],\r\n    [8, 9], [7, 9], [6, 9], [5, 9], [4, 9], [3, 9], [2, 9], [1, 9],\r\n    [0, 8], [0, 7], [0, 6], [0, 5], [0, 4], [0, 3], [0, 2], [0, 1]],\r\n\r\n    mcTable: [\r\n      [1, 0], [2, 0], [3, 0], [4, 0], [5, 0], [6, 0], [7, 0], [8, 0],\r\n      [9, 1], [9, 2], [9, 3], [9, 4], [9, 5], [9, 6], [9, 7], [9, 8],\r\n      [8, 9], [7, 9], [6, 9], [5, 9], [4, 9], [3, 9], [2, 9], [1, 9],\r\n      [0, 8], [0, 7], [0, 6], [0, 5], [0, 4], [0, 3], [0, 2], [0, 1]],\r\n\r\n    lKey: [9, 9],\r\n  },\r\n  \"Launchpad Pro (CFW)\":\r\n  {\r\n    channel: 16,\r\n    midiNameRegex: \"Launchpad Open\", //For some reason mine shows up as \"3- Launchpad Pro\"\r\n\r\n    initializationSysex:[\r\n      [0, 32, 41, 2, 16, 33, 1], //Enter Performance Mode\r\n      [0, 32, 41, 2, 16, 14, 0], //Clear canvas\r\n    ],\r\n\r\n    keymap: [\r\n      [null, 28, 29, 30, 31, 32, 33, 34, 35, null],\r\n      [108, 64, 65, 66, 67, 96, 97, 98, 99, 100],\r\n      [109, 60, 61, 62, 63, 92, 93, 94, 95, 101],\r\n      [110, 56, 57, 58, 59, 88, 89, 90, 91, 102],\r\n      [111, 52, 53, 54, 55, 84, 85, 86, 87, 103],\r\n      [112, 48, 49, 50, 51, 80, 81, 82, 83, 104],\r\n      [113, 44, 45, 46, 47, 76, 77, 78, 79, 105],\r\n      [114, 40, 41, 42, 43, 72, 73, 74, 75, 106],\r\n      [115, 36, 37, 38, 39, 68, 69, 70, 71, 107],\r\n      [null, 116, 117, 118, 119, 120, 121, 122, 123, 27]],\r\n\r\n    //Size of LED since sometimes Key can come without LED. We don't really need them since we can load the size of layout array\r\n    width: 10,\r\n    height: 10,\r\n\r\n    //UI related\r\n    padding: 30,\r\n    radius: 15,\r\n\r\n    canvas_origin: [1, 1],\r\n\r\n    chainKey: [[9, 1], [9, 2], [9, 3], [9, 4], [9, 5], [9, 6], [9, 7], [9, 8],\r\n    [8, 9], [7, 9], [6, 9], [5, 9], [4, 9], [3, 9], [2, 9], [1, 9],\r\n    [0, 8], [0, 7], [0, 6], [0, 5], [0, 4], [0, 3], [0, 2], [0, 1]],\r\n\r\n    mcTable: [\r\n      [1, 0], [2, 0], [3, 0], [4, 0], [5, 0], [6, 0], [7, 0], [8, 0],\r\n      [9, 1], [9, 2], [9, 3], [9, 4], [9, 5], [9, 6], [9, 7], [9, 8],\r\n      [8, 9], [7, 9], [6, 9], [5, 9], [4, 9], [3, 9], [2, 9], [1, 9],\r\n      [0, 8], [0, 7], [0, 6], [0, 5], [0, 4], [0, 3], [0, 2], [0, 1]],\r\n\r\n    lKey: [9, 9],\r\n\r\n    noteToXY(note)\r\n    {\r\n      if(note >= 36 && note <= 99) // grid\r\n      {\r\n        var keymap_lut = [[1,8],[2,8],[3,8],[4,8],[1,7],[2,7],[3,7],[4,7],[1,6],[2,6],[3,6],[4,6],[1,5],[2,5],[3,5],[4,5],[1,4],[2,4],[3,4],[4,4],[1,3],[2,3],[3,3],[4,3],[1,2],[2,2],[3,2],[4,2],[1,1],[2,1],[3,1],[4,1],[5,8],[6,8],[7,8],[8,8],[5,7],[6,7],[7,7],[8,7],[5,6],[6,6],[7,6],[8,6],[5,5],[6,5],[7,5],[8,5],[5,4],[6,4],[7,4],[8,4],[5,3],[6,3],[7,3],[8,3],[5,2],[6,2],[7,2],[8,2],[5,1],[6,1],[7,1],[8,1]]\r\n        return keymap_lut[note - 36]\r\n      }\r\n      else if(note >= 100 && note <= 107)\r\n      {\r\n        return this.mcTable[note - 100 + 8] //note - 100 is the raw index, +8 is the offset\r\n      }\r\n      else if(note >= 116 && note <= 123)\r\n      {\r\n        return this.mcTable[7 - (note - 116) + 16] //7 - as reverse the direction\r\n      }\r\n      else if(note >= 108 && note <= 115)\r\n      {\r\n        return this.mcTable[7 - (note - 108) + 24]\r\n      }\r\n      else if(note >= 28 && note <= 35)\r\n      {\r\n        return this.mcTable[note - 28]\r\n      }\r\n      else if(note == 27)\r\n      {\r\n        return this.lKey\r\n      }\r\n    },\r\n\r\n    hexSysexGen: function () {\r\n      if (arguments.length != 2 && arguments.length != 3)\r\n        return [] //Error\r\n      switch (arguments.length) {\r\n        case 2: //ID\r\n          var id = arguments[0]\r\n          var hex = arguments[1]\r\n          break;\r\n        case 3: //XY\r\n          var x = arguments[0] + 1\r\n          var y = arguments[1] + 1\r\n          var id = x * 10 + y\r\n          var hex = arguments[2]\r\n          break;\r\n        default:\r\n          return []\r\n      }\r\n      if (typeof (hex) === \"string\" && hex.charAt(0) === '#') {\r\n        hex = parseInt(hex.substr(1), 16)\r\n      }\r\n      else {\r\n        return []\r\n      }\r\n      var r = (hex >> 16) >> 2 //6 bit color\r\n      var g = (hex & 0xFF00 >> 8) >> 2\r\n      var b = (hex & 0xFF) >> 2\r\n      return [0, 32, 41, 2, 16, 11, id, r, g, b]\r\n    }\r\n  },\r\n  \"Launchpad MK2\":\r\n  {\r\n    channel: 1,\r\n    midiNameRegex: \"Launchpad MK2\",\r\n\r\n    layout: [\r\n      [\"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"⬤\", \"　\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◸\", \"◹\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◺\", \"⊿\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"⬤\"]],\r\n\r\n    keymap: [\r\n      [\"C104\", \"C105\", \"C106\", \"C107\", \"C108\", \"C109\", \"C110\", \"C111\", null],\r\n      [81, 82, 83, 84, 85, 86, 87, 88, 89],\r\n      [71, 72, 73, 74, 75, 76, 77, 78, 79],\r\n      [61, 62, 63, 64, 65, 66, 67, 68, 69],\r\n      [51, 52, 53, 54, 55, 56, 57, 58, 59],\r\n      [41, 42, 43, 44, 45, 46, 47, 48, 49],\r\n      [31, 32, 33, 34, 35, 36, 37, 38, 39],\r\n      [21, 22, 23, 24, 25, 26, 27, 28, 29],\r\n      [11, 12, 13, 14, 15, 16, 17, 18, 19]],\r\n\r\n    width: 9,\r\n    height: 9,\r\n\r\n    //UI related\r\n    padding: 30,\r\n    radius: 15,\r\n\r\n    canvas_origin: [0, 1],\r\n\r\n    chainKey: [[8, 1], [8, 2], [8, 3], [8, 4], [8, 5], [8, 6], [8, 7], [8, 8]],\r\n\r\n    mcTable: [\r\n      [0, 0], [1, 0], [2, 0], [3, 0], [4, 0], [5, 0], [6, 0], [7, 0],\r\n      [8, 1], [8, 2], [8, 3], [8, 4], [8, 5], [8, 6], [8, 7], [8, 8],\r\n      null, null, null, null, null, null, null, null,\r\n      null, null, null, null, null, null, null, null,],\r\n\r\n      noteToXY(note)\r\n      {\r\n        if(note >= 11 && note <= 89)\r\n        {\r\n          return [(note % 10) - 1, 9 - Math.floor(note / 10)]\r\n        }\r\n        else if(note >= 104 && note <= 111)\r\n        {\r\n          return this.mcTable[note - 104 + 24]\r\n        }\r\n      },\r\n\r\n    hexSysexGen: function () {\r\n      if (arguments.length != 2 && arguments.length != 3)\r\n        return [] //Error\r\n      switch (arguments.length) {\r\n        case 2: //ID\r\n          var id = arguments[0]\r\n          var hex = arguments[1]\r\n          break;\r\n        case 3: //XY\r\n          var x = arguments[0] + 1\r\n          var y = arguments[1] + 1\r\n          var id = x * 10 + y\r\n          var hex = arguments[2]\r\n          break;\r\n        default:\r\n          return []\r\n      }\r\n      if (typeof (hex) === \"string\" && hex.charAt(0) === '#') {\r\n        hex = parseInt(hex.substr(1), 16)\r\n      }\r\n      else {\r\n        return []\r\n      }\r\n      var r = (hex >> 16) >> 2 //6 bit color\r\n      var g = (hex & 0xFF00 >> 8) >> 2\r\n      var b = (hex & 0xFF) >> 2\r\n      return [0, 32, 41, 2, 24, 11, id, r, g, b]\r\n    }\r\n  },\r\n  \"Launchpad X\":\r\n  {\r\n    channel: 1,\r\n    midiNameRegex: \"Launchpad X|LPX MIDI\",\r\n\r\n    initializationSysex:[\r\n      [0, 32, 41, 2, 12, 14, 1], //Enter Programmer Mode\r\n    ],\r\n\r\n    layout: [\r\n      [\"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \" \"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◼️\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◼️\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◼️\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◸\", \"◹\", \"◻\", \"◻\", \"◻\", \"◼️\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◺\", \"⊿\", \"◻\", \"◻\", \"◻\", \"◼️\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◼️\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◼️\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◼️\"]],\r\n\r\n    keymap: [\r\n      [91, 92, 93, 94, 95, 96, 97, 98, 99],\r\n      [81, 82, 83, 84, 85, 86, 87, 88, 89],\r\n      [71, 72, 73, 74, 75, 76, 77, 78, 79],\r\n      [61, 62, 63, 64, 65, 66, 67, 68, 69],\r\n      [51, 52, 53, 54, 55, 56, 57, 58, 59],\r\n      [41, 42, 43, 44, 45, 46, 47, 48, 49],\r\n      [31, 32, 33, 34, 35, 36, 37, 38, 39],\r\n      [21, 22, 23, 24, 25, 26, 27, 28, 29],\r\n      [11, 12, 13, 14, 15, 16, 17, 18, 19]],\r\n\r\n    width: 9,\r\n    height: 9,\r\n\r\n    //UI related\r\n    padding: 30,\r\n    radius: 5,\r\n\r\n    canvas_origin: [0, 1],\r\n\r\n    chainKey: [[8, 1], [8, 2], [8, 3], [8, 4], [8, 5], [8, 6], [8, 7], [8, 8]],\r\n\r\n    mcTable: [\r\n      [0, 0], [1, 0], [2, 0], [3, 0], [4, 0], [5, 0], [6, 0], [7, 0],\r\n      [8, 1], [8, 2], [8, 3], [8, 4], [8, 5], [8, 6], [8, 7], [8, 8],\r\n      null, null, null, null, null, null, null, null,\r\n      null, null, null, null, null, null, null, null,],\r\n\r\n    lKey: [9, 0],\r\n\r\n    noteToXY(note)\r\n    {\r\n      if(note >= 11 && note <= 99) // grid\r\n      {\r\n        return [(note % 10) - 1, 9 - (Math.floor(note / 10))]\r\n      }\r\n    },\r\n\r\n    hexSysexGen: function () {\r\n      if (arguments.length != 2 && arguments.length != 3)\r\n        return [] //Error\r\n      switch (arguments.length) {\r\n        case 2: //MC\r\n          var mc = arguments[0]\r\n          if (this.mcTable[mc] == null)\r\n            return []\r\n          var x, y = this.mcTable[mc]\r\n          var hex = arguments[1]\r\n          break;\r\n        case 3: //XY\r\n          var x = arguments[0] + 1\r\n          var y = arguments[1] + 1\r\n          var hex = arguments[2]\r\n          break;\r\n        default:\r\n          return []\r\n      }\r\n      var xy = x * 10 + y\r\n      var r = (hex >> 16) >> 1 //7 bit color\r\n      var g = (hex & 0xFF00 >> 8) >> 1\r\n      var b = (hex & 0xFF) >> 1\r\n      return [0, 32, 41, 2, 12, 3, 3, xy, r, g, b]\r\n    }\r\n  },\r\n  \"Launchpad Pro MK3\":\r\n  {\r\n    channel: 1,\r\n    midiNameRegex: \"Launchpad Pro MK3\",\r\n\r\n    initializationSysex:[\r\n      [0, 32, 41, 2, 12, 14, 0, 17, 0], //Enter Programmer Mode\r\n    ],\r\n\r\n    layout: [\r\n      [\"　\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \" \"],\r\n      [\"◼️\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◼️\"],\r\n      [\"◼️\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◼️\"],\r\n      [\"◼️\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◼️\"],\r\n      [\"◼️\", \"◻\", \"◻\", \"◻\", \"◸\", \"◹\", \"◻\", \"◻\", \"◻\", \"◼️\"],\r\n      [\"◼️\", \"◻\", \"◻\", \"◻\", \"◺\", \"⊿\", \"◻\", \"◻\", \"◻\", \"◼️\"],\r\n      [\"◼️\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◼️\"],\r\n      [\"◼️\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◼️\"],\r\n      [\"◼️\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◼️\"],\r\n      [\"　\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \"◼️\", \" \"]],\r\n\r\n    keymap: [\r\n      [null, 91, 92, 93, 94, 95, 96, 97, 98, 99],\r\n      [80, 81, 82, 83, 84, 85, 86, 87, 88, 89],\r\n      [70, 71, 72, 73, 74, 75, 76, 77, 78, 79],\r\n      [60, 61, 62, 63, 64, 65, 66, 67, 68, 69],\r\n      [50, 51, 52, 53, 54, 55, 56, 57, 58, 59],\r\n      [40, 41, 42, 43, 44, 45, 46, 47, 48, 49],\r\n      [30, 31, 32, 33, 34, 35, 36, 37, 38, 39],\r\n      [20, 21, 22, 23, 24, 25, 26, 27, 28, 29],\r\n      [10, 11, 12, 13, 14, 15, 16, 17, 18, 19],\r\n      [null, 1, 2, 3, 4, 5, 6, 7, 8, null]],\r\n\r\n    //Size of LED since sometimes Key can come without LED. We don't really need them since we can load the size of layout array\r\n    width: 10,\r\n    height: 10,\r\n\r\n    //UI related\r\n    padding: 25,\r\n    radius: 5,\r\n\r\n    canvas_origin: [1, 1],\r\n\r\n    chainKey: [[9, 1], [9, 2], [9, 3], [9, 4], [9, 5], [9, 6], [9, 7], [9, 8]],\r\n\r\n    mcTable: [\r\n      [1, 0], [2, 0], [3, 0], [4, 0], [5, 0], [6, 0], [7, 0], [8, 0],\r\n      [9, 1], [9, 2], [9, 3], [9, 4], [9, 5], [9, 6], [9, 7], [9, 8],\r\n      [8, 9], [7, 9], [6, 9], [5, 9], [4, 9], [3, 9], [2, 9], [1, 9],\r\n      [0, 8], [0, 7], [0, 6], [0, 5], [0, 4], [0, 3], [0, 2], [0, 1]],\r\n\r\n    lKey: [9, 0],\r\n\r\n    noteToXY(note)\r\n    {\r\n      if(note >= 1 && note <= 99)\r\n      {\r\n        return [(note % 10), 9 - (Math.floor(note / 10))]\r\n      }\r\n      else if(note >= 101 && note <= 108)\r\n      {\r\n        return [note - 100, 9]\r\n      }\r\n    },\r\n\r\n    hexSysexGen: function () {\r\n      if (arguments.length != 2 && arguments.length != 3)\r\n        return [] //Error\r\n      switch (arguments.length) {\r\n        case 2: //MC\r\n          var mc = arguments[0]\r\n          // if (this.mcTable[mc] == null)\r\n          //   return []\r\n          var x, y = this.mcTable[mc]\r\n          var hex = arguments[1]\r\n          break;\r\n        case 3: //XY\r\n          var x = arguments[0] + 1\r\n          var y = arguments[1] + 1\r\n          var hex = arguments[2]\r\n          break;\r\n        default:\r\n          return []\r\n      }\r\n      var xy = x * 10 + y\r\n      var r = (hex >> 16) >> 1 //7 bit color\r\n      var g = (hex & 0xFF00 >> 8) >> 1\r\n      var b = (hex & 0xFF) >> 1\r\n      return [0, 32, 41, 2, 14, 3, 3, xy, r, g, b]\r\n    }\r\n  },\r\n  \"Matrix\":\r\n  {\r\n    channel: 2,\r\n    midiNameRegex: \"^Matrix\",\r\n\r\n    layout: [\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◸\", \"◹\", \"◻\", \"◻\", \"◻\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◺\", \"⊿\", \"◻\", \"◻\", \"◻\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\"],\r\n      [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\"]],\r\n\r\n    keymap: [\r\n      [64, 65, 66, 67, 96, 97, 98, 99],\r\n      [60, 61, 62, 63, 92, 93, 94, 95],\r\n      [56, 57, 58, 59, 88, 89, 90, 91],\r\n      [52, 53, 54, 55, 84, 85, 86, 87],\r\n      [48, 49, 50, 51, 80, 81, 82, 83],\r\n      [44, 45, 46, 47, 76, 77, 78, 79],\r\n      [40, 41, 42, 43, 72, 73, 74, 75],\r\n      [36, 37, 38, 39, 68, 69, 70, 71],\r\n      [100, 101, 102, 103, 104, 105, 106, 107]],\r\n\r\n    width: 8,\r\n    height: 8,\r\n\r\n    //UI related\r\n    padding: 20,\r\n    radius: 15,\r\n\r\n    canvas_origin: [0, 0],\r\n\r\n    chainKey: [[0, 8], [1, 8], [2, 8], [3, 8], [4, 8], [5, 8], [6, 8], [7, 8]],\r\n\r\n    // mcTable: [\r\n    //   null, null, null, null, null, null, null, null,\r\n    //   null, null, null, null, null, null, null, null,\r\n    //   null, null, null, null, null, null, null, null,\r\n    //   null, null, null, null, null, null, null, null,],\r\n\r\n    noteToXY(note)\r\n    {\r\n      if(note > 35 && note < 100) // grid\r\n      {\r\n        var keymap_lut = [[0,7],[1,7],[2,7],[3,7],[0,6],[1,6],[2,6],[3,6],[0,5],[1,5],[2,5],[3,5],[0,4],[1,4],[2,4],[3,4],[0,3],[1,3],[2,3],[3,3],[0,2],[1,2],[2,2],[3,2],[0,1],[1,1],[2,1],[3,1],[0,0],[1,0],[2,0],[3,0],[4,7],[5,7],[6,7],[7,7],[4,6],[5,6],[6,6],[7,6],[4,5],[5,5],[6,5],[7,5],[4,4],[5,4],[6,4],[7,4],[4,3],[5,3],[6,3],[7,3],[4,2],[5,2],[6,2],[7,2],[4,1],[5,1],[6,1],[7,1],[4,0],[5,0],[6,0],[7,0]]\r\n        return keymap_lut[note - 36]\r\n      }\r\n      else if(note > 99 && note < 108)\r\n      {\r\n        return this.chainKey[note - 100]\r\n      }\r\n    },\r\n\r\n    hexSysexGen: function () {\r\n      if (arguments.length != 3)\r\n        return [] //Error\r\n      switch (arguments.length) {\r\n        // case 2: //MC\r\n        //   var mc = arguments[0]\r\n        //   if(this.mcTable[mc] == null)\r\n        //     return\r\n        //   var x,y = this.mcTable[mc]\r\n        //   var hex = arguments[1]\r\n        case 3: //XY\r\n          var x = arguments[0]\r\n          var y = arguments[1]\r\n          var hex = arguments[2]\r\n          break;\r\n        default:\r\n          return;\r\n      }\r\n      var r = (hex >> 16) >> 1 //7 bit color\r\n      var g = (hex & 0xFF00 >> 8) >> 1\r\n      var b = (hex & 0xFF) >> 1\r\n      return [240, 0, 2, 3, 1, 0, 18, 32, 0, 3, r, g, b, 247]\r\n    }\r\n  },\r\n  \"Matrix Pro\":\r\n  {\r\n    channel: 2,\r\n    midiNameRegex: \"^Matrix Pro\",\r\n\r\n    // layout: [\r\n    //   [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\"],\r\n    //   [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\"],\r\n    //   [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\"],\r\n    //   [\"◻\", \"◻\", \"◻\", \"◸\", \"◹\", \"◻\", \"◻\", \"◻\"],\r\n    //   [\"◻\", \"◻\", \"◻\", \"◺\", \"⊿\", \"◻\", \"◻\", \"◻\"],\r\n    //   [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\"],\r\n    //   [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\"],\r\n    //   [\"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\", \"◻\"]],\r\n\r\n    keymap: [\r\n      [null, 28, 29, 30, 31, 32, 33, 34, 35, null],\r\n      [108, 64, 65, 66, 67, 96, 97, 98, 99, 100],\r\n      [109, 60, 61, 62, 63, 92, 93, 94, 95, 101],\r\n      [110, 56, 57, 58, 59, 88, 89, 90, 91, 102],\r\n      [111, 52, 53, 54, 55, 84, 85, 86, 87, 103],\r\n      [112, 48, 49, 50, 51, 80, 81, 82, 83, 104],\r\n      [113, 44, 45, 46, 47, 76, 77, 78, 79, 105],\r\n      [114, 40, 41, 42, 43, 72, 73, 74, 75, 106],\r\n      [115, 36, 37, 38, 39, 68, 69, 70, 71, 107],\r\n      [null, 116, 117, 118, 119, 120, 121, 122, 123, null]],\r\n    width: 10,\r\n    height: 10,\r\n\r\n    //UI related\r\n    padding: 20,\r\n    radius: 15,\r\n\r\n    canvas_origin: [1, 1],\r\n\r\n    chainKey: [[0, 8], [1, 8], [2, 8], [3, 8], [4, 8], [5, 8], [6, 8], [7, 8]],\r\n\r\n    mcTable: [\r\n      [1, 0], [2, 0], [3, 0], [4, 0], [5, 0], [6, 0], [7, 0], [8, 0],\r\n      [9, 1], [9, 2], [9, 3], [9, 4], [9, 5], [9, 6], [9, 7], [9, 8],\r\n      [8, 9], [7, 9], [6, 9], [5, 9], [4, 9], [3, 9], [2, 9], [1, 9],\r\n      [0, 8], [0, 7], [0, 6], [0, 5], [0, 4], [0, 3], [0, 2], [0, 1]],\r\n\r\n    noteToXY(note)\r\n    {\r\n      if(note > 35 && note < 100) // grid\r\n      {\r\n        var keymap_lut = [[0,7],[1,7],[2,7],[3,7],[0,6],[1,6],[2,6],[3,6],[0,5],[1,5],[2,5],[3,5],[0,4],[1,4],[2,4],[3,4],[0,3],[1,3],[2,3],[3,3],[0,2],[1,2],[2,2],[3,2],[0,1],[1,1],[2,1],[3,1],[0,0],[1,0],[2,0],[3,0],[4,7],[5,7],[6,7],[7,7],[4,6],[5,6],[6,6],[7,6],[4,5],[5,5],[6,5],[7,5],[4,4],[5,4],[6,4],[7,4],[4,3],[5,3],[6,3],[7,3],[4,2],[5,2],[6,2],[7,2],[4,1],[5,1],[6,1],[7,1],[4,0],[5,0],[6,0],[7,0]]\r\n        return keymap_lut[note - 36]\r\n      }\r\n      else if(note > 99 && note < 108)\r\n      {\r\n        return this.chainKey[note - 100]\r\n      }\r\n    },\r\n\r\n    hexSysexGen: function () {\r\n      if (arguments.length != 3)\r\n        return [] //Error\r\n      switch (arguments.length) {\r\n        // case 2: //MC\r\n        //   var mc = arguments[0]\r\n        //   if(this.mcTable[mc] == null)\r\n        //     return\r\n        //   var x,y = this.mcTable[mc]\r\n        //   var hex = arguments[1]\r\n        case 3: //XY\r\n          var x = arguments[0]\r\n          var y = arguments[1]\r\n          var hex = arguments[2]\r\n          break;\r\n        default:\r\n          return;\r\n      }\r\n      var r = (hex >> 16) >> 1 //7 bit color\r\n      var g = (hex & 0xFF00 >> 8) >> 1\r\n      var b = (hex & 0xFF) >> 1\r\n      return [240, 0, 2, 3, 1, 0, 18, 32, 0, 3, r, g, b, 247]\r\n    }\r\n  },\r\n  \"Midi Fighter 64\":\r\n  {\r\n    channel: 1,\r\n    midiNameRegex: \"^Midi Fighter 64\",\r\n\r\n    layout: [\r\n      [\"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\"],\r\n      [\"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\"],\r\n      [\"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\"],\r\n      [\"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\"],\r\n      [\"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\"],\r\n      [\"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\"],\r\n      [\"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\"],\r\n      [\"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\", \"⦿\"]],\r\n\r\n    keymap: [\r\n      [64, 65, 66, 67, 96, 97, 98, 99],\r\n      [60, 61, 62, 63, 92, 93, 94, 95],\r\n      [56, 57, 58, 59, 88, 89, 90, 91],\r\n      [52, 53, 54, 55, 84, 85, 86, 87],\r\n      [48, 49, 50, 51, 80, 81, 82, 83],\r\n      [44, 45, 46, 47, 76, 77, 78, 79],\r\n      [40, 41, 42, 43, 72, 73, 74, 75],\r\n      [36, 37, 38, 39, 68, 69, 70, 71]],\r\n\r\n    width: 8,\r\n    height: 8,\r\n\r\n    //UI related\r\n    padding: 20,\r\n    radius: 50,\r\n\r\n    canvas_origin: [0, 0],\r\n\r\n    noteToXY(note)\r\n    {\r\n      if(note > 35 && note < 100) // grid\r\n      {\r\n        var keymap_lut = [[0,7],[1,7],[2,7],[3,7],[0,6],[1,6],[2,6],[3,6],[0,5],[1,5],[2,5],[3,5],[0,4],[1,4],[2,4],[3,4],[0,3],[1,3],[2,3],[3,3],[0,2],[1,2],[2,2],[3,2],[0,1],[1,1],[2,1],[3,1],[0,0],[1,0],[2,0],[3,0],[4,7],[5,7],[6,7],[7,7],[4,6],[5,6],[6,6],[7,6],[4,5],[5,5],[6,5],[7,5],[4,4],[5,4],[6,4],[7,4],[4,3],[5,3],[6,3],[7,3],[4,2],[5,2],[6,2],[7,2],[4,1],[5,1],[6,1],[7,1],[4,0],[5,0],[6,0],[7,0]]\r\n        return keymap_lut[note - 36]\r\n      }\r\n    },\r\n\r\n    hexSysexGen: function () {\r\n      if (arguments.length != 3)\r\n        return [] //Error\r\n      switch (arguments.length) {\r\n        // case 2: //MC\r\n        //   var mc = arguments[0]\r\n        //   if(this.mcTable[mc] == null)\r\n        //     return\r\n        //   var x,y = this.mcTable[mc]\r\n        //   var hex = arguments[1]\r\n        case 3: //XY\r\n          var x = arguments[0]\r\n          var y = arguments[1]\r\n          var hex = arguments[2]\r\n          break;\r\n        default:\r\n          return;\r\n      }\r\n      var r = (hex >> 16) >> 1 //7 bit color\r\n      var g = (hex & 0xFF00 >> 8) >> 1\r\n      var b = (hex & 0xFF) >> 1\r\n      return [240, 0, 2, 3, 1, 0, 18, 32, 0, 3, r, g, b, 247]\r\n    }\r\n  },\r\n  // \"Debug\":\r\n  // {\r\n  //   layout: [\r\n  //     [\"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\"],\r\n  //     [\"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\"],\r\n  //     [\"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\"],\r\n  //     [\"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\"],\r\n  //     [\"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\"],\r\n  //     [\"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\"],\r\n  //     [\"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\"],\r\n  //     [\"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\"],\r\n  //     [\"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\"],\r\n  //     [\"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\", \"⌗\"]],\r\n\r\n  //   //Size of LED since sometimes Key can come without LED. We don't really need them since we can load the size of layout array\r\n  //   width: 10,\r\n  //   height: 10,\r\n\r\n  //   //UI related\r\n  //   padding: 25,\r\n  //   radius: 15,\r\n\r\n  //   canvas_origin: [1, 1],\r\n\r\n  //   chainKey: [[9, 1], [9, 2], [9, 3], [9, 4], [9, 5], [9, 6], [9, 7], [9, 8],\r\n  //   [8, 9], [7, 9], [6, 9], [5, 9], [4, 9], [3, 9], [2, 9], [1, 9],\r\n  //   [0, 8], [0, 7], [0, 6], [0, 5], [0, 4], [0, 3], [0, 2], [0, 1]],\r\n\r\n  //   mcTable: [\r\n  //     [1, 0], [2, 0], [3, 0], [4, 0], [5, 0], [6, 0], [7, 0], [8, 0],\r\n  //     [9, 1], [9, 2], [9, 3], [9, 4], [9, 5], [9, 6], [9, 7], [9, 8],\r\n  //     [8, 9], [7, 9], [6, 9], [5, 9], [4, 9], [3, 9], [2, 9], [1, 9],\r\n  //     [0, 8], [0, 7], [0, 6], [0, 5], [0, 4], [0, 3], [0, 2], [0, 1]],\r\n\r\n  //   lKey: [9, 0],\r\n  // },\r\n}\r\n\r\nexport default deviceConfigs;","import React, { Component } from \"react\";\r\n\r\nclass AutoplayControl extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    setInterval(() => {\r\n      if (this.props.project !== undefined && this.props.project.autoplay !== undefined) {\r\n        this.forceUpdate();\r\n      }\r\n    }, 1000 / 60);\r\n  }\r\n\r\n  render() {\r\n    var playButton = (\r\n      <button\r\n        style={{ width: \"50px\", marginRight: \"10px\" }}\r\n        onClick={this.playAutoplay}\r\n      >\r\n        Play\r\n      </button>\r\n    );\r\n    var pauseButton = (\r\n      <button\r\n        style={{ width: \"50px\", marginRight: \"10px\" }}\r\n        onClick={this.pauseAutoplay}\r\n      >\r\n        Pause\r\n      </button>\r\n    );\r\n    var stopButton = (\r\n      <button\r\n        style={{ width: \"50px\", marginRight: \"10px\" }}\r\n        onClick={this.stopAutoplay}\r\n      >\r\n        Stop\r\n      </button>\r\n    );\r\n    var buttons = [];\r\n\r\n    var statusText = \"\";\r\n    if (this.props.project == undefined || this.props.project.autoplay == undefined || this.props.project.autoplay.total === 0)\r\n      return null;\r\n    switch (this.props.project.autoplay.status) {\r\n      case \"PLAYING\":\r\n        statusText = ` - ${(\r\n          (this.props.project.autoplay.progress / this.props.project.autoplay.total) *\r\n          100\r\n        ).toFixed(2)}% completed (${this.props.project.autoplay.progress}/${\r\n          this.props.project.autoplay.total\r\n        })`;\r\n        buttons.push(pauseButton);\r\n        break;\r\n      case \"PAUSED\":\r\n        statusText = ` - ${(\r\n          (this.props.project.autoplay.progress / this.props.project.autoplay.total) *\r\n          100\r\n        ).toFixed(2)}% completed (${this.props.project.autoplay.progress}/${\r\n          this.props.project.autoplay.total\r\n        }) - Paused`;\r\n        buttons.push(playButton, stopButton);\r\n        break;\r\n      case \"STOPPED\":\r\n        buttons.push(playButton);\r\n        break;\r\n    }\r\n    return (\r\n      <div>\r\n        <text>{\"Autoplay\" + statusText}</text>\r\n        <div />\r\n        {buttons}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  playAutoplay = () => {\r\n    if (this.props.project.autoplay !== undefined) {\r\n      this.props.project.autoplay.play(\r\n        // this.props.canvas.current,\r\n        // this.props.layoutConfig.canvas_origin\r\n      );\r\n    } else {\r\n      alert(\"No project loaded!\");\r\n    }\r\n  };\r\n\r\n  stopAutoplay = () => {\r\n    if (this.props.project.autoplay !== undefined) {\r\n      this.props.project.autoplay.stop();\r\n      this.props.canvas.current.initlalizeCanvas();\r\n    } else {\r\n      alert(\"No project loaded!\");\r\n    }\r\n  };\r\n\r\n  pauseAutoplay = () => {\r\n    if (this.props.project.autoplay !== undefined) {\r\n      this.props.project.autoplay.pause();\r\n      this.props.project.stopAll();\r\n    } else {\r\n      alert(\"No project loaded!\");\r\n    }\r\n  };\r\n}\r\n\r\nexport default AutoplayControl;\r\n","import React, { Component } from \"react\";\r\nimport ProjectFileReader from \"./ProjectFileReader\";\r\nimport ProjectFile from \"../Engine/projectFile\";\r\nimport Canvas from \"./Canvas\";\r\nimport config from \"../config\";\r\nimport deviceConfigs from \"../deviceConfigs\";\r\nimport Select from \"react-select\";\r\nimport AutoplayControl from \"./AutoplayControl\";\r\nimport WebMidi from \"webmidi\";\r\nimport preval from 'preval.macro'\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  componentDidMount()\r\n  {\r\n    console.log(\"%c203 | Prismatic \\nBuild \" + preval`module.exports = new Date().toLocaleString();`, \"color: cyan;font-size:24px;\")\r\n    this.loadUserConfigPerfences()\r\n    setTimeout((this.initlization).bind(this), 0) //Hacky way to get initlization done after first render\r\n  }\r\n\r\n  initlization()\r\n  {\r\n    WebMidi.enable(err => {\r\n      if (err) {\r\n        this.onMIDIFailure()\r\n      } else {\r\n        this.onMIDISuccess();\r\n      }},\r\n      true\r\n    );\r\n\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    if (urlParams.get(\"unipack\")) {\r\n      var unipack_url = urlParams.get(\"unipack\");\r\n      this.downloadProjectFile(unipack_url);\r\n    }\r\n  }\r\n\r\n  state = {\r\n    projectFile: undefined,\r\n    statusMessage: \"No project loaded\",\r\n\r\n    midiInput: {},\r\n    midiOutput: {},\r\n\r\n    layoutConfigName: config.defaultLayout,\r\n    layoutConfig: deviceConfigs[config.defaultLayout],\r\n\r\n    inputDevice: undefined,\r\n    inputConfigName: undefined,\r\n    inputConfig: undefined,\r\n\r\n    outputDevice: undefined,\r\n    outputConfigName: undefined,\r\n    outputConfig: undefined,\r\n  };\r\n\r\n  canvas = React.createRef();\r\n\r\n  downloadProjectFile = (url) => {\r\n    alert(\"Download Unipack from \" + url)\r\n    fetch(\"https://cors-anywhere.herokuapp.com/\" + url).then\r\n    ((r => \r\n      {var file = r.blob();\r\n        console.log(file);\r\n        this.loadProjectFile(file);\r\n      }).bind(this));\r\n  };\r\n\r\n  loadProjectFile = (projectPack) => {\r\n    if(projectPack == null)\r\n      return\r\n    this.setState({statusMessage: \"Loading Unipack\"});\r\n    new ProjectFile(projectPack, this.canvas)\r\n      .then((projectFile) => {\r\n        this.setState({ projectFile: projectFile });\r\n        console.log(projectFile);\r\n        this.setState({statusMessage: `Current Project: ${this.state.projectFile.info[\"title\"]} by ${this.state.projectFile.info[\"producerName\"]}`});\r\n      })\r\n      .catch((message) => {\r\n        this.setState({statusMessage: \"Error Loading Unipack\"});\r\n        alert(\"Error Loading Unipack: \" + projectPack.name)\r\n        console.error(\"Error Loading Unipack\")\r\n        console.error(message);\r\n      });\r\n  };\r\n\r\n  onMIDISuccess(){\r\n    console.log(\"Got access your MIDI devices.\");\r\n\r\n    this.updateMidiList();\r\n\r\n    WebMidi.addListener(\"connected\", this.onMidiStateChange.bind(this))\r\n    WebMidi.addListener(\"disconnected\", this.onMidiStateChange.bind(this))\r\n\r\n    this.loadUserDevicePerfences()\r\n  };\r\n\r\n  onMidiStateChange(e) {\r\n    console.log(e);\r\n    console.log(e.port.name, e.port.type, e.port.state);\r\n    if (e.port.state === \"disconnected\") {\r\n      if (e.port.type === \"input\") {\r\n        if (\r\n          this.state.inputDevice !== undefined &&\r\n          this.state.inputDevice.name === e.port.name\r\n        ) {\r\n          this.setState({ inputDevice: undefined });\r\n          this.setState({ inputDeviceConfig: undefined });\r\n          this.setState({ inputDeviceName: undefined });\r\n        }\r\n      } else if (e.port.type === \"output\") {\r\n        if (\r\n          this.state.outputDevice !== undefined &&\r\n          this.state.outputDevice.name === e.port.name\r\n        ) {\r\n          this.setState({ outputDevice: undefined });\r\n          this.setState({ outputDeviceConfig: undefined });\r\n          this.setState({ outputDeviceName: undefined });\r\n        }\r\n      }\r\n    }\r\n    this.updateMidiList();\r\n  }\r\n  \r\n  updateMidiList() {\r\n    var midiInput = {};\r\n    console.log(\"Input\");\r\n    for (var input of WebMidi.inputs) {\r\n      console.log(input.name);\r\n      midiInput[input.name] = input\r\n    }\r\n    this.setState({ midiInput: midiInput });\r\n\r\n    var midiOutput = {};\r\n    console.log();\r\n    console.log(\"Output\");\r\n    for (var output of WebMidi.outputs) {\r\n      console.log(output.name);\r\n      midiOutput[output.name] = output\r\n    }\r\n    this.setState({ midiOutput: midiOutput });\r\n  }\r\n\r\n\r\n  onMIDIFailure() {\r\n    console.log(\"Could not access your MIDI devices.\");\r\n    alert(\r\n      \"Could not access your MIDI devices. Try use another web browser or hardware platform.\"\r\n    );\r\n  }\r\n\r\n  autoConfigPicker(deviceName, mode) {\r\n    if (deviceName !== undefined) {\r\n      for (var key in deviceConfigs) {\r\n        if (deviceConfigs[key].midiNameRegex !== undefined && deviceName.match(deviceConfigs[key].midiNameRegex) !== null) {\r\n          var config = deviceConfigs[key];\r\n          console.log(\r\n            `${\r\n              mode ? \"Output\" : \"input\"\r\n            } config has been auto assigned to ${key}`\r\n          );\r\n          switch (mode) {\r\n            case \"Input\":\r\n              this.setInputConfig({label: key, value: config})\r\n              return true;\r\n            case \"Output\":\r\n              this.setOutputConfig({label: key, value: config})\r\n              return true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    alert(\r\n      `Unable to find matching ${\r\n        mode ? \"output\" : \"input\"\r\n      } config for device ${deviceName}`\r\n    );\r\n    return false\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"main\">\r\n          <div className=\"sidebar\">\r\n            <text>203 | Prismatic (Tech Preview Demo)</text>\r\n            <div className=\"sidebarItem\" />\r\n            <text className=\"sidebarItem\">\r\n              {this.state.statusMessage}\r\n            </text>\r\n            <ProjectFileReader\r\n              loadProjectFile={this.loadProjectFile}\r\n            ></ProjectFileReader>\r\n            <div className=\"sidebarItem\" />\r\n            <text>UI Layout</text>\r\n            <Select\r\n              className=\"sidebarItem\"\r\n              options={this.prepSelectConfig(deviceConfigs, \"layout\")}\r\n              autosize={true}\r\n              value={\r\n                this.state.layoutConfigName !== undefined\r\n                  ? {\r\n                      label: this.state.layoutConfigName,\r\n                      value: this.state.layoutConfig,\r\n                    }\r\n                  : { label: \"Layout Config\", value: undefined }\r\n              }\r\n              onChange={this.setLayoutConfig.bind(this)}\r\n            />\r\n            <text>Midi Input Device</text>\r\n            <Select\r\n              className=\"sidebarItem\"\r\n              options={this.prepSelectConfig(this.state.midiInput)}\r\n              autosize={true}\r\n              value={\r\n                this.state.inputDevice !== undefined\r\n                  ? {\r\n                      label: this.state.inputDevice.name,\r\n                      value: this.state.inputDevice,\r\n                    }\r\n                  : { label: \"Input Device\", value: undefined }\r\n              }\r\n              onChange={this.setInputDevice.bind(this)}\r\n            />\r\n            <text>Midi Input Device Config</text>\r\n            <Select\r\n              className=\"sidebarItem\"\r\n              options={this.prepSelectConfig(deviceConfigs, \"keymap\")}\r\n              autosize={true}\r\n              value={\r\n                this.state.inputConfigName !== undefined\r\n                  ? {\r\n                      label: this.state.inputConfigName,\r\n                      value: this.state.inputConfig,\r\n                    }\r\n                  : { label: \"Input Device Config\", value: undefined }\r\n              }\r\n              onChange={this.setInputConfig.bind(this)}\r\n            />\r\n            <text>Midi Output Device</text>\r\n            <Select\r\n              className=\"sidebarItem\"\r\n              options={this.prepSelectConfig(this.state.midiOutput)}\r\n              autosize={true}\r\n              value={\r\n                this.state.outputDevice !== undefined\r\n                  ? {\r\n                      label: this.state.outputDevice.name,\r\n                      value: this.state.outputDevice,\r\n                    }\r\n                  : { label: \"Output Device\", value: undefined }\r\n              }\r\n              onChange={this.setOutputDevice.bind(this)}\r\n            />\r\n            <text>Midi Output Device Config</text>\r\n            <Select\r\n              className=\"sidebarItem\"\r\n              options={this.prepSelectConfig(deviceConfigs, \"keymap\")}\r\n              autosize={true}\r\n              value={\r\n                this.state.outputConfigName !== undefined\r\n                  ? {\r\n                      label: this.state.outputConfigName,\r\n                      value: this.state.outputConfig,\r\n                    }\r\n                  : { label: \"Output Device Config\", value: undefined }\r\n              }\r\n              onChange={this.setOutputConfig.bind(this)}\r\n            />\r\n            <div />\r\n            <AutoplayControl project={this.state.projectFile} canvas={this.canvas} layoutConfig={this.state.layoutConfig}/>\r\n          </div>\r\n            <Canvas\r\n              ref={this.canvas}\r\n              projectFile={this.state.projectFile}\r\n              layoutConfig={this.state.layoutConfig}\r\n              inputDevice={this.state.inputDevice}\r\n              inputConfig={this.state.inputConfig}\r\n              outputDevice={this.state.outputDevice}\r\n              outputConfig={this.state.outputConfig}\r\n            />\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  setLayoutConfig(config) {\r\n    // console.log(config)\r\n    this.setState({ layoutConfigName: config.label });\r\n    this.setState({ layoutConfig: config.value });\r\n    localStorage.setItem('perferedLayoutConfig', config.label);\r\n  }\r\n\r\n  setInputConfig(config) {\r\n    // console.log(config)\r\n    this.setState({ inputConfigName: config.label });\r\n    this.setState({ inputConfig: config.value }, this.initlizateInputDevice.bind(this));\r\n    localStorage.setItem('perferedInputConfig', config.label);\r\n  }\r\n\r\n  setOutputConfig(config) {\r\n    // console.log(config)\r\n    this.setState({ outputConfigName: config.label });\r\n    this.setState({ outputConfig: config.value }, this.initlizateOutputDevice.bind(this));\r\n    localStorage.setItem('perferedOutputConfig', config.label);\r\n  }\r\n\r\n  setInputDevice(device, autoPickConfig = true) {\r\n    this.setState({ inputDevice: device.value });\r\n    if(autoPickConfig) this.autoConfigPicker(device.value.name, \"Input\");\r\n    localStorage.setItem('perferedInputDevice', device.value.name);\r\n  }\r\n\r\n  setOutputDevice(device, autoPickConfig = true) {\r\n    // console.log(\"Output device set to \" + device.name);\r\n    this.setState({ outputDevice: device.value });\r\n    if(autoPickConfig) this.autoConfigPicker(device.value.name, \"Output\");\r\n    localStorage.setItem('perferedOutputDevice', device.value.name);\r\n  }\r\n\r\n  initlizateInputDevice()\r\n  {\r\n    if(this.state.inputConfig !== undefined && this.state.inputDevice !== undefined)\r\n    {\r\n      if(this.state.inputConfig.inputInfoMessage !== undefined)\r\n      {\r\n        for(var i in this.state.inputConfig.infoMessage)\r\n        {\r\n          alert(this.state.inputConfig.inputInfoMessage[i])\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  initlizateOutputDevice()\r\n  {\r\n    //Sysex\r\n    if(this.state.outputConfig !== undefined && this.state.outputDevice !== undefined)\r\n    {\r\n      if(this.state.outputConfig.initializationSysex !== undefined)\r\n      {\r\n        for(var i in this.state.outputConfig.initializationSysex)\r\n        {\r\n          this.state.outputDevice.sendSysex([], this.state.outputConfig.initializationSysex[i])\r\n        }\r\n      }\r\n      if(this.state.outputConfig.outputInfoMessage !== undefined)\r\n      {\r\n        for(var i in this.state.outputConfig.infoMessage)\r\n        {\r\n          alert(this.state.outputConfig.outputInfoMessage[i])\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  prepSelectConfig(config, requiredKey = undefined) {\r\n    var result = [];\r\n    for (var key in config) {\r\n      if (requiredKey === undefined || config[key][requiredKey] !== undefined) {\r\n        result.push({\r\n          label: key,\r\n          value: config[key],\r\n        });\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  loadUserConfigPerfences() {\r\n    const perferedLayoutConfig = localStorage.getItem('perferedLayoutConfig');\r\n    if(perferedLayoutConfig !== null && deviceConfigs[perferedLayoutConfig] !== undefined)\r\n    {\r\n      this.setLayoutConfig({label: perferedLayoutConfig, value:deviceConfigs[perferedLayoutConfig]})\r\n    }\r\n\r\n    const perferedInputConfig = localStorage.getItem('perferedInputConfig');\r\n    if(perferedInputConfig !== null && deviceConfigs[perferedInputConfig] !== undefined)\r\n    {\r\n      this.setInputConfig({label: perferedInputConfig, value:deviceConfigs[perferedInputConfig]})\r\n    }\r\n\r\n    const perferedOutputConfig = localStorage.getItem('perferedOutputConfig');\r\n    if(perferedOutputConfig !== null && deviceConfigs[perferedOutputConfig] !== undefined)\r\n    {\r\n      this.setOutputConfig({label: perferedOutputConfig, value:deviceConfigs[perferedOutputConfig]})\r\n    }\r\n  }\r\n\r\n  loadUserDevicePerfences() {\r\n    const perferedInputDevice = localStorage.getItem('perferedInputDevice');\r\n    if(perferedInputDevice !== null && this.state.midiInput[perferedInputDevice] !== undefined)\r\n    {\r\n      this.setInputDevice({label: perferedInputDevice, value:this.state.midiInput[perferedInputDevice]}, false)\r\n    }\r\n\r\n    const perferedOutputDevice = localStorage.getItem('perferedOutputDevice');\r\n    if(perferedOutputDevice !== null && this.state.midiOutput[perferedOutputDevice] !== undefined)\r\n    {\r\n      this.setOutputDevice({label: perferedOutputDevice, value:this.state.midiOutput[perferedOutputDevice]}, false)\r\n    }\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './styles/main.css'\r\nimport App from './Components/App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\n  ReactDOM.render(<App/>, document.getElementById(\"root\"))\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}